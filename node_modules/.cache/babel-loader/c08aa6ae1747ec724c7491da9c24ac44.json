{"ast":null,"code":"import _regeneratorRuntime from\"c:/Users/bobma/Downloads/excite-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"c:/Users/bobma/Downloads/excite-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"c:/Users/bobma/Downloads/excite-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useRef,useEffect}from'react';import Card from'@material-ui/core/Card';import CardHeader from'@material-ui/core/CardHeader';import CardMedia from'@material-ui/core/CardMedia';import CardContent from'@material-ui/core/CardContent';import CardActions from'@material-ui/core/CardActions';import Avatar from'@material-ui/core/Avatar';import Typography from'@material-ui/core/Typography';import Collapse from'@material-ui/core/Collapse';import{ValidatorForm,TextValidator}from'react-material-ui-form-validator';import Button from'@material-ui/core/Button';import Divider from'@material-ui/core/Divider';import IconButton from'@material-ui/core/IconButton';import CircularProgress from'@material-ui/core/CircularProgress';import Icon from'@mdi/react';import{mdiThumbUp,mdiThumbUpOutline,mdiComment,mdiCommentOutline,mdiChevronDown,mdiChevronUp,mdiDelete,mdiSend}from'@mdi/js';import{makeStyles}from'@material-ui/core/styles';import axios from'axios';import*as _ from'underscore';import{connect}from'react-redux';import swal from'sweetalert';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import ListItemAvatar from'@material-ui/core/ListItemAvatar';import ListItemText from'@material-ui/core/ListItemText';import Plyr from'react-plyr';var useStyles=makeStyles(function(theme){return{card:{maxWidth:600,margin:'auto',padding:theme.spacing(2),backgroundColor:theme.palette.background.paper},media:{height:0,padding:'56.25%'},image:{maxWidth:'100%',maxHeight:'100%'}};});function UserPostsCard(props){var classes=useStyles();//Custom styles for the component\nvar formRef=useRef(null);//Ref for the validator form\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),expanded=_useState2[0],setExpanded=_useState2[1];//This expands the validator form\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),commentSending=_useState6[0],setCommentSending=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),likeSending=_useState8[0],setLikeSending=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),commentDeleting=_useState10[0],setCommentDeleting=_useState10[1];//This variable and setter will handle disabling the delete button while a comment is being deleted.\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),commentLiking=_useState12[0],setCommentLiking=_useState12[1];//This variable and setter will handle disabling the comment like Button when the comment is being liked or unliked.\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),deletingPost=_useState14[0],setDeletingPost=_useState14[1];//Variable and setter that will disable the delete button on a post while the server is deleting the post.\nuseEffect(function(){ValidatorForm.addValidationRule('notEmpty',function(v){if(v.length<1){return false;}else{return true;}});},[]);function sendComment(){return _sendComment.apply(this,arguments);}function _sendComment(){_sendComment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formValid,date,months,day,year,month,dateString,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://This function will handle sending a new comment to the server \nsetCommentSending(true);_context.next=3;return formRef.current.isFormValid();case 3:formValid=_context.sent;if(formValid){_context.next=9;break;}swal('Uh Oh!','Make sure you filled out the comment form correctly!','error');setCommentSending(false);_context.next=17;break;case 9:date=new Date();months=['Jan','Feb','Mar','Apr','May','Jun','July','Aug','Sept','Oct','Nov','Dec'];day=date.getDate();year=date.getFullYear();month=date.getMonth();dateString=\"\".concat(months[month],\" \").concat(day,\", \").concat(year);data={uniqueCommentId:Date.now()+'comment'+props.mainUser.uniqueUserId+props.post.uniqueUserId,uniqueUserId:props.mainUser.uniqueUserId,username:props.mainUser.username,dateString:dateString,text:comment,uniquePosterId:props.post.uniqueUserId,uniquePostId:props.post.uniquePostId};return _context.abrupt(\"return\",axios({method:'POST',url:'http://192.168.0.9:3001/api/add/comment',data:data,headers:{'Content-Type':'application/json'}}).then(function(response){if(response.data.posts){props.dispatch({type:'user/updateUser',payload:response.data.user});props.dispatch({type:'userPosts/updatePosts',payload:response.data.posts});setCommentSending(false);setComment('');swal('Great!','Comment successfully sent!','success');}else{swal('Uh Oh!','There was an error sending that comment! Please try again.','error');setCommentSending(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error sending that comment! Please try again.','error');setCommentSending(false);}));case 17:case\"end\":return _context.stop();}}},_callee);}));return _sendComment.apply(this,arguments);}function handleLike(){//This function will handle what happens when a user likes a post. \nsetLikeSending(true);var likeType;if(props.post.likes.includes(props.mainUser.uniqueUserId)){likeType='unlike';}else{likeType='like';}var data=JSON.stringify({uniquePostId:props.post.uniquePostId,uniquePosterId:props.post.uniqueUserId,uniqueLikerId:props.mainUser.uniqueUserId,likeType:likeType,username:props.mainUser.username});return axios({method:'POST',url:'http://192.168.0.9:3001/api/handle/post/like',data:data,headers:{'Content-Type':'application/json'}}).then(function(response){if(response.data.posts){props.dispatch({type:'userPosts/updatePosts',payload:response.data.posts});props.dispatch({type:'user/updateUser',payload:response.data.user});if(response.data.likeType==='like'){swal('Great!','Post was successfully liked!','success');setLikeSending(false);}else{swal('Great!','Post was successfully unliked!','success');setLikeSending(false);}}else{swal('Uh Oh!','There was an error liking that post!','error');setLikeSending(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error liking that post!','error');setLikeSending(false);});}function timeDifference(date2,dateString){//This function will return whether or not we display something like \"2 hrs ago\" \"20 min ago\" or the date string for a post\nvar date1=Date.now();var difference=date1-date2;var daysDifference=Math.floor(difference/1000/60/60/24);var hoursDifference=Math.floor(difference/1000/60/60);var minutesDifference=Math.floor(difference/1000/60);var secondsDifference=Math.floor(difference/1000);if(daysDifference>0){return dateString;}else if(hoursDifference>0&&hoursDifference<23){return\"\".concat(hoursDifference,\" hr ago\");}else if(minutesDifference>0&&minutesDifference<60){return\"\".concat(minutesDifference,\" min ago\");}else if(minutesDifference===0){return\"\".concat(secondsDifference,\" secs ago\");}else{return dateString;}}function deleteComment(uniqueCommentId){//This function will be responsible for deleting a comment from a post. \nsetCommentDeleting(true);var data=JSON.stringify({uniqueUserId:props.mainUser.uniqueUserId,uniquePostId:props.post.uniquePostId,commentId:uniqueCommentId,uniquePosterId:props.post.uniqueUserId});return axios({method:'POST',url:\"http://192.168.0.9:3001/api/delete/comment\",data:data,headers:{'Content-Type':'application/json'}}).then(function(response){if(response.data.posts){swal('Great!','Comment successfully deleted!','success');props.dispatch({type:'user/updateUser',payload:response.data.user});props.dispatch({type:'userPosts/updatePosts',payload:response.data.posts});setCommentDeleting(false);}else{swal('Uh Oh!','There was an error deleting that comment!','error');setCommentDeleting(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error deleting that comment!','error');setCommentDeleting(false);});}function handleCommentLike(uniqueCommentId,uniqueCommenterId,isLiked){setCommentLiking(true);var likeType;if(isLiked===true){likeType='unlike';}else{likeType='like';}var data=JSON.stringify({uniquePostId:props.post.uniquePostId,commentId:uniqueCommentId,uniqueLikerId:props.mainUser.uniqueUserId,uniquePostPosterId:props.post.uniqueUserId,uniqueCommenterId:uniqueCommenterId,likeType:likeType,username:props.mainUser.username});return axios({method:'POST',url:'http://192.168.0.9:3001/api/handle/comment/like',data:data,headers:{'Content-Type':'application/json'}}).then(function(response){if(response.data.posts){props.dispatch({type:'user/updateUser',payload:response.data.user});props.dispatch({type:'userPosts/updatePosts',payload:response.data.posts});if(response.data.likeType==='unlike'){swal('Great!','You successfully unliked that comment!','success');setCommentLiking(false);}else{swal('Great!','You successfully liked that comment!','success');setCommentLiking(false);}}else{swal('Uh Oh!','There was an error liking that comment!','error');setCommentLiking(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh','There was an error liking that comment!','error');setCommentLiking(false);});}function deletePost(){//This function will handle deleting a post from the database. \nsetDeletingPost(true);var data=JSON.stringify({uniqueUserId:props.mainUser.uniqueUserId,uniquePostId:props.post.uniquePostId});return axios({method:'POST',url:'http://192.168.0.9:3001/api/delete/post',data:data,headers:{'Content-Type':'application/json'}}).then(function(response){if(response.data.user){props.dispatch({type:'user/updateUser',payload:response.data.user});props.dispatch({type:'userPosts/updatePosts',payload:response.data.posts});swal('Great!','Post succcessfully deleted','success');setDeletingPost(false);}else{swal('Uh Oh!','There was an error deleting that post!','error');setDeletingPost(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error deleting that post!','error');setDeletingPost(false);});}function deleteMediaPost(){//This function will handle deleting a post from the database. \nsetDeletingPost(true);var data=JSON.stringify({uniqueUserId:props.mainUser.uniqueUserId,uniquePostId:props.post.uniquePostId,filename:props.post.src});return axios({method:'POST',url:'http://192.168.0.9:3001/api/delete/media/post',data:data,headers:{'Content-Type':'application/json'}}).then(function(response){if(response.data.user){props.dispatch({type:'user/updateUser',payload:response.data.user});props.dispatch({type:'userPosts/updatePosts',payload:response.data.posts});swal('Great!','Post succcessfully deleted','success');setDeletingPost(false);}else{swal('Uh Oh!','There was an error deleting that post!','error');setDeletingPost(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error deleting that post!','error');setDeletingPost(false);});}return/*#__PURE__*/_jsxs(Card,{className:classes.card,id:\"\".concat(props.post.uniquePostId),children:[/*#__PURE__*/_jsx(CardHeader,{title:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",children:props.post.username}),subheader:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",component:\"span\",color:\"textSecondary\",children:timeDifference(props.post.utcTime,props.post.dateString)}),avatar:/*#__PURE__*/_jsx(Avatar,{src:\"http://192.168.0.9:3001/api/get/avatar/by/id/\".concat(props.post.uniqueUserId),alt:\"\".concat(props.post.username),title:\"\".concat(props.post.username)})}),/*#__PURE__*/_jsx(\"div\",{children:props.post.type==='photo'&&/*#__PURE__*/_jsx(CardMedia,{component:\"img\",src:\"http://192.168.0.9:3001/api/get-photo/\".concat(props.post.src),title:\"Post by \".concat(props.post.username),alt:\"GeoCities photo post\"})}),/*#__PURE__*/_jsx(\"div\",{children:props.post.type==='video'&&/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(Plyr,{type:\"video\",sources:[{src:\"http://192.168.0.9:3001/api/get-video/\".concat(props.post.src)}],playsInline:true})})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(\"div\",{children:props.post.type==='text'&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",component:\"p\",children:props.post.text})}),/*#__PURE__*/_jsx(\"div\",{children:(props.post.type==='photo'||props.post.type==='video')&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",component:\"p\",children:props.post.caption})})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsxs(IconButton,{color:\"primary\",disabled:likeSending,children:[/*#__PURE__*/_jsx(Icon,{path:props.post.likes.includes(props.mainUser.uniqueUserId)?mdiThumbUp:mdiThumbUpOutline,size:1,title:\"Post like button\",\"aria-label\":\"Post like button\",onClick:handleLike}),/*#__PURE__*/_jsx(\"div\",{children:props.post.likes.length>0&&/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"p\",children:props.post.likes.length})})]}),/*#__PURE__*/_jsxs(IconButton,{color:\"primary\",onClick:function onClick(){return setExpanded(!expanded);},children:[/*#__PURE__*/_jsx(Icon,{path:_.find(props.post.comments,function(comment){return comment.uniqueUserId===props.mainUser.uniqueUserId;})?mdiComment:mdiCommentOutline,size:1,title:\"Comment button\",\"aria-label\":\"Comment button\"}),/*#__PURE__*/_jsx(\"div\",{children:props.post.comments.length>0&&/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"p\",children:props.post.comments.length})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[props.post.uniqueUserId===props.mainUser.uniqueUserId&&(props.post.type==='text'||props.post.type==='link')&&/*#__PURE__*/_jsx(IconButton,{color:\"primary\",onClick:deletePost,disabled:deletingPost,children:deletingPost?/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"}):/*#__PURE__*/_jsx(Icon,{path:mdiDelete,size:1,title:\"Post delete button\",\"aria-label\":\"Post delete button\"})}),props.post.uniqueUserId===props.mainUser.uniqueUserId&&(props.post.type==='photo'||props.post.type==='video')&&/*#__PURE__*/_jsx(IconButton,{color:\"primary\",onClick:deleteMediaPost,disabled:deletingPost,children:deletingPost?/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"}):/*#__PURE__*/_jsx(Icon,{path:mdiDelete,size:1,title:\"Post delete button\",\"aria-label\":\"Post delete button\"})})]}),/*#__PURE__*/_jsx(IconButton,{style:{marginLeft:'auto'},onClick:function onClick(){return setExpanded(!expanded);},children:/*#__PURE__*/_jsx(Icon,{path:expanded?mdiChevronUp:mdiChevronDown,size:1,title:expanded?'Expand less':'Expand more',\"aria-label\":expanded?'Expand less':'Expand more'})})]}),/*#__PURE__*/_jsxs(Collapse,{in:expanded,children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(ValidatorForm,{ref:formRef,onSubmit:function onSubmit(e){return e.preventDefault();},children:[/*#__PURE__*/_jsx(TextValidator,{label:\"Comment\",placeholder:\"Add a comment...\",variant:\"outlined\",color:\"primary\",helperText:\"Add a comment\",value:comment,onChange:function onChange(e){return setComment(e.target.value);},validator:['notEmpty'],errorMessages:['You must enter some text to send a comment!'],InputLabelProps:{shrink:true},rows:4,multiline:true,fullWidth:true}),/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(Icon,{path:mdiSend,size:1,title:\"Send icon\"}),\"aria-label\":\"Send comment button\",disabled:commentSending,onClick:sendComment,children:commentSending?/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"}):'Send'})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:10},children:props.post.comments.length>0&&/*#__PURE__*/_jsx(\"div\",{children:props.post.comments.map(function(comment,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(ListItem,{id:\"\".concat(comment.uniqueCommentId),alignItems:\"flex-start\",children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{src:\"http://192.168.0.9:3001/api/get/avatar/by/id/\".concat(comment.uniqueUserId),title:\"\".concat(comment.username),alt:\"\".concat(comment.username)})}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",children:comment.username}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",component:\"span\",color:\"textSecondary\",children:timeDifference(comment.utcTime,comment.dateString)})]}),secondary:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",component:\"p\",children:comment.text})}),/*#__PURE__*/_jsx(\"div\",{children:(props.post.uniqueUserId===comment.uniqueUserId||comment.uniqueCommentId===props.mainUser.uniqueUserId)&&/*#__PURE__*/_jsx(IconButton,{color:\"primary\",onClick:function onClick(){return deleteComment(comment.uniqueCommentId);},disabled:commentDeleting,children:commentDeleting?/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"}):/*#__PURE__*/_jsx(Icon,{path:mdiDelete,size:1,title:\"Delete comment button\",\"aria-label\":\"Delete comment button\"})})}),/*#__PURE__*/_jsx(\"div\",{children:props.mainUser!==null&&/*#__PURE__*/_jsxs(IconButton,{color:\"primary\",disabled:commentLiking,onClick:function onClick(){return handleCommentLike(comment.uniqueCommentId,comment.uniqueUserId,comment.likes.includes(props.mainUser.uniqueUserId));},children:[!comment.likes.includes(props.mainUser.uniqueUserId)?/*#__PURE__*/_jsx(Icon,{path:mdiThumbUpOutline,size:1,title:\"Comment like button\",\"aria-label\":\"Comment like button\"}):/*#__PURE__*/_jsx(Icon,{path:mdiThumbUp,size:1,title:\"Comment like button\",\"aria-label\":\"Comment like button\"}),comment.likes.length>0&&/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"p\",children:comment.likes.length})]})})]}),index<props.post.comments.length-1&&/*#__PURE__*/_jsx(Divider,{})]},index);})})})]})]})]});}function mapStateToProps(state){return{mainUser:state.userReducer.user,posts:state.userPostsReducer.posts};}export default connect(mapStateToProps)(UserPostsCard);","map":{"version":3,"sources":["c:/Users/bobma/Downloads/excite-app/src/components/UserPostsCard.js"],"names":["React","useState","useRef","useEffect","Card","CardHeader","CardMedia","CardContent","CardActions","Avatar","Typography","Collapse","ValidatorForm","TextValidator","Button","Divider","IconButton","CircularProgress","Icon","mdiThumbUp","mdiThumbUpOutline","mdiComment","mdiCommentOutline","mdiChevronDown","mdiChevronUp","mdiDelete","mdiSend","makeStyles","axios","_","connect","swal","List","ListItem","ListItemAvatar","ListItemText","Plyr","useStyles","theme","card","maxWidth","margin","padding","spacing","backgroundColor","palette","background","paper","media","height","image","maxHeight","UserPostsCard","props","classes","formRef","expanded","setExpanded","comment","setComment","commentSending","setCommentSending","likeSending","setLikeSending","commentDeleting","setCommentDeleting","commentLiking","setCommentLiking","deletingPost","setDeletingPost","addValidationRule","v","length","sendComment","current","isFormValid","formValid","date","Date","months","day","getDate","year","getFullYear","month","getMonth","dateString","data","uniqueCommentId","now","mainUser","uniqueUserId","post","username","text","uniquePosterId","uniquePostId","method","url","headers","then","response","posts","dispatch","type","payload","user","catch","err","console","log","message","handleLike","likeType","likes","includes","JSON","stringify","uniqueLikerId","timeDifference","date2","date1","difference","daysDifference","Math","floor","hoursDifference","minutesDifference","secondsDifference","deleteComment","commentId","handleCommentLike","uniqueCommenterId","isLiked","uniquePostPosterId","deletePost","deleteMediaPost","filename","src","utcTime","caption","find","comments","marginLeft","e","preventDefault","target","value","shrink","marginTop","map","index","mapStateToProps","state","userReducer","userPostsReducer"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\r\nimport Button from '@material-ui/core/Button';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Icon from '@mdi/react';\r\nimport { mdiThumbUp, mdiThumbUpOutline, mdiComment, mdiCommentOutline, mdiChevronDown, mdiChevronUp, mdiDelete, mdiSend } from '@mdi/js';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport axios from 'axios';\r\nimport * as _ from 'underscore';\r\nimport { connect } from 'react-redux';\r\nimport swal from 'sweetalert';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Plyr from 'react-plyr';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    card: {\r\n        maxWidth: 600,\r\n        margin: 'auto',\r\n        padding: theme.spacing(2),\r\n        backgroundColor: theme.palette.background.paper,\r\n    },\r\n    media: {\r\n        height: 0,\r\n        padding: '56.25%',\r\n    },\r\n    image: {\r\n        maxWidth: '100%',\r\n        maxHeight: '100%',\r\n    },\r\n}));\r\n\r\nfunction UserPostsCard(props) {\r\n    const classes = useStyles(); //Custom styles for the component\r\n    const formRef = useRef(null); //Ref for the validator form\r\n    const [expanded, setExpanded] = useState(false); //This expands the validator form\r\n    const [comment, setComment] = useState('');\r\n    const [commentSending, setCommentSending] = useState(false);\r\n    const [likeSending, setLikeSending] = useState(false);\r\n    const [commentDeleting, setCommentDeleting] = useState(false); //This variable and setter will handle disabling the delete button while a comment is being deleted.\r\n    const [commentLiking, setCommentLiking] = useState(false); //This variable and setter will handle disabling the comment like Button when the comment is being liked or unliked.\r\n    const [deletingPost, setDeletingPost] = useState(false); //Variable and setter that will disable the delete button on a post while the server is deleting the post.\r\n    \r\n    useEffect(() => {\r\n        ValidatorForm.addValidationRule('notEmpty', v => {\r\n            if(v.length < 1) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    async function sendComment() {\r\n        //This function will handle sending a new comment to the server \r\n        setCommentSending(true);\r\n        let formValid = await formRef.current.isFormValid();\r\n        if(!formValid) {\r\n            swal(\r\n                'Uh Oh!',\r\n                'Make sure you filled out the comment form correctly!',\r\n                'error',\r\n            );\r\n            setCommentSending(false);\r\n        }\r\n        else {\r\n            let date = new Date();\r\n            let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\r\n            let day = date.getDate();\r\n            let year = date.getFullYear();\r\n            let month = date.getMonth();\r\n            let dateString = `${months[month]} ${day}, ${year}`;\r\n\r\n            let data = {\r\n                uniqueCommentId: Date.now() + 'comment' + props.mainUser.uniqueUserId + props.post.uniqueUserId,\r\n                uniqueUserId: props.mainUser.uniqueUserId,\r\n                username: props.mainUser.username,\r\n                dateString: dateString,\r\n                text: comment,\r\n                uniquePosterId: props.post.uniqueUserId,\r\n                uniquePostId: props.post.uniquePostId,\r\n            }\r\n\r\n            return axios({\r\n                method: 'POST',\r\n                url: 'http://192.168.0.9:3001/api/add/comment',\r\n                data: data,\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                }\r\n            }).then(response => {\r\n                if(response.data.posts) {\r\n                    props.dispatch({type: 'user/updateUser', payload: response.data.user});\r\n                    props.dispatch({type: 'userPosts/updatePosts', payload: response.data.posts});\r\n                    setCommentSending(false);\r\n                    setComment('');\r\n                    swal(\r\n                        'Great!',\r\n                        'Comment successfully sent!',\r\n                        'success',\r\n                    );\r\n                }\r\n                else {\r\n                    swal(\r\n                        'Uh Oh!',\r\n                        'There was an error sending that comment! Please try again.',\r\n                        'error',\r\n                    );\r\n                    setCommentSending(false);\r\n                }\r\n            }).catch(err => {\r\n                console.log(err.message);\r\n                swal(\r\n                    'Uh Oh!',\r\n                    'There was an error sending that comment! Please try again.',\r\n                    'error',\r\n                );\r\n                setCommentSending(false);\r\n            });\r\n        }\r\n    }\r\n\r\n    function handleLike() {\r\n        //This function will handle what happens when a user likes a post. \r\n        setLikeSending(true);\r\n        let likeType;\r\n        if(props.post.likes.includes(props.mainUser.uniqueUserId)) {\r\n            likeType = 'unlike'\r\n        }\r\n        else {\r\n            likeType = 'like';\r\n        }\r\n\r\n        let data = JSON.stringify({\r\n            uniquePostId: props.post.uniquePostId,\r\n            uniquePosterId: props.post.uniqueUserId,\r\n            uniqueLikerId: props.mainUser.uniqueUserId,\r\n            likeType: likeType,\r\n            username: props.mainUser.username,\r\n        });\r\n\r\n        return axios({\r\n            method: 'POST',\r\n            url: 'http://192.168.0.9:3001/api/handle/post/like',\r\n            data: data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        }).then(response => {\r\n            if(response.data.posts) {\r\n                props.dispatch({type: 'userPosts/updatePosts', payload: response.data.posts});\r\n                props.dispatch({type: 'user/updateUser', payload: response.data.user});\r\n                if(response.data.likeType === 'like') {\r\n                    swal(\r\n                        'Great!',\r\n                        'Post was successfully liked!',\r\n                        'success',\r\n                    );\r\n                    setLikeSending(false);\r\n                }\r\n                else {\r\n                    swal(\r\n                        'Great!',\r\n                        'Post was successfully unliked!',\r\n                        'success',\r\n                    );\r\n                    setLikeSending(false);\r\n                }\r\n            }\r\n            else {\r\n                swal(\r\n                    'Uh Oh!',\r\n                    'There was an error liking that post!',\r\n                    'error',\r\n                );\r\n                setLikeSending(false);\r\n            }\r\n        }).catch(err => {\r\n            console.log(err.message);\r\n            swal(\r\n                'Uh Oh!',\r\n                'There was an error liking that post!',\r\n                'error',\r\n            );\r\n            setLikeSending(false);\r\n        });\r\n    }\r\n\r\n    function timeDifference(date2, dateString) {\r\n        //This function will return whether or not we display something like \"2 hrs ago\" \"20 min ago\" or the date string for a post\r\n        let date1 = Date.now();\r\n        let difference = date1 - date2;\r\n        let daysDifference = Math.floor(difference/1000/60/60/24);\r\n        let hoursDifference = Math.floor(difference/1000/60/60);\r\n        let minutesDifference = Math.floor(difference/1000/60);\r\n        let secondsDifference = Math.floor(difference/1000);\r\n        if(daysDifference > 0) {\r\n            return dateString;\r\n        }\r\n        else if(hoursDifference > 0 && hoursDifference < 23) {\r\n            return `${hoursDifference} hr ago`;\r\n        }\r\n        else if(minutesDifference > 0 && minutesDifference < 60) {\r\n            return `${minutesDifference} min ago`;\r\n        }\r\n        else if(minutesDifference === 0) {\r\n            return `${secondsDifference} secs ago`\r\n        }\r\n        else {\r\n            return dateString;\r\n        }\r\n    }\r\n\r\n    function deleteComment(uniqueCommentId) {\r\n        //This function will be responsible for deleting a comment from a post. \r\n        setCommentDeleting(true);\r\n        let data = JSON.stringify({\r\n            uniqueUserId: props.mainUser.uniqueUserId,\r\n            uniquePostId: props.post.uniquePostId,\r\n            commentId: uniqueCommentId,\r\n            uniquePosterId: props.post.uniqueUserId,\r\n        });\r\n\r\n        return axios({\r\n            method: 'POST',\r\n            url: `http://192.168.0.9:3001/api/delete/comment`,\r\n            data: data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            }\r\n        }).then(response => {\r\n            if(response.data.posts) {\r\n                swal(\r\n                    'Great!',\r\n                    'Comment successfully deleted!',\r\n                    'success',\r\n                );\r\n                props.dispatch({type: 'user/updateUser', payload: response.data.user});\r\n                props.dispatch({type: 'userPosts/updatePosts', payload: response.data.posts});\r\n                setCommentDeleting(false);\r\n            }\r\n            else {\r\n                swal(\r\n                    'Uh Oh!',\r\n                    'There was an error deleting that comment!',\r\n                    'error',\r\n                );\r\n                setCommentDeleting(false);\r\n            }\r\n        }).catch(err => {\r\n            console.log(err.message);\r\n            swal(\r\n                'Uh Oh!',\r\n                'There was an error deleting that comment!',\r\n                'error',\r\n            );\r\n            setCommentDeleting(false);\r\n        });\r\n\r\n    }\r\n\r\n    function handleCommentLike(uniqueCommentId, uniqueCommenterId, isLiked) {\r\n        setCommentLiking(true); \r\n        let likeType;\r\n        if(isLiked === true) {\r\n            likeType = 'unlike';\r\n        }\r\n        else {\r\n            likeType = 'like';\r\n        }\r\n\r\n        let data = JSON.stringify({\r\n            uniquePostId: props.post.uniquePostId,\r\n            commentId: uniqueCommentId,\r\n            uniqueLikerId: props.mainUser.uniqueUserId,\r\n            uniquePostPosterId: props.post.uniqueUserId,\r\n            uniqueCommenterId: uniqueCommenterId,\r\n            likeType: likeType,\r\n            username: props.mainUser.username,\r\n        });\r\n\r\n        return axios({\r\n            method: 'POST',\r\n            url: 'http://192.168.0.9:3001/api/handle/comment/like',\r\n            data: data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        }).then(response => {\r\n            if(response.data.posts) {\r\n                props.dispatch({type: 'user/updateUser', payload: response.data.user});\r\n                props.dispatch({type: 'userPosts/updatePosts', payload: response.data.posts});\r\n                if(response.data.likeType === 'unlike') {\r\n                    swal(\r\n                        'Great!',\r\n                        'You successfully unliked that comment!',\r\n                        'success',\r\n                    );\r\n                    setCommentLiking(false);\r\n                }\r\n                else {\r\n                    swal(\r\n                        'Great!',\r\n                        'You successfully liked that comment!',\r\n                        'success',\r\n                    );\r\n                    setCommentLiking(false);\r\n                }\r\n            }\r\n            else {\r\n                swal(\r\n                    'Uh Oh!',\r\n                    'There was an error liking that comment!',\r\n                    'error',\r\n                );\r\n                setCommentLiking(false);\r\n            }\r\n        }).catch(err => {\r\n            console.log(err.message);\r\n            swal(\r\n                'Uh Oh',\r\n                'There was an error liking that comment!',\r\n                'error',\r\n            );\r\n            setCommentLiking(false);\r\n        });\r\n    }\r\n\r\n    function deletePost() {\r\n        //This function will handle deleting a post from the database. \r\n        setDeletingPost(true);\r\n\r\n        let data = JSON.stringify({\r\n            uniqueUserId: props.mainUser.uniqueUserId,\r\n            uniquePostId: props.post.uniquePostId,\r\n        });\r\n\r\n        return axios({\r\n            method: 'POST',\r\n            url: 'http://192.168.0.9:3001/api/delete/post',\r\n            data: data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        }).then(response => {\r\n            if(response.data.user) {\r\n                props.dispatch({type: 'user/updateUser', payload: response.data.user});\r\n                props.dispatch({type: 'userPosts/updatePosts', payload: response.data.posts});\r\n                swal(\r\n                    'Great!',\r\n                    'Post succcessfully deleted',\r\n                    'success',\r\n                );\r\n                setDeletingPost(false);\r\n            }\r\n            else {\r\n                swal(\r\n                    'Uh Oh!',\r\n                    'There was an error deleting that post!',\r\n                    'error',\r\n                );\r\n                setDeletingPost(false);\r\n            }\r\n        }).catch(err => {\r\n            console.log(err.message);\r\n\r\n            swal(\r\n                'Uh Oh!',\r\n                'There was an error deleting that post!',\r\n                'error',\r\n            );\r\n\r\n            setDeletingPost(false);\r\n        });\r\n    }\r\n\r\n    function deleteMediaPost() {\r\n        //This function will handle deleting a post from the database. \r\n        setDeletingPost(true);\r\n\r\n        let data = JSON.stringify({\r\n            uniqueUserId: props.mainUser.uniqueUserId,\r\n            uniquePostId: props.post.uniquePostId,\r\n            filename: props.post.src,\r\n        });\r\n\r\n        return axios({\r\n            method: 'POST',\r\n            url: 'http://192.168.0.9:3001/api/delete/media/post',\r\n            data: data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        }).then(response => {\r\n            if(response.data.user) {\r\n                props.dispatch({type: 'user/updateUser', payload: response.data.user});\r\n                props.dispatch({type: 'userPosts/updatePosts', payload: response.data.posts});\r\n                swal(\r\n                    'Great!',\r\n                    'Post succcessfully deleted',\r\n                    'success',\r\n                );\r\n                setDeletingPost(false);\r\n            }\r\n            else {\r\n                swal(\r\n                    'Uh Oh!',\r\n                    'There was an error deleting that post!',\r\n                    'error',\r\n                );\r\n                setDeletingPost(false);\r\n            }\r\n        }).catch(err => {\r\n            console.log(err.message);\r\n\r\n            swal(\r\n                'Uh Oh!',\r\n                'There was an error deleting that post!',\r\n                'error',\r\n            );\r\n\r\n            setDeletingPost(false);\r\n        });\r\n    }\r\n\r\n    return (\r\n        <Card \r\n            className={classes.card} \r\n            id={`${props.post.uniquePostId}`}\r\n        >\r\n            <CardHeader \r\n                title={\r\n                    <Typography \r\n                        variant='h6' \r\n                        component='h6' \r\n                    >\r\n                        {props.post.username}\r\n                    </Typography>\r\n                }\r\n                subheader={\r\n                    <Typography \r\n                        variant='subtitle1' \r\n                        component='span' \r\n                        color='textSecondary' \r\n                    >\r\n                        {timeDifference(props.post.utcTime, props.post.dateString)}\r\n                    </Typography>\r\n                }\r\n                avatar={\r\n                    <Avatar \r\n                        src={`http://192.168.0.9:3001/api/get/avatar/by/id/${props.post.uniqueUserId}`}\r\n                        alt={`${props.post.username}`}\r\n                        title={`${props.post.username}`} \r\n                    />\r\n                }\r\n            />\r\n            <div>\r\n                {props.post.type === 'photo' &&\r\n                    <CardMedia \r\n                        component='img'\r\n                        src={`http://192.168.0.9:3001/api/get-photo/${props.post.src}`}\r\n                        title={`Post by ${props.post.username}`}\r\n                        alt='GeoCities photo post'\r\n                    />\r\n                }\r\n            </div>\r\n            <div \r\n            >\r\n                {props.post.type === 'video' &&\r\n                    <CardContent>\r\n                        <Plyr \r\n                            type='video'\r\n                            sources={[\r\n                                {\r\n                                    src: `http://192.168.0.9:3001/api/get-video/${props.post.src}`,\r\n                                }\r\n                            ]}\r\n                            playsInline={true}\r\n                        />\r\n                    </CardContent>\r\n                }\r\n            </div>\r\n            <CardContent>\r\n                <div>\r\n                    {props.post.type === 'text' &&\r\n                        <Typography \r\n                            variant='body2' \r\n                            component='p' \r\n                        >\r\n                            {props.post.text}\r\n                        </Typography>\r\n                    }\r\n                </div>\r\n                <div>\r\n                    {(props.post.type === 'photo' || props.post.type === 'video') && \r\n                        <Typography \r\n                            variant='body2' \r\n                            component='p' \r\n                        >\r\n                            {props.post.caption}\r\n                        </Typography>\r\n                    }\r\n                </div>\r\n            </CardContent>\r\n            <CardActions>\r\n                <IconButton \r\n                    color='primary'\r\n                    disabled={likeSending}\r\n                >\r\n                    <Icon  \r\n                        path={props.post.likes.includes(props.mainUser.uniqueUserId) ? mdiThumbUp : mdiThumbUpOutline}\r\n                        size={1} \r\n                        title='Post like button'\r\n                        aria-label='Post like button' \r\n                        onClick={handleLike}\r\n                    />\r\n                    <div>\r\n                        {props.post.likes.length > 0 &&\r\n                            <Typography \r\n                                variant='body1' \r\n                                component='p' \r\n                            >\r\n                                {props.post.likes.length}\r\n                            </Typography>\r\n                        }\r\n                    </div>\r\n                </IconButton>\r\n                <IconButton \r\n                    color='primary'\r\n                    onClick={() => setExpanded(!expanded)}\r\n                >\r\n                    <Icon \r\n                        path={_.find(props.post.comments, comment => comment.uniqueUserId === props.mainUser.uniqueUserId) ? mdiComment : mdiCommentOutline} \r\n                        size={1}\r\n                        title='Comment button' \r\n                        aria-label='Comment button' \r\n                    />\r\n                    <div>\r\n                        {props.post.comments.length > 0 &&\r\n                            <Typography \r\n                                variant='body1' \r\n                                component='p' \r\n                            >\r\n                                {props.post.comments.length}\r\n                            </Typography>\r\n                        }\r\n                    </div>\r\n                </IconButton>\r\n                <div>\r\n                    {props.post.uniqueUserId === props.mainUser.uniqueUserId && (props.post.type === 'text' || props.post.type === 'link') &&\r\n                        <IconButton \r\n                            color='primary' \r\n                            onClick={deletePost}\r\n                            disabled={deletingPost}\r\n                        >\r\n                            {deletingPost ? <CircularProgress color='primary' /> : <Icon path={mdiDelete} size={1} title='Post delete button' aria-label='Post delete button' />}\r\n                        </IconButton>\r\n                    }\r\n                    {props.post.uniqueUserId === props.mainUser.uniqueUserId && (props.post.type === 'photo' || props.post.type === 'video') &&\r\n                        <IconButton \r\n                        color='primary' \r\n                        onClick={deleteMediaPost}\r\n                        disabled={deletingPost}\r\n                        >\r\n                            {deletingPost ? <CircularProgress color='primary' /> : <Icon path={mdiDelete} size={1} title='Post delete button' aria-label='Post delete button' />}\r\n                        </IconButton>\r\n                    }\r\n                </div>\r\n                <IconButton \r\n                    style={{\r\n                        marginLeft: 'auto' \r\n                    }}\r\n                    onClick={() => setExpanded(!expanded)}\r\n                >\r\n                    <Icon \r\n                        path={expanded ? mdiChevronUp : mdiChevronDown} \r\n                        size={1}\r\n                        title={expanded ? 'Expand less' : 'Expand more'} \r\n                        aria-label={expanded ? 'Expand less' : 'Expand more'} \r\n                    />\r\n                </IconButton>\r\n            </CardActions>\r\n            <Collapse \r\n                in={expanded} \r\n            >\r\n                <Divider />\r\n                <CardContent>\r\n                    <ValidatorForm \r\n                        ref={formRef} \r\n                        onSubmit={e => e.preventDefault()} \r\n                    >\r\n                        <TextValidator \r\n                            label='Comment' \r\n                            placeholder='Add a comment...' \r\n                            variant='outlined' \r\n                            color='primary' \r\n                            helperText='Add a comment' \r\n                            value={comment} \r\n                            onChange={e => setComment(e.target.value)} \r\n                            validator={['notEmpty']}\r\n                            errorMessages={['You must enter some text to send a comment!']}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                            rows={4}\r\n                            multiline \r\n                            fullWidth \r\n                        />\r\n                        <Button \r\n                            color='primary' \r\n                            variant='outlined' \r\n                            startIcon={\r\n                                <Icon \r\n                                    path={mdiSend} \r\n                                    size={1} \r\n                                    title='Send icon' \r\n                                />\r\n                            }\r\n                            aria-label='Send comment button' \r\n                            disabled={commentSending}\r\n                            onClick={sendComment}\r\n                        >\r\n                            {commentSending ? <CircularProgress color='primary' /> : 'Send'}\r\n                        </Button>\r\n                    </ValidatorForm>\r\n                    <Divider />\r\n                    <div \r\n                        style={{\r\n                            marginTop: 10,\r\n                        }}\r\n                    >\r\n                        {props.post.comments.length > 0 &&\r\n                            <div>\r\n                                {props.post.comments.map((comment, index) => (\r\n                                    <div\r\n                                        key={index} \r\n                                    >\r\n                                        <ListItem \r\n                                            id={`${comment.uniqueCommentId}`}\r\n                                            alignItems='flex-start'\r\n                                        >\r\n                                            <ListItemAvatar>\r\n                                                <Avatar \r\n                                                    src={`http://192.168.0.9:3001/api/get/avatar/by/id/${comment.uniqueUserId}`}\r\n                                                    title={`${comment.username}`}\r\n                                                    alt={`${comment.username}`} \r\n                                                />\r\n                                            </ListItemAvatar>\r\n                                            <ListItemText \r\n                                                primary={\r\n                                                    <div>\r\n                                                        <Typography \r\n                                                            variant='h6' \r\n                                                            component='h6' \r\n                                                        >\r\n                                                            {comment.username}\r\n                                                        </Typography>\r\n                                                        <Typography \r\n                                                            variant='subtitle1' \r\n                                                            component='span' \r\n                                                            color='textSecondary'\r\n                                                        >\r\n                                                            {timeDifference(comment.utcTime, comment.dateString)}\r\n                                                        </Typography>\r\n                                                    </div>\r\n                                                }\r\n                                                secondary={\r\n                                                    <Typography \r\n                                                        variant='body2' \r\n                                                        component='p' \r\n                                                    >\r\n                                                        {comment.text}\r\n                                                    </Typography>\r\n                                                }\r\n                                            />\r\n                                            <div>\r\n                                                {(props.post.uniqueUserId === comment.uniqueUserId || comment.uniqueCommentId === props.mainUser.uniqueUserId) &&\r\n                                                    <IconButton \r\n                                                        color='primary'\r\n                                                        onClick={() => deleteComment(comment.uniqueCommentId)}\r\n                                                        disabled={commentDeleting}\r\n                                                    >\r\n                                                        {commentDeleting ? <CircularProgress color='primary' /> : <Icon path={mdiDelete} size={1} title='Delete comment button' aria-label='Delete comment button' />}\r\n                                                    </IconButton>\r\n                                                }\r\n                                            </div>\r\n                                            <div>\r\n                                                {props.mainUser !== null &&\r\n                                                    <IconButton \r\n                                                        color='primary' \r\n                                                        disabled={commentLiking}\r\n                                                        onClick={() => handleCommentLike(comment.uniqueCommentId, comment.uniqueUserId, comment.likes.includes(props.mainUser.uniqueUserId))}\r\n                                                    >\r\n                                                        {!comment.likes.includes(props.mainUser.uniqueUserId) ? <Icon path={mdiThumbUpOutline} size={1}  title='Comment like button' aria-label='Comment like button' /> : <Icon path={mdiThumbUp} size={1} title='Comment like button' aria-label='Comment like button' />}\r\n                                                        {comment.likes.length > 0 &&\r\n                                                            <Typography \r\n                                                                variant='body1' \r\n                                                                component='p' \r\n                                                            >\r\n                                                                {comment.likes.length}\r\n                                                            </Typography>\r\n                                                        }\r\n                                                    </IconButton>\r\n                                                }\r\n                                            </div>\r\n                                        </ListItem>\r\n                                        {index < props.post.comments.length - 1 &&\r\n                                            <Divider />\r\n                                        }\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                </CardContent>\r\n            </Collapse>\r\n        </Card>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        mainUser: state.userReducer.user,\r\n        posts: state.userPostsReducer.posts,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(UserPostsCard);"]},"metadata":{},"sourceType":"module"}