{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/simeonikudabo/Downloads/geocities/src/components/CommunityChat.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Avatar from '@material-ui/core/Avatar';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport swal from 'sweetalert';\nimport Divider from '@material-ui/core/Divider';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport io from 'socket.io-client';\nimport { connect } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport * as _ from 'underscore';\nconst useStyles = makeStyles(() => ({\n  listItem: {\n    maxWidth: 600,\n    margin: 'auto'\n  },\n  avatarLg: {\n    height: 168,\n    width: 168,\n    margin: 'auto'\n  }\n}));\n\nfunction CommunityChat(props) {\n  _s();\n\n  const classes = useStyles(); //Custom component classes. \n\n  const [community, setCommunity] = useState(null); //Variable and setter for the community we are in.\n\n  const socket = io('http://192.168.0.17:3001/'); //Socket that connects to the server IP. \n\n  const [msg, setMsg] = useState(''); //The message that could be sent to the server for another chat. \n\n  const params = useParams();\n  const history = useHistory();\n  useEffect(() => {\n    if (props.mainUser) {\n      return axios({\n        method: 'GET',\n        url: `http://192.168.0.17:3001/api/fetch/community/${params.communityName}`\n      }).then(response => {\n        let inCommunity = _.find(response.data.community.members, member => member.uniuqUserId === props.mainUser.uniuqUserId);\n\n        if (!response.data.community) {\n          swal('Uh Oh!', 'We could not find that communities chatroom!', 'error');\n          history.goBack(1);\n        } else if (_.find(response.data.community.blockList, person => person.uniqueUserId === props.mainUser.uniqueUserId)) {\n          swal('Uh Oh!', 'You are blocked from this community!', 'error');\n          history.goBack(1);\n        } else if (!inCommunity) {\n          console.log(response.data.community.members);\n          console.log(props.mainUser.uniqueUserId);\n          console.log(_.find(response.data.community.members, member => member.uniuqeUserId === props.mainUser.uniuqUserId));\n          swal('Uh Oh', 'You must be a member of this community to join the community chatroom', 'error');\n          history.goBack(1);\n        } else {\n          setCommunity(response.data.community); //Set the community in the local state variable to this community. \n\n          props.dispatch({\n            type: 'ThemeChange',\n            payload: response.data.community.communityTheme\n          }); //Change the theme to match the community theme.\n        }\n      }).catch(err => {\n        console.log(err.message);\n        swal('Uh Oh!', 'There was an error joining the chatroom!', 'error');\n        history.goBack(1);\n      });\n    } else {\n      swal('Uh Oh!', 'You must be logged in to join a chatroom!', 'error');\n      history.goBack(1);\n    }\n  }, []);\n\n  if (props.mainUser !== null && community !== null) {\n    return /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      style: {\n        marginTop: 100\n      },\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        style: {\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          variant: \"square\",\n          className: classes.avatarLg,\n          alt: `${community.name} avatar`,\n          title: `${community.name} avatar`,\n          src: `http://192.168.0.17:3001/api/get-photo/${community.avatar}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          component: \"small\",\n          align: \"center\",\n          style: {\n            fontWeight: 'bold',\n            textAlign: 'center',\n            margin: 'auto'\n          },\n          children: [community.chatRoom.community, \" chat\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Backdrop, {\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n        color: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this);\n  }\n}\n\n_s(CommunityChat, \"ZxFkMm0WXbR+iL1g2LLjD8sRw60=\", false, function () {\n  return [useStyles, useParams, useHistory];\n});\n\n_c = CommunityChat;\n\nfunction mapStateToProps(state) {\n  return {\n    mainUser: state.userReducer.user,\n    primary: state.userThemeReducer.primary\n  };\n}\n\nexport default connect(mapStateToProps)(CommunityChat);\n\nvar _c;\n\n$RefreshReg$(_c, \"CommunityChat\");","map":{"version":3,"sources":["/Users/simeonikudabo/Downloads/geocities/src/components/CommunityChat.js"],"names":["React","useState","useEffect","useRef","Grid","Typography","Paper","Avatar","Backdrop","CircularProgress","List","ListItem","ListItemAvatar","ListItemText","swal","Divider","TextField","Button","makeStyles","io","connect","useHistory","useParams","axios","_","useStyles","listItem","maxWidth","margin","avatarLg","height","width","CommunityChat","props","classes","community","setCommunity","socket","msg","setMsg","params","history","mainUser","method","url","communityName","then","response","inCommunity","find","data","members","member","uniuqUserId","goBack","blockList","person","uniqueUserId","console","log","uniuqeUserId","dispatch","type","payload","communityTheme","catch","err","message","marginTop","textAlign","name","avatar","fontWeight","chatRoom","mapStateToProps","state","userReducer","user","primary","userThemeReducer"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,EAAP,MAAe,kBAAf;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,kBAAtC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,CAAZ,MAAmB,YAAnB;AAEA,MAAMC,SAAS,GAAGP,UAAU,CAAC,OAAO;AAChCQ,EAAAA,QAAQ,EAAE;AACNC,IAAAA,QAAQ,EAAE,GADJ;AAENC,IAAAA,MAAM,EAAE;AAFF,GADsB;AAKhCC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,MAAM,EAAE,GADF;AAENC,IAAAA,KAAK,EAAE,GAFD;AAGNH,IAAAA,MAAM,EAAE;AAHF;AALsB,CAAP,CAAD,CAA5B;;AAYA,SAASI,aAAT,CAAuBC,KAAvB,EAA8B;AAAA;;AAC1B,QAAMC,OAAO,GAAGT,SAAS,EAAzB,CAD0B,CACG;;AAC7B,QAAM,CAACU,SAAD,EAAYC,YAAZ,IAA2BnC,QAAQ,CAAC,IAAD,CAAzC,CAF0B,CAEuB;;AACjD,QAAMoC,MAAM,GAAGlB,EAAE,CAAC,2BAAD,CAAjB,CAH0B,CAGsB;;AAChD,QAAM,CAACmB,GAAD,EAAMC,MAAN,IAAgBtC,QAAQ,CAAC,EAAD,CAA9B,CAJ0B,CAIU;;AACpC,QAAMuC,MAAM,GAAGlB,SAAS,EAAxB;AACA,QAAMmB,OAAO,GAAGpB,UAAU,EAA1B;AAEAnB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAG+B,KAAK,CAACS,QAAT,EAAmB;AACf,aAAOnB,KAAK,CAAC;AACToB,QAAAA,MAAM,EAAE,KADC;AAETC,QAAAA,GAAG,EAAG,gDAA+CJ,MAAM,CAACK,aAAc;AAFjE,OAAD,CAAL,CAGJC,IAHI,CAGCC,QAAQ,IAAI;AAChB,YAAIC,WAAW,GAAGxB,CAAC,CAACyB,IAAF,CAAOF,QAAQ,CAACG,IAAT,CAAcf,SAAd,CAAwBgB,OAA/B,EAAwCC,MAAM,IAAIA,MAAM,CAACC,WAAP,KAAuBpB,KAAK,CAACS,QAAN,CAAeW,WAAxF,CAAlB;;AACA,YAAG,CAACN,QAAQ,CAACG,IAAT,CAAcf,SAAlB,EAA6B;AACzBrB,UAAAA,IAAI,CACA,QADA,EAEA,8CAFA,EAGA,OAHA,CAAJ;AAKA2B,UAAAA,OAAO,CAACa,MAAR,CAAe,CAAf;AACH,SAPD,MAQK,IAAG9B,CAAC,CAACyB,IAAF,CAAOF,QAAQ,CAACG,IAAT,CAAcf,SAAd,CAAwBoB,SAA/B,EAA0CC,MAAM,IAAIA,MAAM,CAACC,YAAP,KAAwBxB,KAAK,CAACS,QAAN,CAAee,YAA3F,CAAH,EAA6G;AAC9G3C,UAAAA,IAAI,CACA,QADA,EAEA,sCAFA,EAGA,OAHA,CAAJ;AAKA2B,UAAAA,OAAO,CAACa,MAAR,CAAe,CAAf;AACH,SAPI,MAQA,IAAG,CAACN,WAAJ,EAAgB;AACjBU,UAAAA,OAAO,CAACC,GAAR,CAAYZ,QAAQ,CAACG,IAAT,CAAcf,SAAd,CAAwBgB,OAApC;AACAO,UAAAA,OAAO,CAACC,GAAR,CAAY1B,KAAK,CAACS,QAAN,CAAee,YAA3B;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAYnC,CAAC,CAACyB,IAAF,CAAOF,QAAQ,CAACG,IAAT,CAAcf,SAAd,CAAwBgB,OAA/B,EAAwCC,MAAM,IAAIA,MAAM,CAACQ,YAAP,KAAwB3B,KAAK,CAACS,QAAN,CAAeW,WAAzF,CAAZ;AACAvC,UAAAA,IAAI,CACA,OADA,EAEA,uEAFA,EAGA,OAHA,CAAJ;AAKA2B,UAAAA,OAAO,CAACa,MAAR,CAAe,CAAf;AACH,SAVI,MAWA;AACDlB,UAAAA,YAAY,CAACW,QAAQ,CAACG,IAAT,CAAcf,SAAf,CAAZ,CADC,CACsC;;AACvCF,UAAAA,KAAK,CAAC4B,QAAN,CAAe;AAACC,YAAAA,IAAI,EAAE,aAAP;AAAsBC,YAAAA,OAAO,EAAEhB,QAAQ,CAACG,IAAT,CAAcf,SAAd,CAAwB6B;AAAvD,WAAf,EAFC,CAEuF;AAC3F;AACJ,OApCM,EAoCJC,KApCI,CAoCEC,GAAG,IAAI;AACZR,QAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACC,OAAhB;AACArD,QAAAA,IAAI,CACA,QADA,EAEA,0CAFA,EAGA,OAHA,CAAJ;AAKA2B,QAAAA,OAAO,CAACa,MAAR,CAAe,CAAf;AACH,OA5CM,CAAP;AA6CH,KA9CD,MA+CK;AACDxC,MAAAA,IAAI,CACA,QADA,EAEA,2CAFA,EAGA,OAHA,CAAJ;AAKA2B,MAAAA,OAAO,CAACa,MAAR,CAAe,CAAf;AACH;AAEJ,GAzDQ,EAyDN,EAzDM,CAAT;;AA2DA,MAAGrB,KAAK,CAACS,QAAN,KAAmB,IAAnB,IAA2BP,SAAS,KAAK,IAA5C,EAAkD;AAC9C,wBACI,QAAC,IAAD;AACI,MAAA,SAAS,MADb;AAEI,MAAA,KAAK,EAAE;AACHiC,QAAAA,SAAS,EAAE;AADR,OAFX;AAAA,6BAMI,QAAC,IAAD;AACI,QAAA,IAAI,MADR;AAEI,QAAA,EAAE,EAAE,EAFR;AAGI,QAAA,KAAK,EAAE;AACHC,UAAAA,SAAS,EAAE;AADR,SAHX;AAAA,gCAOI,QAAC,MAAD;AACI,UAAA,OAAO,EAAC,QADZ;AAEI,UAAA,SAAS,EAAEnC,OAAO,CAACL,QAFvB;AAGI,UAAA,GAAG,EAAG,GAAEM,SAAS,CAACmC,IAAK,SAH3B;AAII,UAAA,KAAK,EAAG,GAAEnC,SAAS,CAACmC,IAAK,SAJ7B;AAKI,UAAA,GAAG,EAAG,0CAAyCnC,SAAS,CAACoC,MAAO;AALpE;AAAA;AAAA;AAAA;AAAA,gBAPJ,eAcI,QAAC,UAAD;AACI,UAAA,OAAO,EAAC,OADZ;AAEI,UAAA,SAAS,EAAC,OAFd;AAGI,UAAA,KAAK,EAAC,QAHV;AAII,UAAA,KAAK,EAAE;AACHC,YAAAA,UAAU,EAAE,MADT;AAEHH,YAAAA,SAAS,EAAE,QAFR;AAGHzC,YAAAA,MAAM,EAAE;AAHL,WAJX;AAAA,qBAUKO,SAAS,CAACsC,QAAV,CAAmBtC,SAVxB;AAAA;AAAA;AAAA;AAAA;AAAA,gBAdJ;AAAA;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,YADJ;AAoCH,GArCD,MAsCK;AACD,wBACI,QAAC,QAAD;AAAA,6BACI,QAAC,gBAAD;AACI,QAAA,KAAK,EAAC;AADV;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ;AAOH;AACJ;;GAlHQH,a;UACWP,S,EAIDH,S,EACCD,U;;;KANXW,a;;AAoHT,SAAS0C,eAAT,CAAyBC,KAAzB,EAAgC;AAC5B,SAAO;AACHjC,IAAAA,QAAQ,EAAEiC,KAAK,CAACC,WAAN,CAAkBC,IADzB;AAEHC,IAAAA,OAAO,EAAEH,KAAK,CAACI,gBAAN,CAAuBD;AAF7B,GAAP;AAIH;;AAED,eAAe1D,OAAO,CAACsD,eAAD,CAAP,CAAyB1C,aAAzB,CAAf","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Avatar from '@material-ui/core/Avatar';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport swal from 'sweetalert';\nimport Divider from '@material-ui/core/Divider';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport io from 'socket.io-client';\nimport { connect } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport * as _ from 'underscore';\n\nconst useStyles = makeStyles(() => ({\n    listItem: {\n        maxWidth: 600,\n        margin: 'auto',\n    },\n    avatarLg: {\n        height: 168,\n        width: 168,\n        margin: 'auto',\n    }\n}));\n\nfunction CommunityChat(props) {\n    const classes = useStyles(); //Custom component classes. \n    const [community, setCommunity]= useState(null); //Variable and setter for the community we are in.\n    const socket = io('http://192.168.0.17:3001/'); //Socket that connects to the server IP. \n    const [msg, setMsg] = useState(''); //The message that could be sent to the server for another chat. \n    const params = useParams();\n    const history = useHistory();\n\n    useEffect(() => {\n        if(props.mainUser) {\n            return axios({\n                method: 'GET',\n                url: `http://192.168.0.17:3001/api/fetch/community/${params.communityName}`,\n            }).then(response => {\n                let inCommunity = _.find(response.data.community.members, member => member.uniuqUserId === props.mainUser.uniuqUserId);\n                if(!response.data.community) {\n                    swal(\n                        'Uh Oh!',\n                        'We could not find that communities chatroom!',\n                        'error',\n                    );\n                    history.goBack(1);\n                }\n                else if(_.find(response.data.community.blockList, person => person.uniqueUserId === props.mainUser.uniqueUserId)) {\n                    swal(\n                        'Uh Oh!',\n                        'You are blocked from this community!',\n                        'error',\n                    );\n                    history.goBack(1);\n                }\n                else if(!inCommunity){\n                    console.log(response.data.community.members);\n                    console.log(props.mainUser.uniqueUserId);\n                    console.log(_.find(response.data.community.members, member => member.uniuqeUserId === props.mainUser.uniuqUserId));\n                    swal(\n                        'Uh Oh',\n                        'You must be a member of this community to join the community chatroom',\n                        'error',\n                    );\n                    history.goBack(1);\n                }\n                else {\n                    setCommunity(response.data.community); //Set the community in the local state variable to this community. \n                    props.dispatch({type: 'ThemeChange', payload: response.data.community.communityTheme}); //Change the theme to match the community theme.\n                }\n            }).catch(err => {\n                console.log(err.message);\n                swal(\n                    'Uh Oh!',\n                    'There was an error joining the chatroom!',\n                    'error',\n                );\n                history.goBack(1);\n            });\n        }\n        else {\n            swal(\n                'Uh Oh!',\n                'You must be logged in to join a chatroom!',\n                'error',\n            );\n            history.goBack(1);\n        }\n\n    }, []);\n\n    if(props.mainUser !== null && community !== null) {\n        return (\n            <Grid \n                container \n                style={{\n                    marginTop: 100,\n                }}\n            >\n                <Grid \n                    item \n                    xs={12} \n                    style={{\n                        textAlign: 'center',\n                    }}\n                >\n                    <Avatar \n                        variant='square'\n                        className={classes.avatarLg}\n                        alt={`${community.name} avatar`}\n                        title={`${community.name} avatar`}\n                        src={`http://192.168.0.17:3001/api/get-photo/${community.avatar}`}\n                    />\n                    <Typography \n                        variant='body1'\n                        component='small'\n                        align='center'\n                        style={{\n                            fontWeight: 'bold',\n                            textAlign: 'center',\n                            margin: 'auto',\n                        }}\n                    >\n                        {community.chatRoom.community} chat\n                    </Typography>\n                </Grid>\n            </Grid>\n        );\n    }\n    else {\n        return (\n            <Backdrop>\n                <CircularProgress \n                    color='primary'\n                />\n            </Backdrop>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        mainUser: state.userReducer.user,\n        primary: state.userThemeReducer.primary,\n    };\n}\n\nexport default connect(mapStateToProps)(CommunityChat);"]},"metadata":{},"sourceType":"module"}