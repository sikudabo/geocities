{"ast":null,"code":"'use strict';\n\nvar SOUNDCLOUD_API_URL = 'https://api.soundcloud.com';\nvar anchor;\nvar keys = 'protocol hostname host pathname port search hash href'.split(' ');\n\nfunction _parseURL(url) {\n  if (!anchor) {\n    anchor = document.createElement('a');\n  }\n\n  var result = {};\n  anchor.href = url || '';\n\n  for (var i = 0, len = keys.length; i < len; i++) {\n    var key = keys[i];\n    result[key] = anchor[key];\n  }\n\n  return result;\n}\n\nfunction _appendQueryParam(url, param, value) {\n  var U = _parseURL(url);\n\n  var regex = /\\?(?:.*)$/;\n  var chr = regex.test(U.search) ? '&' : '?';\n  var result = U.protocol + '//' + U.host + U.port + U.pathname + U.search + chr + param + '=' + value + U.hash;\n  return result;\n}\n\nfunction SoundCloud(clientId, apiUrl) {\n  if (!(this instanceof SoundCloud)) {\n    return new SoundCloud(clientId, apiUrl);\n  }\n\n  if (!clientId && !apiUrl) {\n    console.info('SoundCloud API requires clientId or custom apiUrl');\n  }\n\n  this._events = {};\n  this._clientId = clientId;\n  this._baseUrl = apiUrl || SOUNDCLOUD_API_URL;\n  this.playing = false;\n  this.duration = 0;\n  this.audio = document.createElement('audio');\n}\n\nSoundCloud.prototype.resolve = function (url, callback) {\n  var resolveUrl = this._baseUrl + '/resolve.json?url=' + encodeURIComponent(url);\n\n  if (this._clientId) {\n    resolveUrl = _appendQueryParam(resolveUrl, 'client_id', this._clientId);\n  }\n\n  this._json(resolveUrl, function (data) {\n    this.cleanData();\n\n    if (Array.isArray(data)) {\n      data = {\n        tracks: data\n      };\n    }\n\n    if (data.tracks) {\n      data.tracks = data.tracks.map(this._transformTrack.bind(this));\n      this._playlist = data;\n    } else {\n      this._track = this._transformTrack(data); // save timings\n\n      var U = _parseURL(url);\n\n      this._track.stream_url += U.hash;\n    }\n\n    this.duration = data.duration && !isNaN(data.duration) ? data.duration / 1000 // convert to seconds\n    : 0; // no duration is zero\n\n    callback(data);\n  }.bind(this));\n}; // deprecated\n\n\nSoundCloud.prototype._jsonp = function (url, callback) {\n  var target = document.getElementsByTagName('script')[0] || document.head;\n  var script = document.createElement('script');\n  var id = 'jsonp_callback_' + new Date().valueOf() + Math.floor(Math.random() * 1000);\n\n  window[id] = function (data) {\n    if (script.parentNode) {\n      script.parentNode.removeChild(script);\n    }\n\n    window[id] = function () {};\n\n    callback(data);\n  };\n\n  script.src = _appendQueryParam(url, 'callback', id);\n  target.parentNode.insertBefore(script, target);\n};\n\nSoundCloud.prototype._json = function (url, callback) {\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', url);\n\n  xhr.onreadystatechange = function () {\n    if (xhr.readyState === 4) {\n      if (xhr.status === 200) {\n        var resp = {};\n\n        try {\n          resp = JSON.parse(xhr.responseText);\n        } catch (err) {// fail silently\n        }\n\n        callback(resp);\n      }\n    }\n  };\n\n  xhr.send(null);\n};\n\nSoundCloud.prototype._transformTrack = function (track) {\n  if (this._baseUrl !== SOUNDCLOUD_API_URL) {\n    track.original_stream_url = track.stream_url;\n    track.stream_url = track.stream_url.replace(SOUNDCLOUD_API_URL, this._baseUrl);\n  }\n\n  return track;\n};\n\nSoundCloud.prototype.on = function (e, fn) {\n  this._events[e] = fn;\n  this.audio.addEventListener(e, fn, false);\n};\n\nSoundCloud.prototype.off = function (e, fn) {\n  this._events[e] = null;\n  this.audio.removeEventListener(e, fn);\n};\n\nSoundCloud.prototype.unbindAll = function () {\n  for (var e in this._events) {\n    var fn = this._events[e];\n\n    if (fn) {\n      this.off(e, fn);\n    }\n  }\n};\n\nSoundCloud.prototype.preload = function (streamUrl, preloadType) {\n  this._track = {\n    stream_url: streamUrl\n  };\n\n  if (preloadType) {\n    this.audio.preload = preloadType;\n  }\n\n  this.audio.src = this._clientId ? _appendQueryParam(streamUrl, 'client_id', this._clientId) : streamUrl;\n};\n\nSoundCloud.prototype.play = function (options) {\n  options = options || {};\n  var src;\n\n  if (options.streamUrl) {\n    src = options.streamUrl;\n  } else if (this._playlist) {\n    var length = this._playlist.tracks.length;\n\n    if (length) {\n      if (options.playlistIndex === undefined) {\n        this._playlistIndex = this._playlistIndex || 0;\n      } else {\n        this._playlistIndex = options.playlistIndex;\n      } // be silent if index is out of range\n\n\n      if (this._playlistIndex >= length || this._playlistIndex < 0) {\n        this._playlistIndex = 0;\n        return;\n      }\n\n      src = this._playlist.tracks[this._playlistIndex].stream_url;\n    }\n  } else if (this._track) {\n    src = this._track.stream_url;\n  }\n\n  if (!src) {\n    throw new Error('There is no tracks to play, use `streamUrl` option or `load` method');\n  }\n\n  if (this._clientId) {\n    src = _appendQueryParam(src, 'client_id', this._clientId);\n  }\n\n  if (src !== this.audio.src) {\n    this.audio.src = src;\n  }\n\n  this.playing = src;\n  return this.audio.play();\n};\n\nSoundCloud.prototype.pause = function () {\n  this.audio.pause();\n  this.playing = false;\n};\n\nSoundCloud.prototype.stop = function () {\n  this.audio.pause();\n  this.audio.currentTime = 0;\n  this.playing = false;\n};\n\nSoundCloud.prototype.next = function (options) {\n  options = options || {};\n  var tracksLength = this._playlist.tracks.length;\n\n  if (this._playlistIndex >= tracksLength - 1) {\n    if (options.loop) {\n      this._playlistIndex = -1;\n    } else {\n      return;\n    }\n  }\n\n  if (this._playlist && tracksLength) {\n    return this.play({\n      playlistIndex: ++this._playlistIndex\n    });\n  }\n};\n\nSoundCloud.prototype.previous = function () {\n  if (this._playlistIndex <= 0) {\n    return;\n  }\n\n  if (this._playlist && this._playlist.tracks.length) {\n    return this.play({\n      playlistIndex: --this._playlistIndex\n    });\n  }\n};\n\nSoundCloud.prototype.seek = function (e) {\n  if (!this.audio.readyState) {\n    return false;\n  }\n\n  var percent = e.offsetX / e.target.offsetWidth || (e.layerX - e.target.offsetLeft) / e.target.offsetWidth;\n  this.audio.currentTime = percent * (this.audio.duration || 0);\n};\n\nSoundCloud.prototype.cleanData = function () {\n  this._track = void 0;\n  this._playlist = void 0;\n};\n\nSoundCloud.prototype.setVolume = function (volumePercentage) {\n  if (!this.audio.readyState) {\n    return;\n  }\n\n  this.audio.volume = volumePercentage;\n};\n\nSoundCloud.prototype.setTime = function (seconds) {\n  if (!this.audio.readyState) {\n    return;\n  }\n\n  this.audio.currentTime = seconds;\n};\n\nmodule.exports = SoundCloud;","map":{"version":3,"sources":["c:/Users/bobma/Downloads/excite-app/node_modules/soundcloud-audio/index.js"],"names":["SOUNDCLOUD_API_URL","anchor","keys","split","_parseURL","url","document","createElement","result","href","i","len","length","key","_appendQueryParam","param","value","U","regex","chr","test","search","protocol","host","port","pathname","hash","SoundCloud","clientId","apiUrl","console","info","_events","_clientId","_baseUrl","playing","duration","audio","prototype","resolve","callback","resolveUrl","encodeURIComponent","_json","data","cleanData","Array","isArray","tracks","map","_transformTrack","bind","_playlist","_track","stream_url","isNaN","_jsonp","target","getElementsByTagName","head","script","id","Date","valueOf","Math","floor","random","window","parentNode","removeChild","src","insertBefore","xhr","XMLHttpRequest","open","onreadystatechange","readyState","status","resp","JSON","parse","responseText","err","send","track","original_stream_url","replace","on","e","fn","addEventListener","off","removeEventListener","unbindAll","preload","streamUrl","preloadType","play","options","playlistIndex","undefined","_playlistIndex","Error","pause","stop","currentTime","next","tracksLength","loop","previous","seek","percent","offsetX","offsetWidth","layerX","offsetLeft","setVolume","volumePercentage","volume","setTime","seconds","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar SOUNDCLOUD_API_URL = 'https://api.soundcloud.com';\n\nvar anchor;\nvar keys = 'protocol hostname host pathname port search hash href'.split(' ');\nfunction _parseURL(url) {\n  if (!anchor) {\n    anchor = document.createElement('a');\n  }\n\n  var result = {};\n\n  anchor.href = url || '';\n\n  for (var i = 0, len = keys.length; i < len; i++) {\n    var key = keys[i];\n    result[key] = anchor[key];\n  }\n\n  return result;\n}\n\nfunction _appendQueryParam(url, param, value) {\n  var U = _parseURL(url);\n  var regex = /\\?(?:.*)$/;\n  var chr = regex.test(U.search) ? '&' : '?';\n  var result =\n    U.protocol +\n    '//' +\n    U.host +\n    U.port +\n    U.pathname +\n    U.search +\n    chr +\n    param +\n    '=' +\n    value +\n    U.hash;\n\n  return result;\n}\n\nfunction SoundCloud(clientId, apiUrl) {\n  if (!(this instanceof SoundCloud)) {\n    return new SoundCloud(clientId, apiUrl);\n  }\n\n  if (!clientId && !apiUrl) {\n    console.info('SoundCloud API requires clientId or custom apiUrl');\n  }\n\n  this._events = {};\n\n  this._clientId = clientId;\n  this._baseUrl = apiUrl || SOUNDCLOUD_API_URL;\n\n  this.playing = false;\n  this.duration = 0;\n\n  this.audio = document.createElement('audio');\n}\n\nSoundCloud.prototype.resolve = function(url, callback) {\n  var resolveUrl =\n    this._baseUrl + '/resolve.json?url=' + encodeURIComponent(url);\n\n  if (this._clientId) {\n    resolveUrl = _appendQueryParam(resolveUrl, 'client_id', this._clientId);\n  }\n\n  this._json(\n    resolveUrl,\n    function(data) {\n      this.cleanData();\n\n      if (Array.isArray(data)) {\n        data = { tracks: data };\n      }\n\n      if (data.tracks) {\n        data.tracks = data.tracks.map(this._transformTrack.bind(this));\n        this._playlist = data;\n      } else {\n        this._track = this._transformTrack(data);\n\n        // save timings\n        var U = _parseURL(url);\n        this._track.stream_url += U.hash;\n      }\n\n      this.duration =\n        data.duration && !isNaN(data.duration)\n          ? data.duration / 1000 // convert to seconds\n          : 0; // no duration is zero\n\n      callback(data);\n    }.bind(this)\n  );\n};\n\n// deprecated\nSoundCloud.prototype._jsonp = function(url, callback) {\n  var target = document.getElementsByTagName('script')[0] || document.head;\n  var script = document.createElement('script');\n  var id =\n    'jsonp_callback_' + new Date().valueOf() + Math.floor(Math.random() * 1000);\n\n  window[id] = function(data) {\n    if (script.parentNode) {\n      script.parentNode.removeChild(script);\n    }\n    window[id] = function() {};\n    callback(data);\n  };\n\n  script.src = _appendQueryParam(url, 'callback', id);\n  target.parentNode.insertBefore(script, target);\n};\n\nSoundCloud.prototype._json = function(url, callback) {\n  var xhr = new XMLHttpRequest();\n\n  xhr.open('GET', url);\n  xhr.onreadystatechange = function() {\n    if (xhr.readyState === 4) {\n      if (xhr.status === 200) {\n        var resp = {};\n        try {\n          resp = JSON.parse(xhr.responseText);\n        } catch (err) {\n          // fail silently\n        }\n        callback(resp);\n      }\n    }\n  };\n\n  xhr.send(null);\n};\n\nSoundCloud.prototype._transformTrack = function(track) {\n  if (this._baseUrl !== SOUNDCLOUD_API_URL) {\n    track.original_stream_url = track.stream_url;\n    track.stream_url = track.stream_url.replace(\n      SOUNDCLOUD_API_URL,\n      this._baseUrl\n    );\n  }\n\n  return track;\n};\n\nSoundCloud.prototype.on = function(e, fn) {\n  this._events[e] = fn;\n  this.audio.addEventListener(e, fn, false);\n};\n\nSoundCloud.prototype.off = function(e, fn) {\n  this._events[e] = null;\n  this.audio.removeEventListener(e, fn);\n};\n\nSoundCloud.prototype.unbindAll = function() {\n  for (var e in this._events) {\n    var fn = this._events[e];\n    if (fn) {\n      this.off(e, fn);\n    }\n  }\n};\n\nSoundCloud.prototype.preload = function(streamUrl, preloadType) {\n  this._track = { stream_url: streamUrl };\n\n  if (preloadType) {\n    this.audio.preload = preloadType;\n  }\n\n  this.audio.src = this._clientId\n    ? _appendQueryParam(streamUrl, 'client_id', this._clientId)\n    : streamUrl;\n};\n\nSoundCloud.prototype.play = function(options) {\n  options = options || {};\n  var src;\n\n  if (options.streamUrl) {\n    src = options.streamUrl;\n  } else if (this._playlist) {\n    var length = this._playlist.tracks.length;\n\n    if (length) {\n      if (options.playlistIndex === undefined) {\n        this._playlistIndex = this._playlistIndex || 0;\n      } else {\n        this._playlistIndex = options.playlistIndex;\n      }\n\n      // be silent if index is out of range\n      if (this._playlistIndex >= length || this._playlistIndex < 0) {\n        this._playlistIndex = 0;\n        return;\n      }\n\n      src = this._playlist.tracks[this._playlistIndex].stream_url;\n    }\n  } else if (this._track) {\n    src = this._track.stream_url;\n  }\n\n  if (!src) {\n    throw new Error(\n      'There is no tracks to play, use `streamUrl` option or `load` method'\n    );\n  }\n\n  if (this._clientId) {\n    src = _appendQueryParam(src, 'client_id', this._clientId);\n  }\n\n  if (src !== this.audio.src) {\n    this.audio.src = src;\n  }\n\n  this.playing = src;\n\n  return this.audio.play();\n};\n\nSoundCloud.prototype.pause = function() {\n  this.audio.pause();\n  this.playing = false;\n};\n\nSoundCloud.prototype.stop = function() {\n  this.audio.pause();\n  this.audio.currentTime = 0;\n  this.playing = false;\n};\n\nSoundCloud.prototype.next = function(options) {\n  options = options || {};\n  var tracksLength = this._playlist.tracks.length;\n\n  if (this._playlistIndex >= tracksLength - 1) {\n    if (options.loop) {\n      this._playlistIndex = -1;\n    } else {\n      return;\n    }\n  }\n\n  if (this._playlist && tracksLength) {\n    return this.play({ playlistIndex: ++this._playlistIndex });\n  }\n};\n\nSoundCloud.prototype.previous = function() {\n  if (this._playlistIndex <= 0) {\n    return;\n  }\n\n  if (this._playlist && this._playlist.tracks.length) {\n    return this.play({ playlistIndex: --this._playlistIndex });\n  }\n};\n\nSoundCloud.prototype.seek = function(e) {\n  if (!this.audio.readyState) {\n    return false;\n  }\n\n  var percent =\n    e.offsetX / e.target.offsetWidth ||\n    (e.layerX - e.target.offsetLeft) / e.target.offsetWidth;\n\n  this.audio.currentTime = percent * (this.audio.duration || 0);\n};\n\nSoundCloud.prototype.cleanData = function() {\n  this._track = void 0;\n  this._playlist = void 0;\n};\n\nSoundCloud.prototype.setVolume = function(volumePercentage) {\n  if (!this.audio.readyState) {\n    return;\n  }\n\n  this.audio.volume = volumePercentage;\n};\n\nSoundCloud.prototype.setTime = function(seconds) {\n  if (!this.audio.readyState) {\n    return;\n  }\n\n  this.audio.currentTime = seconds;\n};\n\nmodule.exports = SoundCloud;\n"]},"metadata":{},"sourceType":"script"}