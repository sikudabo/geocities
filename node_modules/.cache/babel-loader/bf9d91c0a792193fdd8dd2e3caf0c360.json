{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/simeonikudabo/Downloads/geocities/src/components/EventComponent.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport Collapse from '@material-ui/core/Collapse';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Icon from '@mdi/react';\nimport { mdiThumbUp, mdiThumbUpOutline, mdiChevronDown, mdiChevronUp, mdiDelete, mdiUsers, mdiAccountGroupOutline as GroupOutline } from '@mdi/js';\nimport { makeStyles } from '@material-ui/core/styles';\nimport axios from 'axios';\nimport * as _ from 'underscore';\nimport { connect } from 'react-redux';\nimport swal from 'sweetalert';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { useHistory } from 'react-router-dom';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nconst useStyles = makeStyles(theme => ({\n  card: {\n    maxWidth: 600,\n    margin: 'auto',\n    padding: theme.spacing(2),\n    backgroundColor: theme.palette.background.paper\n  },\n  media: {\n    height: 0,\n    padding: '56.25%'\n  },\n  image: {\n    maxWidth: '100%',\n    maxHeight: '100%'\n  }\n}));\n\nfunction EventComponent(props) {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n  const [collapse, setCollapse] = useState(false);\n  const [btnUnlike, setBtnUnlike] = useState(false); //Variable and setter for disabling a Button when we interact with the server.\n\n  const [btnAttending, setBtnAttending] = useState(false);\n  useEffect(() => {\n    //First, if the user is logged in, update the state primary color. \n    if (props.user !== null) {\n      props.dispatch({\n        type: 'ThemeChange',\n        payload: props.user.profileTheme\n      });\n    }\n  }, []);\n\n  function unLikeEvent() {\n    //This function will be responsible for unliking an event.\n    setBtnUnlike(true);\n    let data = JSON.stringify({\n      uniqueEventId: props.event.uniqueEventId,\n      uniqueUserId: props.user.uniqueUserId\n    });\n    return axios({\n      method: 'POST',\n      url: 'http://192.168.0.17:3001/api/unlike/event',\n      data: data,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      swal('Great!', 'You successfully unliked that post!', 'success');\n      props.setEvents([...response.data.events]);\n      setBtnUnlike(false);\n    }).catch(err => {\n      console.log(err.message);\n      swal('Uh Oh!', 'There was an error unliking that event! Pleaase try again', 'error');\n      setBtnUnlike(false);\n    });\n  }\n\n  function likeEvent() {\n    //This function will handle liking a post. \n    setBtnUnlike(true);\n    let data = JSON.stringify({\n      uniqueUserId: props.user.uniqueUserId,\n      username: props.user.username,\n      uniqueEventId: props.event.uniqueEventId\n    });\n    return axios({\n      method: 'POST',\n      url: 'http://192.168.0.17:3001/api/like/event',\n      data: data,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      swal('Great!', 'You successfully liked that event!', 'success');\n      setBtnUnlike(false);\n      props.setEvents([...response.data.events]);\n    }).catch(err => {\n      console.log(err.message);\n      swal('Uh Oh!', 'There was an error with liking that post!', 'error');\n      setBtnUnlike(false);\n    });\n  }\n\n  function attendEvent() {\n    //This function will enable a user to attend an event. \n    setBtnAttending(true);\n    let data = JSON.stringify({\n      uniqueUserId: props.user.uniqueUserId,\n      username: props.user.username,\n      uniqueEventId: props.event.uniqueEventId\n    });\n    return axios({\n      method: 'POST',\n      url: 'http://192.168.0.17:3001/api/attend/event',\n      data: data,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      swal('Great!', 'You are now attending that event!', 'success');\n      setBtnAttending(false);\n      props.setEvents([...response.data.events]);\n    }).catch(err => {\n      console.log(err.message);\n      swal('Uh Oh!', 'There was an error attending that event! Please try again.', 'error');\n      setBtnAttending(false);\n    });\n  }\n\n  function unAttendEvent() {\n    //This function will enable a user to unAttend an event. \n    setBtnAttending(true);\n    let data = JSON.stringify({\n      uniqueEventId: props.event.uniqueEventId,\n      uniqueUserId: props.user.uniqueUserId\n    });\n    return axios({\n      method: 'POST',\n      url: 'http://192.168.0.17:3001/api/unattend/event',\n      data: data,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      swal('Great!', 'You successfully unattended that event!', 'success');\n      props.setEvents([...response.data.events]);\n      setBtnAttending(false);\n    }).catch(err => {\n      console.log(err.message);\n      swal('Uh Oh!', 'There was an error unattending that event!', 'error');\n      setBtnAttending(false);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: classes.card,\n    id: `${props.event.uniqueEventId}`,\n    style: {\n      marginBottom: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      title: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        component: \"h6\",\n        children: props.event.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }, this),\n      avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n        src: `http://192.168.0.17:3001/api/get/avatar/by/id/${props.event.uniqueUserId}`,\n        alt: `${props.event.username}`,\n        title: `${props.event.username}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: true && /*#__PURE__*/_jsxDEV(CardMedia, {\n        component: \"img\",\n        src: `http://192.168.0.17:3001/api/get-photo/${props.event.src}`,\n        title: `Post by ${props.event.username}`,\n        alt: \"GeoCities\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        component: \"h6\",\n        align: \"left\",\n        children: props.event.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle1\",\n        component: \"span\",\n        align: \"left\",\n        children: [\"When: \", props.event.dateString, \" at \", props.event.timeString]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        component: \"p\",\n        align: \"left\",\n        style: {\n          marginTop: 30\n        },\n        children: props.event.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }, this), props.user !== null && /*#__PURE__*/_jsxDEV(CardActions, {\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        disabled: btnUnlike,\n        onClick: _.find(props.event.likes, like => like.uniqueUserId === props.user.uniqueUserId) ? unLikeEvent : likeEvent,\n        children: [btnUnlike ? /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 38\n        }, this) : /*#__PURE__*/_jsxDEV(Icon, {\n          path: _.find(props.event.likes, like => like.uniqueUserId === props.user.uniqueUserId) ? mdiThumbUp : mdiThumbUpOutline,\n          size: 1,\n          title: \"Like or unlike event\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 29\n        }, this), props.event.likes.length > 0 && /*#__PURE__*/_jsxDEV(\"small\", {\n          children: props.event.likes.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          path: GroupOutline,\n          size: 1,\n          title: \"How many attending\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 25\n        }, this), props.event.attending.length, \" attending\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        color: \"primary\",\n        onClick: _.find(props.event.attending, attender => attender.uniqueUserId === props.user.uniqueUserId) ? unAttendEvent : attendEvent,\n        disabled: btnAttending,\n        children: props.user.uniqueUserId !== props.event.uniqueUserId && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: _.find(props.event.attending, attender => attender.uniqueUserId === props.user.uniqueUserId) ? 'unattend' : 'attend'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 21\n      }, this), props.user.uniqueUserId === props.event.uniqueUserId && /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        children: /*#__PURE__*/_jsxDEV(Icon, {\n          path: mdiDelete,\n          size: 1,\n          title: \"Delete event\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 9\n  }, this);\n}\n\n_s(EventComponent, \"aZBOZHq2ZkUnoThfvW9WzPU0ekA=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = EventComponent;\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.userReducer.user,\n    primary: state.themeReducer.theme\n  };\n}\n\nexport default connect(mapStateToProps)(EventComponent);\n\nvar _c;\n\n$RefreshReg$(_c, \"EventComponent\");","map":{"version":3,"sources":["/Users/simeonikudabo/Downloads/geocities/src/components/EventComponent.js"],"names":["React","useState","useEffect","Card","CardHeader","CardMedia","CardContent","CardActions","Avatar","Typography","Collapse","Button","IconButton","Icon","mdiThumbUp","mdiThumbUpOutline","mdiChevronDown","mdiChevronUp","mdiDelete","mdiUsers","mdiAccountGroupOutline","GroupOutline","makeStyles","axios","_","connect","swal","List","ListItem","ListItemAvatar","ListItemText","useHistory","CircularProgress","useStyles","theme","card","maxWidth","margin","padding","spacing","backgroundColor","palette","background","paper","media","height","image","maxHeight","EventComponent","props","classes","history","collapse","setCollapse","btnUnlike","setBtnUnlike","btnAttending","setBtnAttending","user","dispatch","type","payload","profileTheme","unLikeEvent","data","JSON","stringify","uniqueEventId","event","uniqueUserId","method","url","headers","then","response","setEvents","events","catch","err","console","log","message","likeEvent","username","attendEvent","unAttendEvent","marginBottom","src","title","dateString","timeString","marginTop","description","find","likes","like","length","attending","attender","mapStateToProps","state","userReducer","primary","themeReducer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport Collapse from '@material-ui/core/Collapse';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Icon from '@mdi/react';\nimport { mdiThumbUp, mdiThumbUpOutline, mdiChevronDown, mdiChevronUp, mdiDelete, mdiUsers, mdiAccountGroupOutline as GroupOutline } from '@mdi/js';\nimport { makeStyles } from '@material-ui/core/styles';\nimport axios from 'axios';\nimport * as _ from 'underscore';\nimport { connect } from 'react-redux';\nimport swal from 'sweetalert';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { useHistory } from 'react-router-dom';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst useStyles = makeStyles((theme) => ({\n    card: {\n        maxWidth: 600,\n        margin: 'auto',\n        padding: theme.spacing(2),\n        backgroundColor: theme.palette.background.paper,\n    },\n    media: {\n        height: 0,\n        padding: '56.25%',\n    },\n    image: {\n        maxWidth: '100%',\n        maxHeight: '100%',\n    },\n}));\n\nfunction EventComponent(props) {\n    const classes = useStyles();\n    const history = useHistory();\n    const [collapse, setCollapse] = useState(false);\n    const [btnUnlike, setBtnUnlike] = useState(false); //Variable and setter for disabling a Button when we interact with the server.\n    const [btnAttending, setBtnAttending] = useState(false);\n\n    useEffect(() => {\n        //First, if the user is logged in, update the state primary color. \n        if(props.user !== null) {\n            props.dispatch({type: 'ThemeChange', payload: props.user.profileTheme});\n        }\n    }, []);\n\n    function unLikeEvent() {\n        //This function will be responsible for unliking an event.\n        setBtnUnlike(true);\n    \n        let data = JSON.stringify({\n            uniqueEventId: props.event.uniqueEventId,\n            uniqueUserId: props.user.uniqueUserId,\n        });\n    \n        return axios({\n            method: 'POST',\n            url: 'http://192.168.0.17:3001/api/unlike/event',\n            data: data,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        }).then(response => {\n            swal(\n                'Great!',\n                'You successfully unliked that post!',\n                'success',\n            );\n            props.setEvents([...response.data.events]);\n            setBtnUnlike(false);\n        }).catch(err => {\n            console.log(err.message);\n            swal(\n                'Uh Oh!',\n                'There was an error unliking that event! Pleaase try again',\n                'error',\n            );\n            setBtnUnlike(false);\n        });\n    }\n\n    function likeEvent() {\n        //This function will handle liking a post. \n        setBtnUnlike(true);\n\n        let data = JSON.stringify({\n            uniqueUserId: props.user.uniqueUserId,\n            username: props.user.username,\n            uniqueEventId: props.event.uniqueEventId,\n        });\n\n        return axios({\n            method: 'POST',\n            url: 'http://192.168.0.17:3001/api/like/event',\n            data: data,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        }).then(response => {\n            swal(\n                'Great!',\n                'You successfully liked that event!',\n                'success',\n            );\n            setBtnUnlike(false);\n            props.setEvents([...response.data.events]);\n        }).catch(err => {\n            console.log(err.message);\n            swal(\n                'Uh Oh!',\n                'There was an error with liking that post!',\n                'error',\n            );\n            setBtnUnlike(false);\n        });\n    }\n\n    function attendEvent() {\n        //This function will enable a user to attend an event. \n        setBtnAttending(true);\n\n        let data = JSON.stringify({\n            uniqueUserId: props.user.uniqueUserId,\n            username: props.user.username,\n            uniqueEventId: props.event.uniqueEventId,\n        });\n\n        return axios({\n            method: 'POST',\n            url: 'http://192.168.0.17:3001/api/attend/event',\n            data: data,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        }).then(response => {\n            swal(\n                'Great!',\n                'You are now attending that event!',\n                'success',\n            );\n            setBtnAttending(false);\n            props.setEvents([...response.data.events]);\n        }).catch(err => {\n            console.log(err.message);\n            swal(\n                'Uh Oh!',\n                'There was an error attending that event! Please try again.',\n                'error',\n            );\n            setBtnAttending(false);\n        });\n    }\n\n    function unAttendEvent() {\n        //This function will enable a user to unAttend an event. \n        setBtnAttending(true); \n\n        let data = JSON.stringify({\n            uniqueEventId: props.event.uniqueEventId,\n            uniqueUserId: props.user.uniqueUserId,\n        });\n\n        return axios({\n            method: 'POST',\n            url:'http://192.168.0.17:3001/api/unattend/event',\n            data: data,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        }).then(response => {\n            swal(\n                'Great!',\n                'You successfully unattended that event!',\n                'success',\n            );\n            props.setEvents([...response.data.events]);\n            setBtnAttending(false);\n        }).catch(err => {\n            console.log(err.message);\n            swal(\n                'Uh Oh!',\n                'There was an error unattending that event!',\n                'error',\n            );\n            setBtnAttending(false);\n        });\n    }\n\n    return (\n        <Card \n            className={classes.card} \n            id={`${props.event.uniqueEventId}`}\n            style={{\n                marginBottom: 20,\n            }}\n        >\n            <CardHeader \n                title={\n                    <Typography \n                        variant='h6' \n                        component='h6' \n                    >\n                        {props.event.username}\n                    </Typography>\n                }\n                avatar={\n                    <Avatar \n                        src={`http://192.168.0.17:3001/api/get/avatar/by/id/${props.event.uniqueUserId}`}\n                        alt={`${props.event.username}`}\n                        title={`${props.event.username}`} \n                    />\n                }\n            />\n             <div>\n                {true &&\n                    <CardMedia \n                        component='img'\n                        src={`http://192.168.0.17:3001/api/get-photo/${props.event.src}`}\n                        title={`Post by ${props.event.username}`}\n                        alt='GeoCities'\n                    />\n                }\n            </div>\n            <CardContent>\n                <Typography \n                    variant='h6' \n                    component='h6' \n                    align='left' \n                >\n                    {props.event.title} \n                </Typography>\n                <br />\n                <Typography \n                    variant='subtitle1' \n                    component='span' \n                    align='left'\n                >\n                    When: {props.event.dateString} at {props.event.timeString}\n                </Typography>\n                <br />\n                <Typography \n                    variant='body1' \n                    component='p' \n                    align='left' \n                    style={{\n                        marginTop: 30,\n                    }}\n                >\n                    {props.event.description} \n                </Typography>\n            </CardContent>\n            {props.user !== null &&\n                <CardActions>\n                    <IconButton  \n                        color='primary'\n                        disabled={btnUnlike}\n                        onClick={_.find(props.event.likes, like => like.uniqueUserId === props.user.uniqueUserId) ? unLikeEvent : likeEvent}\n                    >\n        \n                        {btnUnlike ? <CircularProgress /> : (\n                            <Icon\n                                path={_.find(props.event.likes, like => like.uniqueUserId === props.user.uniqueUserId) ? mdiThumbUp : mdiThumbUpOutline}\n                                size={1} \n                                title='Like or unlike event'\n                            />\n                        )}\n                        {props.event.likes.length > 0 &&\n                            <small>\n                                {props.event.likes.length} \n                            </small>\n                        }\n                    </IconButton>\n                    <IconButton \n                        color='primary' \n                    >\n                        <Icon \n                            path={GroupOutline} \n                            size={1}\n                            title='How many attending' \n                        />\n                        {props.event.attending.length} attending \n                    </IconButton>\n                    <Button \n                        color='primary' \n                        onClick={_.find(props.event.attending, attender => attender.uniqueUserId === props.user.uniqueUserId) ? unAttendEvent : attendEvent}\n                        disabled={btnAttending}\n                    >\n                        {props.user.uniqueUserId !== props.event.uniqueUserId &&\n                            <div>\n                                {_.find(props.event.attending, attender => attender.uniqueUserId === props.user.uniqueUserId) ? 'unattend' : 'attend'}\n                            </div>\n                        }\n                    </Button>\n                    {props.user.uniqueUserId === props.event.uniqueUserId &&\n                        <IconButton \n                            color='primary' \n                        >\n                            <Icon \n                                path={mdiDelete} \n                                size={1} \n                                title='Delete event' \n                            />\n                        </IconButton>\n                    }\n                </CardActions>\n            }\n        </Card>\n    );\n}\n\nfunction mapStateToProps(state) {\n    return {\n        user: state.userReducer.user,\n        primary: state.themeReducer.theme,\n    };\n}\n\nexport default connect(mapStateToProps)(EventComponent);"]},"metadata":{},"sourceType":"module"}