{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"c:\\\\Users\\\\bobma\\\\Downloads\\\\excite-app\\\\src\\\\components\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Box from '@material-ui/core/Box';\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport GeoCitiesIcon from \"../site-icons/geoicon.svg\"; //Within the styles rgb(0, 20, 60) fits the logo design for blue and rgb(0, 73, 0) for green\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center',\n    padding: theme.spacing(2)\n  },\n  card: {\n    maxWidth: 450,\n    margin: 'auto'\n  },\n  signUpBtn: {\n    backgroundColor: 'rgb(255, 255, 255)',\n    color: 'rgb(0, 32, 91)',\n    marginLeft: 'auto'\n  },\n  geoPrimary: {\n    color: 'rgb(0, 20, 60)'\n  },\n  geoSecondary: {\n    color: 'rgb(0, 73, 0)'\n  },\n  logoImg: {\n    width: '100%',\n    height: '100%'\n  }\n}));\nexport default function Login(props) {\n  _s();\n\n  const classes = useStyles();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [open, setOpen] = useState(false);\n  const formRef = useRef(null);\n  const regularExpressions = {\n    usernameExpression: /^\\w+$/,\n    alphaStartRe: /^[A-Za-z]+$/\n  };\n  useEffect(() => {\n    //The validation rule below ensures a username and password have at least 6 characters.\n    ValidatorForm.addValidationRule('enoughCharacters', value => {\n      if (value.length < 6) {\n        return false;\n      } else {\n        return true;\n      }\n    }); //The validation rule below ensures that a username only containers letters, numbers and underscores.\n\n    ValidatorForm.addValidationRule('usernameRe', value => {\n      if (!regularExpressions.usernameExpression.test(value)) {\n        return false;\n      } else {\n        return true;\n      }\n    });\n    ValidatorForm.addValidationRule('alphaStartRe', value => {\n      if (!regularExpressions.alphaStartRe.test(value.charAt(0))) {\n        return false;\n      } else {\n        return true;\n      }\n    });\n  }, []);\n\n  function handleUsernameChange(e) {\n    setUsername(e.target.value);\n  }\n\n  function handlePasswordChange(e) {\n    setPassword(e.target.value);\n  }\n\n  function enterPress(e) {\n    /*This function will handle an \"enter\" key press. If the user presses enter \r\n    while they are in the password TextField box, they will trigger the \r\n    sendLoginData function \r\n    */\n    if (e.charCode === 13) {\n      sendLoginData();\n    }\n  }\n\n  function preventSpace(e) {\n    //This function will prevent spaces when the user enters a username.\n    //It is triggered with an onKeyDown event.\n    if (e.keyCode === 32) {\n      e.preventDefault();\n      return;\n    }\n  }\n\n  async function sendLoginData() {\n    //This function will handle sending the login data to the server with axios \n    let isValid = await formRef.current.isFormValid();\n\n    if (!isValid) {\n      swal('Uh oh', 'Make sure you filled out the log in form properly!', 'error');\n      return false;\n    }\n\n    if (username.length < 6) {\n      swal('Uh oh!', 'Username must be at least 6 characters long!', 'error');\n      setOpen(false);\n      return;\n    } else if (password.length < 6) {\n      swal('Uh oh!', 'Password must be at least 6 characters long!', 'error');\n      setOpen(false);\n      return;\n    } else {\n      let data = JSON.stringify({\n        username: username,\n        password: password\n      });\n      return axios({\n        method: 'post',\n        data: data,\n        url: 'http://192.168.0.9:3001/api/login',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        if (response.data === 'success') {\n          setOpen(false);\n          swal('Great!', 'Successfully logged in', 'success');\n        } else if (response.data === 'user not found') {\n          setOpen(false);\n          swal('Uh oh!', 'We could not find that username! Please try again. If you forgot your username, press the \"FORGOT USERNAME OR PASSWORD\" button below.', 'error');\n        } else if (response.data === 'invalid password') {\n          setOpen(false);\n          swal('Uh oh!', 'That password was invalid. Please try again. If you forgot your password, press the \"FORGOT USERNAME OR PASSWORD\" button below.', 'error');\n        }\n      }).catch(err => {\n        setOpen(false);\n        console.log(err.message);\n        swal('Uh oh!', 'There was an error logging you in. Please try again!', 'error');\n      });\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(Backdrop, {\n      open: open,\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        children: [\"mb=\", 10, /*#__PURE__*/_jsxDEV(CircularProgress, {\n          color: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        mt: 2,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          color: \"textSecondary\",\n          component: \"p\",\n          children: \"Logging in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: classes.card,\n      hidden: open,\n      children: [/*#__PURE__*/_jsxDEV(CardContent, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          mb: 4,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"h6\",\n            children: [\"Welcome to \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: classes.geoPrimary,\n              children: \"Geo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 40\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: classes.geoSecondary,\n              children: \"Cities\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 87\n            }, this), \"!\", /*#__PURE__*/_jsxDEV(SvgIcon, {\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M 11.617188 8.546875 C 11.261719 8.625 10.957031 8.828125 10.792969 9.101562 C 10.691406 9.261719 10.691406 9.269531 10.691406 9.527344 C 10.691406 9.792969 10.691406 9.792969 10.796875 9.960938 C 11.070312 10.394531 11.644531 10.617188 12.242188 10.519531 C 12.75 10.433594 13.160156 10.082031 13.238281 9.667969 C 13.328125 9.171875 12.929688 8.691406 12.320312 8.550781 C 12.144531 8.511719 11.792969 8.507812 11.617188 8.546875 Z M 11.617188 8.546875 \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            component: \"span\",\n            children: \"Log in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(ValidatorForm, {\n            ref: formRef,\n            onSubmit: e => e.preventDefault(),\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              mb: 3,\n              children: /*#__PURE__*/_jsxDEV(TextValidator, {\n                variant: \"outlined\",\n                label: \"Username\",\n                placeholder: \"Username\",\n                color: \"primary\",\n                value: username,\n                onChange: handleUsernameChange,\n                onKeyDown: preventSpace,\n                type: \"username\",\n                helperText: \"Username must be at least 6 characters\",\n                validators: ['enoughCharacters', 'usernameRe', 'alphaStartRe', 'required'],\n                errorMessages: ['Username must be at least 6 characters', 'Username can only contain letters, numbers and underscores', 'Username must start with a letter', 'Must enter a username'],\n                fullWidth: true,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextValidator, {\n              variant: \"outlined\",\n              label: \"Password\",\n              placeholder: \"Password\",\n              color: \"primary\",\n              value: password,\n              onChange: handlePasswordChange,\n              onKeyPress: enterPress,\n              type: \"password\",\n              helperText: \"Password must be at least 6 characters\",\n              validators: ['enoughCharacters', 'required'],\n              errorMessages: ['Password must be at least 6 characters', 'Must enter a password'],\n              fullWidth: true,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          variant: \"contained\",\n          onClick: sendLoginData,\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: classes.signUpBtn,\n          variant: \"contained\",\n          style: {\n            marginLeft: 'auto'\n          },\n          children: \"Sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            children: \"Forgot username or password?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 195,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"/jM7nSh3TpfpNXz6ytVsb+Kg3Gs=\", false, function () {\n  return [useStyles];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["c:/Users/bobma/Downloads/excite-app/src/components/Login.js"],"names":["React","useState","useRef","useEffect","Card","CardContent","CardActions","Box","ValidatorForm","TextValidator","Typography","Button","axios","swal","Backdrop","CircularProgress","makeStyles","SvgIcon","useStyles","theme","root","textAlign","padding","spacing","card","maxWidth","margin","signUpBtn","backgroundColor","color","marginLeft","geoPrimary","geoSecondary","logoImg","width","height","Login","props","classes","username","setUsername","password","setPassword","open","setOpen","formRef","regularExpressions","usernameExpression","alphaStartRe","addValidationRule","value","length","test","charAt","handleUsernameChange","e","target","handlePasswordChange","enterPress","charCode","sendLoginData","preventSpace","keyCode","preventDefault","isValid","current","isFormValid","data","JSON","stringify","method","url","headers","then","response","catch","err","console","log","message"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Box from '@material-ui/core/Box';\r\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport axios from 'axios';\r\nimport swal from 'sweetalert';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport SvgIcon from '@material-ui/core/SvgIcon';\r\nimport GeoCitiesIcon from '../site-icons/geoicon.svg';\r\n\r\n//Within the styles rgb(0, 20, 60) fits the logo design for blue and rgb(0, 73, 0) for green\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        textAlign: 'center',\r\n        padding: theme.spacing(2),\r\n    },\r\n    card: {\r\n        maxWidth: 450,\r\n        margin: 'auto',\r\n    },\r\n    signUpBtn: {\r\n        backgroundColor: 'rgb(255, 255, 255)',\r\n        color: 'rgb(0, 32, 91)',\r\n        marginLeft: 'auto',\r\n    },\r\n    geoPrimary: {\r\n        color: 'rgb(0, 20, 60)',\r\n    },\r\n    geoSecondary: {\r\n        color: 'rgb(0, 73, 0)',\r\n    },\r\n    logoImg: {\r\n        width: '100%',\r\n        height: '100%',\r\n    },\r\n}));\r\n\r\nexport default function Login(props) {\r\n    const classes = useStyles();\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [open, setOpen] = useState(false);\r\n    const formRef = useRef(null);\r\n    const regularExpressions = {\r\n        usernameExpression: /^\\w+$/,\r\n        alphaStartRe: /^[A-Za-z]+$/,\r\n    }\r\n\r\n    useEffect(() => {\r\n        //The validation rule below ensures a username and password have at least 6 characters.\r\n        ValidatorForm.addValidationRule('enoughCharacters', value => {\r\n            if(value.length < 6) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        //The validation rule below ensures that a username only containers letters, numbers and underscores.\r\n        ValidatorForm.addValidationRule('usernameRe', value => {\r\n            if(!regularExpressions.usernameExpression.test(value)) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        ValidatorForm.addValidationRule('alphaStartRe', value => {\r\n            if(!regularExpressions.alphaStartRe.test(value.charAt(0))) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n\r\n    }, []);\r\n\r\n    function handleUsernameChange(e) {\r\n        setUsername(e.target.value);\r\n    }\r\n\r\n    function handlePasswordChange(e) {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    function enterPress(e) {\r\n        /*This function will handle an \"enter\" key press. If the user presses enter \r\n        while they are in the password TextField box, they will trigger the \r\n        sendLoginData function \r\n        */\r\n        if(e.charCode === 13) {\r\n            sendLoginData();\r\n        }\r\n    }\r\n\r\n    function preventSpace(e) {\r\n        //This function will prevent spaces when the user enters a username.\r\n        //It is triggered with an onKeyDown event.\r\n        if(e.keyCode === 32) {\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n    }\r\n\r\n    async function sendLoginData() {\r\n        //This function will handle sending the login data to the server with axios \r\n        \r\n        let isValid = await formRef.current.isFormValid();\r\n        if(!isValid) {\r\n            swal(\r\n                'Uh oh',\r\n                'Make sure you filled out the log in form properly!',\r\n                'error',\r\n            );\r\n            return false;\r\n        }\r\n        if(username.length < 6) {\r\n            swal(\r\n                'Uh oh!',\r\n                'Username must be at least 6 characters long!',\r\n                'error',\r\n            );\r\n            setOpen(false);\r\n            return;\r\n        }\r\n        else if(password.length < 6) {\r\n            swal(\r\n                'Uh oh!',\r\n                'Password must be at least 6 characters long!',\r\n                'error',\r\n            );\r\n            setOpen(false);\r\n            return;\r\n        }\r\n        else {\r\n            let data = JSON.stringify({\r\n                username: username,\r\n                password: password,\r\n            });\r\n\r\n            return axios({\r\n                method: 'post',\r\n                data: data,\r\n                url: 'http://192.168.0.9:3001/api/login',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                }\r\n            }).then(response => {\r\n                if(response.data === 'success') {\r\n                    setOpen(false);\r\n                    swal(\r\n                        'Great!',\r\n                        'Successfully logged in',\r\n                        'success',\r\n                    );\r\n                }\r\n                else if(response.data === 'user not found') {\r\n                    setOpen(false);\r\n                    swal(\r\n                        'Uh oh!',\r\n                        'We could not find that username! Please try again. If you forgot your username, press the \"FORGOT USERNAME OR PASSWORD\" button below.',\r\n                        'error',\r\n                    );\r\n                }\r\n                else if(response.data === 'invalid password') {\r\n                    setOpen(false);\r\n                    swal(\r\n                        'Uh oh!',\r\n                        'That password was invalid. Please try again. If you forgot your password, press the \"FORGOT USERNAME OR PASSWORD\" button below.',\r\n                        'error',\r\n                    );\r\n                }\r\n            }).catch(err => {\r\n                setOpen(false);\r\n                console.log(err.message);\r\n                swal(\r\n                    'Uh oh!',\r\n                    'There was an error logging you in. Please try again!',\r\n                    'error',\r\n                )\r\n            });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div \r\n            className={classes.root} \r\n        >\r\n            <Backdrop \r\n                open={open}\r\n            >\r\n                <Box>\r\n                    mb={10}\r\n                    <CircularProgress \r\n                        color='primary' \r\n                    />\r\n                </Box>\r\n                <Box \r\n                    mt={2} \r\n                >\r\n                    <Typography \r\n                        variant='body1'\r\n                        color='textSecondary' \r\n                        component='p' \r\n                    >\r\n                        Logging in\r\n                    </Typography>\r\n                </Box>\r\n            </Backdrop>\r\n            <Card \r\n                className={classes.card}\r\n                hidden={open}\r\n            >\r\n                <CardContent>\r\n                    <Box \r\n                        mb={4} \r\n                    >\r\n                        <Typography \r\n                            variant='h6'\r\n                            component='h6'\r\n                        >\r\n                            Welcome to <span className={classes.geoPrimary}>Geo</span><span className={classes.geoSecondary}>Cities</span>!\r\n                            <SvgIcon>\r\n                                <path d=\"M 11.617188 8.546875 C 11.261719 8.625 10.957031 8.828125 10.792969 9.101562 C 10.691406 9.261719 10.691406 9.269531 10.691406 9.527344 C 10.691406 9.792969 10.691406 9.792969 10.796875 9.960938 C 11.070312 10.394531 11.644531 10.617188 12.242188 10.519531 C 12.75 10.433594 13.160156 10.082031 13.238281 9.667969 C 13.328125 9.171875 12.929688 8.691406 12.320312 8.550781 C 12.144531 8.511719 11.792969 8.507812 11.617188 8.546875 Z M 11.617188 8.546875 \"/>\r\n                            </SvgIcon>\r\n                        </Typography>\r\n                        <Typography \r\n                            variant='subtitle1' \r\n                            component='span' \r\n                        >\r\n                            Log in \r\n                        </Typography>\r\n                    </Box>\r\n                    <Box>\r\n                        <ValidatorForm \r\n                            ref={formRef}\r\n                            onSubmit={e => e.preventDefault()}\r\n                        >\r\n                            <Box \r\n                                mb={3}\r\n                            >\r\n                                <TextValidator\r\n                                    variant='outlined' \r\n                                    label='Username'\r\n                                    placeholder='Username'\r\n                                    color='primary'\r\n                                    value={username}\r\n                                    onChange={handleUsernameChange}\r\n                                    onKeyDown={preventSpace}\r\n                                    type='username'\r\n                                    helperText='Username must be at least 6 characters'\r\n                                    validators={['enoughCharacters', 'usernameRe', 'alphaStartRe', 'required']}\r\n                                    errorMessages={['Username must be at least 6 characters', 'Username can only contain letters, numbers and underscores', 'Username must start with a letter', 'Must enter a username']}\r\n                                    fullWidth\r\n                                    required\r\n                                />\r\n                            </Box>\r\n                            <TextValidator\r\n                                variant='outlined' \r\n                                label='Password'\r\n                                placeholder='Password'\r\n                                color='primary'\r\n                                value={password} \r\n                                onChange={handlePasswordChange}\r\n                                onKeyPress={enterPress}\r\n                                type='password' \r\n                                helperText='Password must be at least 6 characters'\r\n                                validators={['enoughCharacters', 'required']}\r\n                                errorMessages={['Password must be at least 6 characters', 'Must enter a password']}\r\n                                fullWidth \r\n                                required\r\n                            />\r\n                        </ValidatorForm>\r\n                    </Box>\r\n                </CardContent>\r\n                <CardActions>\r\n                    <Button \r\n                        color='primary' \r\n                        variant='contained' \r\n                        onClick={sendLoginData}\r\n                    >\r\n                        Log in \r\n                    </Button>\r\n                    <Button \r\n                        className={classes.signUpBtn} \r\n                        variant='contained' \r\n                        style={{\r\n                            marginLeft: 'auto',\r\n                        }}\r\n                    >\r\n                        Sign up\r\n                    </Button>\r\n                </CardActions>\r\n                <CardContent>\r\n                    <Box>\r\n                        <Button \r\n                            color='primary' \r\n                        >\r\n                            Forgot username or password?\r\n                        </Button>\r\n                    </Box>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}