{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/simeonikudabo/Downloads/geocities/src/components/Community.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Avatar from '@material-ui/core/Avatar';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Hidden from '@material-ui/core/Hidden';\nimport * as _ from 'underscore';\nimport { connect } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport Icon from '@mdi/react';\nimport { mdiClose, mdiCamera, mdiVideo } from '@mdi/js';\nimport PropTypes from 'prop-types';\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\nimport CommunityPostsCard from './CommunityPostsCard';\nimport NonUserCommunityPostsCard from './NonUserCommunityPostsCard';\nimport Resizer from 'react-image-file-resizer';\nimport TextField from '@material-ui/core/TextField';\n\nfunction TabPanel(props) {\n  //This component will serve as the panel for each individual tab.\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    role: \"tabpanel\",\n    hidden: index !== value,\n    id: `tabpanel-${index}`,\n    \"aria-label\": `tab-${index}`,\n    \"aria-labelledby\": `tab-${index}`,\n    ...other,\n    style: {\n      marginTop: 100\n    },\n    children: value === index && /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: true,\n      style: {\n        textAlign: 'center'\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n}\n\n_c = TabPanel;\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  value: PropTypes.any.isRequired,\n  index: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `tab-${index}`,\n    'aria-controls': `tabpanel-${index}`\n  };\n}\n\nfunction Community(props) {\n  _s();\n\n  const [community, setCommunity] = useState(null); //This variable and setter will manipulate community.\n\n  const useStyles = makeStyles(() => ({\n    root: {\n      marginTop: 100\n    },\n    centerContent: {\n      margin: 'auto',\n      textAlign: 'center'\n    },\n    nameGrid: {\n      margin: 'auto',\n      textAlign: 'center',\n      marginTop: 20\n    },\n    avatarLg: {\n      height: 168,\n      width: 168,\n      margin: 'auto'\n    },\n    avatarSm: {\n      height: 128,\n      width: 128,\n      margin: 'auto'\n    },\n    paper: {\n      backgroundColor: community !== null ? community.communityTheme : 'rgb(0, 20, 60)'\n    },\n    closeIcon: {\n      color: 'rgb(255, 255, 255)'\n    },\n    input: {\n      display: 'none'\n    }\n  }));\n  const classes = useStyles(); //Custom styles for the component. \n\n  const history = useHistory(); //Window history API.\n\n  const params = useParams(); //Access url parameters. \n\n  const textFormRef = useRef(null); //Ref for validator form when we upload posts.\n\n  const linkFormRef = useRef(null);\n  const [joinSending, setJoinSending] = useState(false); //Will disable the button while we send a join or request join to the server.\n\n  const [postDialog, setPostDialog] = useState(false); //Will open and close the dialog to make a post.\n\n  const [curTab, setTab] = useState(0); //Sets the current tab in post upload dialog. \n\n  const [curTab2, setTab2] = useState(0); //For the second tab that displays posts, about (and settings if the user is not null and the uniqueUserId matches the mainUser, for moderation)\n\n  const [textPost, setTextPost] = useState(''); //Value for text post. \n\n  const [textPostTitle, setTextPostTitle] = useState(''); //Value for title.\n\n  const [photoPost, setPhotoPost] = useState(null); //Value for photo upload. \n\n  const [photoPostTitle, setPhotoPostTitle] = useState(''); //Value for photo post title. \n\n  const [videoPost, setVideoPost] = useState(null); //Value for video post. \n\n  const [videoPostTitle, setVideoPostTitle] = useState(''); //Video post title. \n\n  const [linkPost, setLinkPost] = useState(''); //Value for the link in a link post. \n\n  const [linkPostTitle, setLinkPostTitle] = useState(''); //Value for link post title. \n\n  const [posting, setPosting] = useState(false); //Will handle disabling buttons and bars when a post is being sent to the server.\n\n  const [uploadPhoto, setUploadPhoto] = useState(null); //Will control any photo post photo that we upload to the server. \n\n  const [photoCaption, setPhotoCaption] = useState(''); //Variable and setter for a caption for a photo upload. \n\n  const [photoUploading, setPhotoUploading] = useState(false); //Used to alter functionality when the photo post is being uploaded to the server. \n\n  const [uploadVideo, setUploadVideo] = useState(null); //Variable and setter for a video to be uploaded \n\n  const [videoUploading, setVideoUploading] = useState(null); //Variable and setter to disable button while video is uploading. \n\n  const [videoCaption, setVideoCaption] = useState(null); //Variable and setter for the caption for a video post. \n\n  const [postLink, setPostLink] = useState(''); //This variable will store the link post link. \n\n  const regularExpressions = {\n    urlRegex: /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i\n  }; //This will store the regular expressions to make sure link posts have valid url's. \n\n  useEffect(() => {\n    //Add validation rules \n    ValidatorForm.addValidationRule('titleLength', v => {\n      if (v.length > 75) {\n        return false;\n      } else {\n        return true;\n      }\n    }); //Rule for text or caption to be 3,000 characters or less. \n\n    ValidatorForm.addValidationRule('textLength', v => {\n      if (v.length > 3000) {\n        return false;\n      } else {\n        return true;\n      }\n    }); //Validation rule to ensure textPost and linkPost are not empty. \n\n    ValidatorForm.addValidationRule('requiredText', v => {\n      if (v.trim() === '') {\n        return false;\n      } else {\n        return true;\n      }\n    }); //Validation rule will ensure links are valid \n\n    ValidatorForm.addValidationRule('validLink', v => {\n      if (!regularExpressions.urlRegex.test(v)) {\n        return false;\n      } else {\n        return true;\n      }\n    }); //First we need to fetch the community with axios. \n\n    if (true) {\n      return axios({\n        method: 'GET',\n        url: `http://10.162.4.11:3001/api/fetch/community/${params.communityName}`\n      }).then(response => {\n        if (response.data.community) {\n          setCommunity(response.data.community);\n          props.dispatch({\n            type: 'ThemeChange',\n            payload: response.data.community.communityTheme\n          }); //Update the theme to match the community theme.\n\n          props.dispatch({\n            type: 'visitorPosts/updatePosts',\n            payload: response.data.posts\n          }); //Update the posts to match what a visitor viewing these posts will see.\n          //Now determine if the mainUser is in the blockList, and re-route to the previous page if they are. \n\n          if (props.mainUser !== null) {\n            if (_.find(response.data.community.blockList, person => person.uniqueUserId === props.mainUser.uniqueUserId)) {\n              swal('Uh Oh!', 'You are blocked from this community!', 'error');\n              history.goBack(1);\n            }\n          }\n        } else {\n          swal('Uh Oh!', 'We could not find that community!', 'error');\n          history.goBack(1);\n        }\n      }).catch(err => {\n        console.log(err.message);\n        swal('Uh Oh!', 'There was an error finding that community! Please try again.', 'error');\n        history.goBack(1);\n      });\n    }\n  }, []);\n\n  function publicJoin() {\n    //Function that will enable a member to join a public community. \n    let data = JSON.stringify({\n      username: props.mainUser.username,\n      uniqueUserId: props.mainUser.uniqueUserId,\n      name: community.name\n    });\n    return axios({\n      method: 'POST',\n      url: 'http://10.162.4.11:3001/api/public/join/community',\n      data: data,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      if (response.data.result === 'success') {\n        swal('Great!', 'Successfully joined community!', 'success');\n        setJoinSending(false);\n        setCommunity(response.data.community);\n      } else {\n        swal('Uh Oh!', 'There was an error with joining this community! Please try again', 'error');\n        setJoinSending(false);\n      }\n    }).catch(err => {\n      console.log(err.message);\n      swal('Uh Oh!', 'There was an error joining this community! Please try again', 'error');\n      setJoinSending(false);\n    });\n  }\n\n  function privateJoinRequest() {\n    //This function will handle sending a join notification to the moderator. \n    setJoinSending(true);\n    let data = JSON.stringify({\n      uniqueUserId: props.mainUser.uniqueUserId,\n      username: props.mainUser.username,\n      moderatorUniqueUserId: community.moderator.uniqueUserId,\n      name: community.name\n    });\n    return axios({\n      method: 'POST',\n      url: 'http://10.162.4.11:3001/api/community/join/request',\n      data: data,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      if (response.data === 'duplicate') {\n        swal('Uh Oh!', 'You have already sent a request to join this community!', 'error');\n        setJoinSending(false);\n      } else {\n        swal('Great!', 'Community join request sent!', 'success');\n        setJoinSending(false);\n      }\n    }).catch(err => {\n      console.log(err.message);\n      swal('Uh Oh!', 'There was an error sending a request to join this community! Please try again.', 'error');\n      setJoinSending(false);\n    });\n  }\n\n  async function sendTextPost() {\n    //Function that will handle uploading a text post to the server. \n    setPosting(true);\n    let isValid = textFormRef.current.isFormValid();\n\n    if (!isValid) {\n      swal('Uh Oh!', 'Make sure the form is filled out properly', 'error');\n      setPosting(false);\n      return false;\n    } else {\n      let date = new Date();\n      let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n      let month = months[date.getMonth()];\n      let day = date.getDate();\n      let year = date.getFullYear();\n      let dateString = `${month} ${day}, ${year}`;\n      let data = JSON.stringify({\n        text: textPost,\n        title: textPostTitle,\n        uniqueUserId: props.mainUser.uniqueUserId,\n        username: props.mainUser.username,\n        community: community.name,\n        type: 'text',\n        dateString: dateString,\n        uniquePostId: Date.now() + props.mainUser.username + 'textpost' + 'info' + community.name,\n        context: 'community',\n        privacy: community.communityPrivacy,\n        link: postLink ? postLink : '',\n        textType: 'link'\n      });\n      return axios({\n        method: 'post',\n        url: 'http://10.162.4.11:3001/api/add/community/text/post',\n        data: data,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        if (response.data.result === 'success') {\n          props.dispatch({\n            type: 'visitorPosts/updatePosts',\n            payload: response.data.posts\n          });\n          swal('Great!', 'Successfully uploaded text post!', 'success');\n          setTextPost('');\n          setTextPostTitle('');\n          setPosting(false);\n          setPostDialog(false);\n        } else {\n          swal('Uh Oh!', 'There was an error sending that text post!', 'error');\n          setPosting(false);\n        }\n      }).catch(err => {\n        console.log(err.message);\n        swal('Uh Oh!', 'There was an error sending that text post! Please try again.', 'error');\n        setPosting(false);\n      });\n    }\n  }\n\n  function sendLinkPost() {\n    //This function will handle sending a post with a link URL to the server.\n    setPosting(true);\n    let isValid = linkFormRef.current.isFormValid();\n\n    if (!regularExpressions.urlRegex.test(postLink)) {\n      swal('Uh Oh!', 'You must enter a valid URL to create a link post', 'error');\n      setPosting(false);\n      return false;\n    } else if (textPostTitle === '') {\n      swal('Uh Oh!', 'You must enter a title for all link posts.', 'error');\n      setPosting(false);\n      return false;\n    } else if (!isValid) {\n      swal('Uh Oh!', 'Make sure the form is filled out properly', 'error');\n      setPosting(false);\n      return false;\n    } else {\n      let date = new Date();\n      let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n      let month = months[date.getMonth()];\n      let day = date.getDate();\n      let year = date.getFullYear();\n      let dateString = `${month} ${day}, ${year}`;\n      let data = JSON.stringify({\n        text: '',\n        title: textPostTitle,\n        link: postLink,\n        uniqueUserId: props.mainUser.uniqueUserId,\n        username: props.mainUser.username,\n        community: community.name,\n        type: 'link',\n        dateString: dateString,\n        uniquePostId: Date.now() + props.mainUser.username + 'textpost' + 'info' + community.name,\n        context: 'community',\n        privacy: community.communityPrivacy\n      });\n      return axios({\n        method: 'post',\n        url: 'http://10.162.4.11:3001/api/add/community/text/post',\n        data: data,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        if (response.data.result === 'success') {\n          props.dispatch({\n            type: 'visitorPosts/updatePosts',\n            payload: response.data.posts\n          });\n          swal('Great!', 'Successfully uploaded link post!', 'success');\n          setTextPost('');\n          setTextPostTitle('');\n          setPosting(false);\n          setPostDialog(false);\n        } else {\n          swal('Uh Oh!', 'There was an error sending that link post!', 'error');\n          setPosting(false);\n        }\n      }).catch(err => {\n        console.log(err.message);\n        swal('Uh Oh!', 'There was an error sending that link post! Please try again.', 'error');\n        setPosting(false);\n      });\n    }\n  }\n\n  function resizerFunction(file) {\n    //This is a wrapper for the file resizer \n    return new Promise(resolve => {\n      Resizer.imageFileResizer(file, 600, 600, 'JPEG', 100, 0, uri => {\n        resolve(uri);\n      }, 'blob');\n    });\n  }\n\n  async function handlePhotoChange(e) {\n    //This function will handle passing a photo that is uploaded to the resizer function to rersize the photo\n    let file = e.target.files[0];\n    let resizedPhoto = await resizerFunction(file);\n    setUploadPhoto(resizedPhoto);\n  }\n\n  function handlePhotoUpload() {\n    //Function that will handle sending an uploaded photo to the server after resizing it.\n    //Might need to make some edits here since the photo will be community-based\n    setPhotoUploading(true);\n\n    if (!uploadPhoto) {\n      swal('Uh Oh!', 'You must select a photo to upload!', 'error');\n      setPhotoUploading(false);\n    } else {\n      let data = new Date();\n      let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n      let month = months[data.getMonth()];\n      let day = data.getDate();\n      let year = data.getFullYear();\n      let dateString = `${month} ${day}, ${year}`;\n      let fd = new FormData();\n      fd.append('photo', uploadPhoto, 'photo.jpg');\n      fd.append('caption', photoCaption);\n      fd.append('uniqueUserId', props.mainUser.uniqueUserId);\n      fd.append('uniquePostId', Date.now() + props.mainUser.username + 'photoupload' + props.mainUser.uniqueUserId);\n      fd.append('username', props.mainUser.username);\n      fd.append('dateString', dateString);\n      fd.append('type', 'photo');\n      fd.append('context', 'community');\n      fd.append('link', `http://192.168.0.9:3000/profile#${Date.now()}${props.mainUser.username}photoupload${props.mainUser.uniqueUserId}`);\n      fd.append('community', community.name); //Name of the community that this post belongs to. \n\n      fd.append('title', '');\n      fd.append('privacy', community.communityPrivacy);\n      fd.append('text', '');\n      return axios({\n        method: 'POST',\n        url: 'http://10.162.4.11:3001/api/upload/photo',\n        data: fd,\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(response => {\n        if (response.data.posts) {\n          props.dispatch({\n            type: 'visitorPosts/updatePosts',\n            payload: response.data.posts\n          });\n          swal('Great!', 'Successfully uploaded photo!', 'success');\n          setPhotoCaption('');\n          setUploadPhoto(null);\n          setPostDialog(false);\n          setPhotoUploading(false);\n        } else {\n          swal('Uh Oh!', 'There was an error uploading that photo!', 'error');\n          setPhotoUploading(false);\n        }\n      }).catch(err => {\n        console.log(err.message);\n        swal('Uh Oh!', 'There was an error uploading that photo!', 'error');\n        setPhotoUploading(false);\n      });\n    }\n  }\n\n  function handleVideoChange(e) {\n    //This function will handle setting the uploadVideo variable to the valua of the file. \n    setUploadVideo(e.target.files[0]);\n  }\n\n  function handleVideoUpload() {\n    //Function that will handle sending an uploaded video to the server.\n    setVideoUploading(true);\n\n    if (!uploadVideo) {\n      swal('Uh Oh!', 'You must select a video to upload!', 'error');\n      setVideoUploading(false);\n    } else {\n      let data = new Date();\n      let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n      let month = months[data.getMonth()];\n      let day = data.getDate();\n      let year = data.getFullYear();\n      let dateString = `${month} ${day}, ${year}`;\n      let ext = uploadVideo.name.split('.').pop().toString(); //This will get the extension name of the video \n\n      ext = 'video.' + ext;\n      let fd = new FormData();\n      fd.append('photo', uploadVideo, ext); //Keep the name \"photo\" for the server upload although it is technically a video!\n\n      fd.append('caption', videoCaption);\n      fd.append('uniqueUserId', props.mainUser.uniqueUserId);\n      fd.append('uniquePostId', Date.now() + props.mainUser.username + 'videoupload' + props.mainUser.uniqueUserId);\n      fd.append('username', props.mainUser.username);\n      fd.append('dateString', dateString);\n      fd.append('type', 'video');\n      fd.append('context', 'community');\n      fd.append('link', `http://192.168.0.9:3000/profile#${Date.now()}${props.mainUser.username}videoupload${props.mainUser.uniqueUserId}`);\n      fd.append('community', community.name);\n      fd.append('communityPost', true);\n      fd.append('title', '');\n      fd.append('privacy', community.communityPrivacy);\n      fd.append('text', '');\n      return axios({\n        method: 'POST',\n        url: 'http://10.162.4.11:3001/api/upload/photo',\n        data: fd,\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(response => {\n        if (response.data.posts) {\n          props.dispatch({\n            type: 'visitorPosts/updatePosts',\n            payload: response.data.posts\n          });\n          swal('Great!', 'Successfully uploaded video!', 'success');\n          setVideoCaption('');\n          setUploadVideo(null);\n          setPostDialog(false);\n          setVideoUploading(false);\n        } else {\n          swal('Uh Oh!', 'There was an error uploading that video!', 'error');\n          setVideoUploading(false);\n        }\n      }).catch(err => {\n        console.log(err.message);\n        swal('Uh Oh!', 'There was an error uploading that video!', 'error');\n        setVideoUploading(false);\n      });\n    }\n  }\n\n  function leaveCommunity() {\n    //This function will remove a member from a community if they are within it. \n    setJoinSending(true);\n    let data = JSON.stringify({\n      username: props.mainUser.username,\n      uniqueUserId: props.mainUser.uniqueUserId,\n      name: community.name\n    });\n    return axios({\n      method: 'POST',\n      url: 'http://10.162.4.11:3001/api/leave/community',\n      data: data,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      if (response.data.result === 'success') {\n        swal('Great!', 'You have successfully left this community', 'success');\n        setCommunity(response.data.community);\n        setJoinSending(false);\n      } else {\n        swal('Uh Oh!', 'There was an error leaving this community! Please try again.', 'error');\n        setJoinSending(false);\n      }\n    }).catch(err => {\n      console.log(err.message);\n      swal('Uh Oh!', 'There was an error leaving this community! Please try again.', 'error');\n      setJoinSending(false);\n    });\n  }\n\n  if (community !== null) {\n    return /*#__PURE__*/_jsxDEV(Grid, {\n      className: classes.root,\n      container: true,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        className: classes.centerContent,\n        children: [/*#__PURE__*/_jsxDEV(Hidden, {\n          smDown: true,\n          children: /*#__PURE__*/_jsxDEV(Avatar, {\n            className: classes.avatarLg,\n            src: `http://10.162.4.11:3001/api/get-photo/${community.avatar}`,\n            alt: `${community.name} avatar`,\n            title: `${community.name} avatar`,\n            variant: \"square\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 727,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n          mdUp: true,\n          children: /*#__PURE__*/_jsxDEV(Avatar, {\n            src: `http://10.162.4.11:3001/api/get-photo/${community.avatar}`,\n            className: classes.avatarSm,\n            title: `${community.name} avatar`,\n            alt: `${community.name} avatar`,\n            variant: \"square\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 741,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 738,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 722,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        className: classes.nameGrid,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          component: \"h6\",\n          align: \"center\",\n          children: community.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 756,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        className: classes.nameGrid,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          component: \"p\",\n          justify: \"left\",\n          children: community.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 771,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 766,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        style: {\n          margin: 'auto',\n          textAlign: 'center',\n          marginTop: 20\n        },\n        children: [props.mainUser !== null && !_.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && community.communityPrivacy === 'public' && community.moderator.uniqueUserId !== props.mainUser.uniqueUserId && /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          variant: \"contained\",\n          onClick: publicJoin,\n          disabled: joinSending,\n          children: joinSending ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            color: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 798,\n            columnNumber: 44\n          }, this) : 'join'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 792,\n          columnNumber: 25\n        }, this), props.mainUser !== null && !_.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && community.communityPrivacy === 'private' && community.moderator.uniqueUserId !== props.mainUser.uniqueUserid && /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          variant: \"contained\",\n          onClick: privateJoinRequest,\n          disabled: joinSending,\n          children: joinSending ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            color: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 809,\n            columnNumber: 44\n          }, this) : 'join'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 803,\n          columnNumber: 25\n        }, this), props.mainUser !== null && _.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && community.moderator.uniqueUserId !== props.mainUser.uniqueUserId && /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          variant: \"outlined\",\n          onClick: leaveCommunity,\n          disabled: joinSending,\n          children: joinSending ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            color: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 819,\n            columnNumber: 44\n          }, this) : 'leave'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 813,\n          columnNumber: 25\n        }, this), props.mainUser === null && /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          onClick: e => history.push('/'),\n          children: \"Sign up or log in!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 824,\n          columnNumber: 25\n        }, this), props.mainUser === null && community.communityPrivacy === 'private' && /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"h6\",\n            align: \"center\",\n            children: \"This community is private\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 836,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 832,\n          columnNumber: 25\n        }, this), props.mainUser !== null && !_.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && community.communityPrivacy === 'private' && /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"h6\",\n            align: \"center\",\n            children: \"This community is private\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 850,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 846,\n          columnNumber: 25\n        }, this), props.mainUser !== null && _.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            style: {\n              marginTop: 20,\n              marginBottom: 20\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"primary\",\n              style: {\n                margin: 'auto'\n              },\n              onClick: e => history.push(`/community/chat/${community.name}`),\n              children: \"Chat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 870,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 862,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              color: \"primary\",\n              variant: \"outlined\",\n              onClick: e => setPostDialog(true),\n              children: \"Post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 885,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 881,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 861,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 781,\n        columnNumber: 17\n      }, this), props.mainUser !== null && _.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(Dialog, {\n          open: postDialog,\n          fullScreen: true,\n          children: /*#__PURE__*/_jsxDEV(DialogContent, {\n            children: [/*#__PURE__*/_jsxDEV(AppBar, {\n              color: \"primary\",\n              hidden: posting,\n              children: [/*#__PURE__*/_jsxDEV(Icon, {\n                path: mdiClose,\n                size: 1,\n                title: \"Dialog close\",\n                style: {\n                  cursor: 'pointer'\n                },\n                onClick: () => setPostDialog(false)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 912,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n                value: curTab,\n                onChange: (e, newVal) => setTab(newVal),\n                centered: true,\n                children: [/*#__PURE__*/_jsxDEV(Tab, { ...a11yProps(0),\n                  label: \"Text\",\n                  disabled: posting\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 926,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Tab, { ...a11yProps(1),\n                  label: \"Photo\",\n                  disabled: posting\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 931,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Tab, { ...a11yProps(2),\n                  label: \"Video\",\n                  disabled: posting\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 936,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Tab, { ...a11yProps(3),\n                  label: \"Link\",\n                  disabled: posting\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 941,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 921,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 908,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              index: 0,\n              value: curTab,\n              children: /*#__PURE__*/_jsxDEV(ValidatorForm, {\n                ref: textFormRef,\n                onSubmit: e => e.preventDefault(),\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  component: \"small\",\n                  color: textPostTitle.length > 75 ? 'error' : 'default',\n                  align: \"center\",\n                  children: [textPostTitle.length, \"/75\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 956,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TextValidator, {\n                  label: \"Post title\",\n                  placeholder: \"Enter a title for your post of 75 characters or less\",\n                  value: textPostTitle,\n                  onChange: e => setTextPostTitle(e.target.value),\n                  helperText: \"Enter a title for this text post\",\n                  validators: ['titleLength'],\n                  errorMessages: ['Title can only be up to 75 characters'],\n                  InputLabelProps: {\n                    shrink: true\n                  },\n                  color: \"primary\",\n                  variant: \"outlined\",\n                  fullWidth: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 964,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  style: {\n                    marginTop: 30\n                  },\n                  variant: \"body1\",\n                  component: \"small\",\n                  color: textPost.length > 3000 ? 'error' : 'default',\n                  align: \"center\",\n                  children: [textPost.length, \"/3000\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 979,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TextValidator, {\n                  label: \"Text post\",\n                  placeholder: \"Share a text post!\",\n                  value: textPost,\n                  onChange: e => setTextPost(e.target.value),\n                  helperText: \"Enter a text post of up to 3,000 characters long!\",\n                  validators: ['requiredText', 'textLength'],\n                  errorMessages: ['Must enter some text!', 'Text post cannot be more than 3,000 characters long!'],\n                  variant: \"outlined\",\n                  InputLabelProps: {\n                    shrink: true\n                  },\n                  color: \"primary\",\n                  variant: \"outlined\",\n                  rows: 3,\n                  multiline: true,\n                  required: true,\n                  fullWidth: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 990,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  color: \"primary\",\n                  onClick: sendTextPost,\n                  disabled: posting,\n                  children: posting ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                    color: \"primary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1015,\n                    columnNumber: 56\n                  }, this) : 'Upload'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1009,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 952,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 948,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              index: 1,\n              value: curTab,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                component: \"h6\",\n                children: \"Post a photo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1023,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                \"html-for\": \"photoPost\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: classes.input,\n                  type: \"file\",\n                  accept: \"image/jpg, image/jpeg, image/png\",\n                  id: \"photoPost\",\n                  name: \"photoPost\",\n                  onChange: handlePhotoChange,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1032,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  color: \"primary\",\n                  component: \"span\",\n                  \"aria-label\": \"Photo picker button\",\n                  children: /*#__PURE__*/_jsxDEV(Icon, {\n                    path: mdiCamera,\n                    size: 1,\n                    title: \"Photo upload icon\",\n                    \"aria-label\": \"Photo upload icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1047,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1041,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1029,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1055,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Caption\",\n                placeholder: \"Enter a caption for your photo\",\n                variant: \"outlined\",\n                color: \"primary\",\n                value: photoCaption,\n                onChange: e => setPhotoCaption(e.target.value),\n                InputLabelProps: {\n                  shrink: true\n                },\n                rows: 4,\n                multiline: true,\n                required: true,\n                style: {\n                  marginTop: 40\n                },\n                fullWidth: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1056,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1074,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                style: {\n                  marginTop: 30\n                },\n                color: \"primary\",\n                variant: \"outlined\",\n                onClick: handlePhotoUpload,\n                disabled: photoUploading,\n                children: photoUploading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                  color: \"primary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1084,\n                  columnNumber: 59\n                }, this) : 'Upload Photo'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1075,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1019,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              index: 2,\n              value: curTab,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                component: \"h6\",\n                children: \"Post a video\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1091,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                \"html-for\": \"videoPost\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: classes.input,\n                  type: \"file\",\n                  accept: \"video/mp4, video/mov\",\n                  id: \"videoPost\",\n                  name: \"videoPost\",\n                  onChange: handleVideoChange,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1100,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  color: \"primary\",\n                  component: \"span\",\n                  \"aria-label\": \"Video picker button\",\n                  children: /*#__PURE__*/_jsxDEV(Icon, {\n                    path: mdiVideo,\n                    size: 1,\n                    title: \"Video upload icon\",\n                    \"aria-label\": \"Video upload icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1115,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1109,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1097,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1123,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Caption\",\n                placeholder: \"Enter a caption for your video\",\n                variant: \"outlined\",\n                color: \"primary\",\n                value: videoCaption,\n                onChange: e => setVideoCaption(e.target.value),\n                InputLabelProps: {\n                  shrink: true\n                },\n                rows: 4,\n                multiline: true,\n                required: true,\n                style: {\n                  marginTop: 40\n                },\n                fullWidth: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1124,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1142,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                style: {\n                  marginTop: 30\n                },\n                color: \"primary\",\n                variant: \"outlined\",\n                onClick: handleVideoUpload,\n                disabled: videoUploading,\n                children: videoUploading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                  color: \"primary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1152,\n                  columnNumber: 59\n                }, this) : 'Upload Video'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1143,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1087,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              index: 3,\n              value: curTab,\n              children: /*#__PURE__*/_jsxDEV(ValidatorForm, {\n                ref: linkFormRef,\n                onSubmit: e => e.preventDefault(),\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  component: \"small\",\n                  color: textPostTitle.length > 75 ? 'error' : 'default',\n                  align: \"center\",\n                  children: [textPostTitle.length, \"/75\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1163,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TextValidator, {\n                  label: \"Post title\",\n                  placeholder: \"Enter a title for your post of 75 characters or less\",\n                  value: textPostTitle,\n                  onChange: e => setTextPostTitle(e.target.value),\n                  helperText: \"Enter a title for this text post\",\n                  validators: ['requiredText', 'titleLength'],\n                  errorMessages: ['Must enter a title for all link posts', 'Title can only be up to 75 characters'],\n                  InputLabelProps: {\n                    shrink: true\n                  },\n                  color: \"primary\",\n                  variant: \"outlined\",\n                  fullWidth: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1171,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1186,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TextValidator, {\n                  label: \"Link\",\n                  placeholder: \"Share a valid link!\",\n                  value: postLink,\n                  onChange: e => setPostLink(e.target.value),\n                  helperText: \"Enter a valid url link.\",\n                  validators: ['requiredText', 'validLink'],\n                  errorMessages: ['Must enter a link!', 'The link that you enter must be formatted properly!'],\n                  variant: \"outlined\",\n                  InputLabelProps: {\n                    shrink: true\n                  },\n                  color: \"primary\",\n                  variant: \"outlined\",\n                  required: true,\n                  fullWidth: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1187,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  color: \"primary\",\n                  onClick: sendLinkPost,\n                  disabled: posting,\n                  children: posting ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                    color: \"primary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1210,\n                    columnNumber: 56\n                  }, this) : 'Upload'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1204,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1159,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1155,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 907,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 903,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 899,\n        columnNumber: 21\n      }, this), (community.communityPrivacy === 'public' || props.mainUser !== null && _.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId)) && /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: [/*#__PURE__*/_jsxDEV(Paper, {\n          className: classes.paper,\n          style: {\n            marginTop: 10\n          },\n          children: /*#__PURE__*/_jsxDEV(Tabs, {\n            value: curTab2,\n            onChange: (e, newVal) => setTab2(newVal),\n            centered: true,\n            style: {\n              color: 'rgb(255, 255, 255)'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Tab, {\n              label: \"Posts\",\n              ...a11yProps(0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1239,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"About\",\n              ...a11yProps(1)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1243,\n              columnNumber: 33\n            }, this), props.mainUser !== null && community.moderator.uniqueUserId === props.mainUser.uniqueUserId && /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"Settings\",\n              ...a11yProps(2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1248,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1231,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1225,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n          value: 0,\n          index: curTab2,\n          children: [props.posts.length < 1 && /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"h6\",\n            align: \"center\",\n            children: \"No posts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1261,\n            columnNumber: 33\n          }, this), props.posts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: props.posts.map((post, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: 'left'\n              },\n              children: [props.mainUser !== null && /*#__PURE__*/_jsxDEV(CommunityPostsCard, {\n                post: post,\n                id: post.uniquePostId,\n                moderator: props.mainUser.uniqueUserId === community.moderator.uniqueUserId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1279,\n                columnNumber: 49\n              }, this), props.mainUser === null && /*#__PURE__*/_jsxDEV(NonUserCommunityPostsCard, {\n                post: post,\n                id: post.uniquePostId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1286,\n                columnNumber: 49\n              }, this), index < props.posts.length - 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: 20\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1292,\n                columnNumber: 49\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1272,\n              columnNumber: 41\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1270,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1256,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n          value: 1,\n          index: curTab2,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              margin: 'auto',\n              maxWidth: 600,\n              textAlign: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(List, {\n              children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                style: {\n                  cursor: 'pointer'\n                },\n                onClick: e => history.push(`/geouser/${community.moderator.uniqueUserId}`),\n                alignItems: \"center\",\n                children: [/*#__PURE__*/_jsxDEV(ListItemAvatar, {\n                  children: /*#__PURE__*/_jsxDEV(Avatar, {\n                    src: `http://10.162.4.11:3001/api/get/avatar/by/id/${community.moderator.uniqueUserId}`,\n                    title: `${community.moderator.username}`,\n                    alt: `${community.moderator.username}`,\n                    style: {\n                      cursor: 'pointer'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1325,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1324,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h6\",\n                      component: \"h6\",\n                      align: \"center\",\n                      children: \"Moderator\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1337,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"subtitle1\",\n                      component: \"span\",\n                      color: \"textSecondary\",\n                      align: \"center\",\n                      children: community.moderator.username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1344,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1336,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1334,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1317,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1356,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body1\",\n                      component: \"p\",\n                      align: \"center\",\n                      children: [community.members.length, \" members\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1363,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1362,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1360,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1359,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1315,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1308,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1304,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1221,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 718,\n      columnNumber: 13\n    }, this);\n  } else {\n    //If the community is null, simply return a Backdrop with a CircularProgress inside \n    return /*#__PURE__*/_jsxDEV(Backdrop, {\n      open: true,\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n        color: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1390,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1387,\n      columnNumber: 13\n    }, this);\n  }\n}\n\n_s(Community, \"A1nzALMIl61ea9wQSgmtosaf0oE=\", false, function () {\n  return [useStyles, useHistory, useParams];\n});\n\n_c2 = Community;\n\nfunction mapStateToProps(state) {\n  return {\n    mainUser: state.userReducer.user,\n    primary: state.userThemeReducer.primary,\n    posts: state.visitorPostsReducer.posts\n  };\n}\n\nexport default connect(mapStateToProps)(Community);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TabPanel\");\n$RefreshReg$(_c2, \"Community\");","map":{"version":3,"sources":["/Users/simeonikudabo/Downloads/geocities/src/components/Community.js"],"names":["React","useState","useEffect","useRef","Grid","Typography","Paper","Tabs","Tab","Avatar","Backdrop","CircularProgress","List","ListItem","ListItemText","ListItemAvatar","Divider","Button","axios","swal","Dialog","DialogContent","AppBar","Toolbar","Hidden","_","connect","useHistory","useParams","makeStyles","IconButton","Icon","mdiClose","mdiCamera","mdiVideo","PropTypes","ValidatorForm","TextValidator","CommunityPostsCard","NonUserCommunityPostsCard","Resizer","TextField","TabPanel","props","children","value","index","other","marginTop","textAlign","propTypes","node","any","isRequired","a11yProps","id","Community","community","setCommunity","useStyles","root","centerContent","margin","nameGrid","avatarLg","height","width","avatarSm","paper","backgroundColor","communityTheme","closeIcon","color","input","display","classes","history","params","textFormRef","linkFormRef","joinSending","setJoinSending","postDialog","setPostDialog","curTab","setTab","curTab2","setTab2","textPost","setTextPost","textPostTitle","setTextPostTitle","photoPost","setPhotoPost","photoPostTitle","setPhotoPostTitle","videoPost","setVideoPost","videoPostTitle","setVideoPostTitle","linkPost","setLinkPost","linkPostTitle","setLinkPostTitle","posting","setPosting","uploadPhoto","setUploadPhoto","photoCaption","setPhotoCaption","photoUploading","setPhotoUploading","uploadVideo","setUploadVideo","videoUploading","setVideoUploading","videoCaption","setVideoCaption","postLink","setPostLink","regularExpressions","urlRegex","addValidationRule","v","length","trim","test","method","url","communityName","then","response","data","dispatch","type","payload","posts","mainUser","find","blockList","person","uniqueUserId","goBack","catch","err","console","log","message","publicJoin","JSON","stringify","username","name","headers","result","privateJoinRequest","moderatorUniqueUserId","moderator","sendTextPost","isValid","current","isFormValid","date","Date","months","month","getMonth","day","getDate","year","getFullYear","dateString","text","title","uniquePostId","now","context","privacy","communityPrivacy","link","textType","sendLinkPost","resizerFunction","file","Promise","resolve","imageFileResizer","uri","handlePhotoChange","e","target","files","resizedPhoto","handlePhotoUpload","fd","FormData","append","handleVideoChange","handleVideoUpload","ext","split","pop","toString","leaveCommunity","avatar","members","member","uniqueUserid","push","marginBottom","cursor","newVal","preventDefault","shrink","map","post","maxWidth","mapStateToProps","state","userReducer","user","primary","userThemeReducer","visitorPostsReducer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Avatar from '@material-ui/core/Avatar';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Hidden from '@material-ui/core/Hidden';\nimport * as _ from 'underscore';\nimport { connect } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom'; \nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport Icon from '@mdi/react';\nimport { mdiClose, mdiCamera, mdiVideo } from '@mdi/js';\nimport PropTypes from 'prop-types';\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\nimport CommunityPostsCard from './CommunityPostsCard';\nimport NonUserCommunityPostsCard from './NonUserCommunityPostsCard';\nimport Resizer from 'react-image-file-resizer';\nimport TextField from '@material-ui/core/TextField';\n\nfunction TabPanel(props) {\n    //This component will serve as the panel for each individual tab.\n    const { children, value, index, ...other } = props;\n\n    return (\n        <div \n            role='tabpanel'\n            hidden={index !== value} \n            id={`tabpanel-${index}`}\n            aria-label={`tab-${index}`}\n            aria-labelledby={`tab-${index}`}\n            {...other}\n            style={{\n                marginTop: 100,\n            }}\n        >\n            {value === index &&\n                <Grid \n                    item \n                    xs\n                    style={{\n                        textAlign: 'center',\n                    }}\n                >\n                    {children}\n                </Grid>\n            }\n        </div>\n    );\n}\n\nTabPanel.propTypes = {\n    children: PropTypes.node,\n    value: PropTypes.any.isRequired,\n    index: PropTypes.any.isRequired,\n}\n\nfunction a11yProps(index) {\n    return {\n        id: `tab-${index}`,\n        'aria-controls': `tabpanel-${index}`,\n    };\n}\n\n\nfunction Community(props) {\n    const [community, setCommunity] = useState(null); //This variable and setter will manipulate community.\n    const useStyles = makeStyles(() => ({\n        root: {\n            marginTop: 100,\n        },\n        centerContent: {\n            margin: 'auto',\n            textAlign: 'center',\n        },\n        nameGrid: {\n            margin: 'auto',\n            textAlign: 'center',\n            marginTop: 20,\n        },\n        avatarLg: {\n            height: 168,\n            width: 168,\n            margin: 'auto',\n        },\n        avatarSm: {\n            height: 128,\n            width: 128,\n            margin: 'auto',\n        },\n        paper: {\n            backgroundColor: community !== null ? community.communityTheme : 'rgb(0, 20, 60)',\n        },\n        closeIcon: {\n            color: 'rgb(255, 255, 255)',\n        },\n        input: {\n            display: 'none',\n        },\n    }));\n    const classes = useStyles(); //Custom styles for the component. \n    const history = useHistory(); //Window history API.\n    const params = useParams(); //Access url parameters. \n    const textFormRef = useRef(null); //Ref for validator form when we upload posts.\n    const linkFormRef = useRef(null);\n    const [joinSending, setJoinSending] = useState(false); //Will disable the button while we send a join or request join to the server.\n    const [postDialog, setPostDialog] = useState(false); //Will open and close the dialog to make a post.\n    const [curTab, setTab] = useState(0); //Sets the current tab in post upload dialog. \n    const [curTab2, setTab2] = useState(0); //For the second tab that displays posts, about (and settings if the user is not null and the uniqueUserId matches the mainUser, for moderation)\n    const [textPost, setTextPost] = useState(''); //Value for text post. \n    const [textPostTitle, setTextPostTitle] = useState(''); //Value for title.\n    const [photoPost, setPhotoPost] = useState(null); //Value for photo upload. \n    const [photoPostTitle, setPhotoPostTitle] = useState(''); //Value for photo post title. \n    const [videoPost, setVideoPost] = useState(null); //Value for video post. \n    const [videoPostTitle, setVideoPostTitle] = useState(''); //Video post title. \n    const [linkPost, setLinkPost] = useState(''); //Value for the link in a link post. \n    const [linkPostTitle, setLinkPostTitle] = useState(''); //Value for link post title. \n    const [posting, setPosting] = useState(false); //Will handle disabling buttons and bars when a post is being sent to the server.\n    const [uploadPhoto, setUploadPhoto] = useState(null); //Will control any photo post photo that we upload to the server. \n    const [photoCaption, setPhotoCaption] = useState('');//Variable and setter for a caption for a photo upload. \n    const [photoUploading, setPhotoUploading] = useState(false); //Used to alter functionality when the photo post is being uploaded to the server. \n    const [uploadVideo, setUploadVideo] = useState(null); //Variable and setter for a video to be uploaded \n    const [videoUploading, setVideoUploading] = useState(null); //Variable and setter to disable button while video is uploading. \n    const [videoCaption, setVideoCaption] = useState(null); //Variable and setter for the caption for a video post. \n    const [postLink, setPostLink] = useState(''); //This variable will store the link post link. \n    const regularExpressions = {\n        urlRegex: /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i,\n    }; //This will store the regular expressions to make sure link posts have valid url's. \n\n\n    useEffect(() => {\n        //Add validation rules \n        ValidatorForm.addValidationRule('titleLength', v => {\n            if(v.length > 75) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n\n        //Rule for text or caption to be 3,000 characters or less. \n        ValidatorForm.addValidationRule('textLength', v => {\n            if(v.length > 3000) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n\n        //Validation rule to ensure textPost and linkPost are not empty. \n        ValidatorForm.addValidationRule('requiredText', v => {\n            if(v.trim() === '') {\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n\n        //Validation rule will ensure links are valid \n        ValidatorForm.addValidationRule('validLink', v => {\n            if(!regularExpressions.urlRegex.test(v)) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n\n        //First we need to fetch the community with axios. \n        if(true) {\n            return axios({\n                method: 'GET',\n                url: `http://10.162.4.11:3001/api/fetch/community/${params.communityName}`,\n            }).then(response => {\n                if(response.data.community) {\n                    setCommunity(response.data.community);\n                    props.dispatch({type: 'ThemeChange', payload: response.data.community.communityTheme}); //Update the theme to match the community theme.\n                    props.dispatch({type: 'visitorPosts/updatePosts', payload: response.data.posts}); //Update the posts to match what a visitor viewing these posts will see.\n                    //Now determine if the mainUser is in the blockList, and re-route to the previous page if they are. \n                    if(props.mainUser !== null) {\n                        if(_.find(response.data.community.blockList, person => person.uniqueUserId === props.mainUser.uniqueUserId)) {\n                            swal(\n                                'Uh Oh!',\n                                'You are blocked from this community!',\n                                'error',\n                            );\n                            history.goBack(1);\n                        }\n                    }\n                }\n                else {\n                    swal(\n                        'Uh Oh!',\n                        'We could not find that community!',\n                        'error',\n                    );\n                    history.goBack(1);\n                }\n            }).catch(err => {\n                console.log(err.message);\n                swal(\n                    'Uh Oh!',\n                    'There was an error finding that community! Please try again.',\n                    'error',\n                );\n                history.goBack(1);\n            });\n        }\n    }, []);\n\n    function publicJoin() {\n        //Function that will enable a member to join a public community. \n        let data = JSON.stringify({\n            username: props.mainUser.username,\n            uniqueUserId: props.mainUser.uniqueUserId,\n            name: community.name,\n        });\n\n        return axios({\n            method: 'POST',\n            url: 'http://10.162.4.11:3001/api/public/join/community',\n            data: data,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        }).then(response => {\n            if(response.data.result === 'success') {\n                swal(\n                    'Great!',\n                    'Successfully joined community!',\n                    'success',\n                );\n                setJoinSending(false);\n                setCommunity(response.data.community);\n            }\n            else {\n                swal(\n                    'Uh Oh!',\n                    'There was an error with joining this community! Please try again',\n                    'error',\n                );\n                setJoinSending(false);\n            }\n        }).catch(err => {\n            console.log(err.message);\n            swal(\n                'Uh Oh!',\n                'There was an error joining this community! Please try again',\n                'error',\n            );\n            setJoinSending(false);\n        });\n    }\n\n    function privateJoinRequest() {\n        //This function will handle sending a join notification to the moderator. \n        setJoinSending(true);\n        let data = JSON.stringify({\n            uniqueUserId: props.mainUser.uniqueUserId,\n            username: props.mainUser.username,\n            moderatorUniqueUserId: community.moderator.uniqueUserId,\n            name: community.name,\n        });\n\n        return axios({\n            method: 'POST',\n            url: 'http://10.162.4.11:3001/api/community/join/request',\n            data: data,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        }).then(response => {\n            if(response.data === 'duplicate') {\n                swal(\n                    'Uh Oh!',\n                    'You have already sent a request to join this community!',\n                    'error',\n                );\n                setJoinSending(false);\n            }\n            else {\n                swal(\n                    'Great!',\n                    'Community join request sent!',\n                    'success',\n                );\n                setJoinSending(false);\n            }\n        }).catch(err => {\n            console.log(err.message);\n            swal(\n                'Uh Oh!',\n                'There was an error sending a request to join this community! Please try again.',\n                'error',\n            );\n            setJoinSending(false);\n        });\n    }\n\n    async function sendTextPost() {\n        //Function that will handle uploading a text post to the server. \n        setPosting(true); \n        let isValid = textFormRef.current.isFormValid();\n        if(!isValid) {\n            swal(\n                'Uh Oh!',\n                'Make sure the form is filled out properly',\n                'error',\n            );\n            setPosting(false);\n            return false;\n        }\n        else {\n            let date = new Date();\n            let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n            let month = months[date.getMonth()];\n            let day = date.getDate();\n            let year = date.getFullYear();\n            let dateString = `${month} ${day}, ${year}`;\n            let data = JSON.stringify({\n                text: textPost,\n                title: textPostTitle,\n                uniqueUserId: props.mainUser.uniqueUserId,\n                username: props.mainUser.username,\n                community: community.name,\n                type: 'text',\n                dateString: dateString,\n                uniquePostId: Date.now() + props.mainUser.username + 'textpost' + 'info' + community.name,\n                context: 'community',\n                privacy: community.communityPrivacy,\n                link: postLink ? postLink : '',\n                textType: 'link',\n            });\n\n            return axios({\n                method: 'post',\n                url: 'http://10.162.4.11:3001/api/add/community/text/post',\n                data: data,\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            }).then(response => {\n                if(response.data.result === 'success') {\n                    props.dispatch({type: 'visitorPosts/updatePosts', payload: response.data.posts});\n                    swal(\n                        'Great!',\n                        'Successfully uploaded text post!',\n                        'success',\n                    );\n                    setTextPost('');\n                    setTextPostTitle('');\n                    setPosting(false);\n                    setPostDialog(false);\n                }\n                else {\n                    swal(\n                        'Uh Oh!',\n                        'There was an error sending that text post!',\n                        'error',\n                    );\n                    setPosting(false);\n                }\n            }).catch(err => {\n                console.log(err.message);\n                swal(\n                    'Uh Oh!',\n                    'There was an error sending that text post! Please try again.',\n                    'error',\n                );\n                setPosting(false);\n            });\n        }\n    }\n\n    function sendLinkPost() {\n        //This function will handle sending a post with a link URL to the server.\n        setPosting(true); \n        let isValid = linkFormRef.current.isFormValid();\n\n        if(!regularExpressions.urlRegex.test(postLink)) {\n            swal(\n                'Uh Oh!',\n                'You must enter a valid URL to create a link post',\n                'error',\n            ); \n            setPosting(false);\n            return false;\n        }\n\n        else if(textPostTitle === '') {\n            swal(\n                'Uh Oh!',\n                'You must enter a title for all link posts.',\n                'error',\n            );\n            setPosting(false);\n            return false;\n        }\n\n        else if(!isValid) {\n            swal(\n                'Uh Oh!',\n                'Make sure the form is filled out properly',\n                'error',\n            );\n            setPosting(false);\n            return false;\n        }\n        else {\n            let date = new Date();\n            let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n            let month = months[date.getMonth()];\n            let day = date.getDate();\n            let year = date.getFullYear();\n            let dateString = `${month} ${day}, ${year}`;\n            let data = JSON.stringify({\n                text: '',\n                title: textPostTitle,\n                link: postLink,\n                uniqueUserId: props.mainUser.uniqueUserId,\n                username: props.mainUser.username,\n                community: community.name,\n                type: 'link',\n                dateString: dateString,\n                uniquePostId: Date.now() + props.mainUser.username + 'textpost' + 'info' + community.name,\n                context: 'community',\n                privacy: community.communityPrivacy,\n            });\n\n            return axios({\n                method: 'post',\n                url: 'http://10.162.4.11:3001/api/add/community/text/post',\n                data: data,\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            }).then(response => {\n                if(response.data.result === 'success') {\n                    props.dispatch({type: 'visitorPosts/updatePosts', payload: response.data.posts});\n                    swal(\n                        'Great!',\n                        'Successfully uploaded link post!',\n                        'success',\n                    );\n                    setTextPost('');\n                    setTextPostTitle('');\n                    setPosting(false);\n                    setPostDialog(false);\n                }\n                else {\n                    swal(\n                        'Uh Oh!',\n                        'There was an error sending that link post!',\n                        'error',\n                    );\n                    setPosting(false);\n                }\n            }).catch(err => {\n                console.log(err.message);\n                swal(\n                    'Uh Oh!',\n                    'There was an error sending that link post! Please try again.',\n                    'error',\n                );\n                setPosting(false);\n            });\n        }\n    }\n\n    function resizerFunction(file) {\n        //This is a wrapper for the file resizer \n        return new Promise(resolve => {\n            Resizer.imageFileResizer(\n                file,\n                600,\n                600,\n                'JPEG',\n                100,\n                0,\n                uri => {\n                    resolve(uri);\n                },\n                'blob',\n            );\n        });\n    }\n\n    async function handlePhotoChange(e) {\n        //This function will handle passing a photo that is uploaded to the resizer function to rersize the photo\n        let file = e.target.files[0];\n        let resizedPhoto = await resizerFunction(file);\n        setUploadPhoto(resizedPhoto);\n    }\n\n    function handlePhotoUpload() {\n        //Function that will handle sending an uploaded photo to the server after resizing it.\n        //Might need to make some edits here since the photo will be community-based\n        setPhotoUploading(true);\n\n        if(!uploadPhoto) {\n            swal(\n                'Uh Oh!',\n                'You must select a photo to upload!',\n                'error',\n            );\n            setPhotoUploading(false);\n        }\n        else {\n            let data = new Date();\n            let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n            let month = months[data.getMonth()];\n            let day = data.getDate();\n            let year = data.getFullYear();\n            let dateString = `${month} ${day}, ${year}`;\n            let fd = new FormData();\n            fd.append('photo', uploadPhoto, 'photo.jpg');\n            fd.append('caption', photoCaption);\n            fd.append('uniqueUserId', props.mainUser.uniqueUserId);\n            fd.append('uniquePostId', Date.now() + props.mainUser.username + 'photoupload' + props.mainUser.uniqueUserId);\n            fd.append('username', props.mainUser.username);\n            fd.append('dateString', dateString);\n            fd.append('type', 'photo');\n            fd.append('context', 'community');\n            fd.append('link', `http://192.168.0.9:3000/profile#${Date.now()}${props.mainUser.username}photoupload${props.mainUser.uniqueUserId}`);\n            fd.append('community', community.name); //Name of the community that this post belongs to. \n            fd.append('title', '');\n            fd.append('privacy', community.communityPrivacy);\n            fd.append('text', '');\n\n            return axios({\n                method: 'POST',\n                url: 'http://10.162.4.11:3001/api/upload/photo',\n                data: fd,\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                },\n            }).then(response => {\n                if(response.data.posts) {\n                    props.dispatch({type: 'visitorPosts/updatePosts', payload: response.data.posts});\n                    swal(\n                        'Great!',\n                        'Successfully uploaded photo!',\n                        'success',\n                    );\n                    setPhotoCaption('');\n                    setUploadPhoto(null);\n                    setPostDialog(false);\n                    setPhotoUploading(false);\n                }\n                else {\n                    swal(\n                        'Uh Oh!',\n                        'There was an error uploading that photo!',\n                        'error',\n                    );\n                    setPhotoUploading(false);\n                }\n            }).catch(err => {\n                console.log(err.message);\n                swal(\n                    'Uh Oh!',\n                    'There was an error uploading that photo!',\n                    'error',\n                );\n                setPhotoUploading(false);\n            });\n        }\n    }\n\n    function handleVideoChange(e) {\n        //This function will handle setting the uploadVideo variable to the valua of the file. \n        setUploadVideo(e.target.files[0]);\n    }\n\n    function handleVideoUpload() {\n        //Function that will handle sending an uploaded video to the server.\n        setVideoUploading(true);\n\n        if(!uploadVideo) {\n            swal(\n                'Uh Oh!',\n                'You must select a video to upload!',\n                'error',\n            );\n            setVideoUploading(false);\n        }\n        else {\n            let data = new Date();\n            let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n            let month = months[data.getMonth()];\n            let day = data.getDate();\n            let year = data.getFullYear();\n            let dateString = `${month} ${day}, ${year}`;\n            let ext = uploadVideo.name.split('.').pop().toString(); //This will get the extension name of the video \n            ext = 'video.' + ext;\n            let fd = new FormData();\n            fd.append('photo', uploadVideo, ext); //Keep the name \"photo\" for the server upload although it is technically a video!\n            fd.append('caption', videoCaption);\n            fd.append('uniqueUserId', props.mainUser.uniqueUserId);\n            fd.append('uniquePostId', Date.now() + props.mainUser.username + 'videoupload' + props.mainUser.uniqueUserId);\n            fd.append('username', props.mainUser.username);\n            fd.append('dateString', dateString);\n            fd.append('type', 'video');\n            fd.append('context', 'community');\n            fd.append('link', `http://192.168.0.9:3000/profile#${Date.now()}${props.mainUser.username}videoupload${props.mainUser.uniqueUserId}`);\n            fd.append('community', community.name);\n            fd.append('communityPost', true);\n            fd.append('title', '');\n            fd.append('privacy', community.communityPrivacy);\n            fd.append('text', '');\n\n            return axios({\n                method: 'POST',\n                url: 'http://10.162.4.11:3001/api/upload/photo',\n                data: fd,\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                },\n            }).then(response => {\n                if(response.data.posts) {\n                    props.dispatch({type: 'visitorPosts/updatePosts', payload: response.data.posts});\n                    swal(\n                        'Great!',\n                        'Successfully uploaded video!',\n                        'success',\n                    );\n                    setVideoCaption('');\n                    setUploadVideo(null);\n                    setPostDialog(false);\n                    setVideoUploading(false);\n                }\n                else {\n                    swal(\n                        'Uh Oh!',\n                        'There was an error uploading that video!',\n                        'error',\n                    );\n                    setVideoUploading(false);\n                }\n            }).catch(err => {\n                console.log(err.message);\n                swal(\n                    'Uh Oh!',\n                    'There was an error uploading that video!',\n                    'error',\n                );\n                setVideoUploading(false);\n            });\n        }\n    }\n\n    function leaveCommunity() {\n        //This function will remove a member from a community if they are within it. \n        setJoinSending(true);\n        let data = JSON.stringify({\n            username: props.mainUser.username,\n            uniqueUserId: props.mainUser.uniqueUserId,\n            name: community.name,\n        });\n\n        return axios({\n            method: 'POST',\n            url: 'http://10.162.4.11:3001/api/leave/community',\n            data: data,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        }).then(response => {\n            if(response.data.result === 'success') {\n                swal(\n                    'Great!',\n                    'You have successfully left this community',\n                    'success',\n                );\n                setCommunity(response.data.community);\n                setJoinSending(false);\n            }\n            else {\n                swal(\n                    'Uh Oh!',\n                    'There was an error leaving this community! Please try again.',\n                    'error',\n                );\n                setJoinSending(false);\n            }\n        }).catch(err => {\n            console.log(err.message);\n            swal(\n                'Uh Oh!',\n                'There was an error leaving this community! Please try again.',\n                'error',\n            );\n            setJoinSending(false);\n        });\n    }\n\n    if(community !== null) {\n        return (\n            <Grid \n                className={classes.root} \n                container \n            >\n                <Grid \n                    item \n                    xs={12} \n                    className={classes.centerContent} \n                >\n                    <Hidden \n                        smDown \n                    >\n                        <Avatar \n                            className={classes.avatarLg} \n                            src={`http://10.162.4.11:3001/api/get-photo/${community.avatar}`}\n                            alt={`${community.name} avatar`}\n                            title={`${community.name} avatar`}\n                            variant='square'\n                        />\n                    </Hidden>\n                    <Hidden \n                        mdUp \n                    >\n                        <Avatar \n                            src={`http://10.162.4.11:3001/api/get-photo/${community.avatar}`}\n                            className={classes.avatarSm} \n                            title={`${community.name} avatar`}\n                            alt={`${community.name} avatar`}\n                            variant='square'\n                        />\n                    </Hidden>\n                </Grid>\n                {/* The grid below will store the name of the community */}\n                <Grid \n                    item \n                    xs={12} \n                    className={classes.nameGrid} \n                >\n                    <Typography \n                        variant='h6' \n                        component='h6' \n                        align='center' \n                    >\n                        {community.name}\n                    </Typography>\n                </Grid>\n                {/* End of the grid to display the community name */}\n                {/* Below is the Grid to display the title of the community */}\n                <Grid \n                    item \n                    xs={12}\n                    className={classes.nameGrid} \n                >\n                    <Typography \n                        variant='body1' \n                        component='p'\n                        justify='left' \n                    >\n                        {community.title}\n                    </Typography>\n                </Grid>\n                {/* End of the Grid to display the title of the community */}\n                {/* Now create a button for the user if they are logged in, not a member, and the community is public */}\n                <Grid \n                    item \n                    xs={12}\n                    style={{\n                        margin: 'auto',\n                        textAlign: 'center',\n                        marginTop: 20,\n                    }}\n                >\n                    {/* Button if the user is logged in, not a member, and the community is public */}\n                    {(props.mainUser !== null && !_.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && community.communityPrivacy === 'public' && community.moderator.uniqueUserId !== props.mainUser.uniqueUserId) &&\n                        <Button \n                            color='primary' \n                            variant='contained' \n                            onClick={publicJoin}\n                            disabled={joinSending}\n                        >\n                            {joinSending ? <CircularProgress color='primary' /> : 'join'}\n                        </Button>\n                    }\n                    {/* Below is the Button if the user is logged in, not a member, and the community is private */}\n                    {(props.mainUser !== null && !_.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && community.communityPrivacy === 'private' && community.moderator.uniqueUserId !== props.mainUser.uniqueUserid) &&\n                        <Button \n                            color='primary' \n                            variant='contained' \n                            onClick={privateJoinRequest}\n                            disabled={joinSending}\n                        >\n                            {joinSending ? <CircularProgress color='primary' /> : 'join'}\n                        </Button>\n                    }\n                    {(props.mainUser !== null && _.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && community.moderator.uniqueUserId !==  props.mainUser.uniqueUserId) &&\n                        <Button \n                            color='primary'\n                            variant='outlined' \n                            onClick={leaveCommunity}\n                            disabled={joinSending}\n                        >\n                            {joinSending ? <CircularProgress color='primary' /> : 'leave'}\n                        </Button>\n                    }\n                    {/* Below, we will add a button to route someone who is not signed up or logged in to the sign up page */}\n                    {props.mainUser === null &&\n                        <Button \n                            color='primary' \n                            onClick={e => history.push('/')}\n                        >\n                            Sign up or log in!\n                        </Button>\n                    }\n                    {(props.mainUser === null && community.communityPrivacy === 'private') &&\n                        <Grid \n                            item \n                            xs={12} \n                        >\n                            <Typography \n                                variant='h6' \n                                component='h6' \n                                align='center' \n                            >\n                                This community is private\n                            </Typography>\n                        </Grid>\n                    }\n                    {(props.mainUser !== null && !_.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && community.communityPrivacy === 'private') && \n                        <Grid \n                            item \n                            xs={12} \n                        >\n                            <Typography \n                                variant='h6' \n                                component='h6' \n                                align='center' \n                            >\n                                This community is private\n                            </Typography>\n                        </Grid>\n                    }\n                    {/*Now I will have two buttons in two grids for members of the community to either chat or post content to the community */}\n                    {(props.mainUser !== null && _.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId)) &&\n                        <div>\n                            <Grid \n                                item \n                                xs={12} \n                                style={{\n                                    marginTop: 20,\n                                    marginBottom: 20,\n                                }}\n                            >\n                                <Button \n                                    variant='contained' \n                                    color='primary' \n                                    style={{\n                                        margin: 'auto',\n                                    }}\n                                    onClick={e => history.push(`/community/chat/${community.name}`)}\n                                >\n                                    Chat \n                                </Button>\n                            </Grid>\n                            <Grid \n                                item \n                                xs={12} \n                            >\n                                <Button \n                                    color='primary' \n                                    variant='outlined' \n                                    onClick={e => setPostDialog(true)}\n                                >\n                                    Post \n                                </Button>\n                            </Grid>\n                        </div>\n                    }\n                    {/* This is the end of the two Grids for a the chat Button and the Post button */}\n                    {/*Below create the Dialog that will open when the user tries to make a post. Only show when a user is part of the community */}\n                </Grid>\n                {(props.mainUser !== null && _.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId)) &&\n                    <Grid \n                        item \n                        xs={12} \n                    >\n                        <Dialog \n                            open={postDialog} \n                            fullScreen\n                        >\n                            <DialogContent>\n                                <AppBar \n                                    color='primary'\n                                    hidden={posting}\n                                >\n                                    <Icon \n                                        path={mdiClose} \n                                        size={1} \n                                        title='Dialog close' \n                                        style={{\n                                            cursor: 'pointer'\n                                        }}\n                                        onClick={() => setPostDialog(false)}\n                                    />\n                                    <Tabs \n                                        value={curTab}\n                                        onChange={(e, newVal) => setTab(newVal)} \n                                        centered\n                                    >\n                                        <Tab \n                                            {...a11yProps(0)} \n                                            label='Text' \n                                            disabled={posting}\n                                        />\n                                        <Tab \n                                            {...a11yProps(1)} \n                                            label='Photo' \n                                            disabled={posting}\n                                        />\n                                        <Tab \n                                            {...a11yProps(2)}\n                                            label='Video' \n                                            disabled={posting}\n                                        />\n                                        <Tab \n                                            {...a11yProps(3)}\n                                            label='Link'\n                                            disabled={posting} \n                                        />\n                                    </Tabs>\n                                </AppBar>\n                                <TabPanel \n                                    index={0}\n                                    value={curTab}\n                                >\n                                    <ValidatorForm\n                                        ref={textFormRef} \n                                        onSubmit={e => e.preventDefault()}\n                                    >\n                                        <Typography \n                                            variant='body1' \n                                            component='small' \n                                            color={textPostTitle.length > 75 ? 'error' : 'default'}\n                                            align='center' \n                                        >\n                                            {textPostTitle.length}/75\n                                        </Typography>\n                                        <TextValidator \n                                            label='Post title'\n                                            placeholder='Enter a title for your post of 75 characters or less'\n                                            value={textPostTitle}\n                                            onChange={e => setTextPostTitle(e.target.value)}\n                                            helperText='Enter a title for this text post'\n                                            validators={['titleLength']}\n                                            errorMessages={['Title can only be up to 75 characters']}\n                                            InputLabelProps={{\n                                                shrink: true,\n                                            }}\n                                            color='primary'\n                                            variant='outlined'\n                                            fullWidth\n                                        />\n                                        <Typography \n                                            style={{\n                                                marginTop: 30,\n                                            }}\n                                            variant='body1' \n                                            component='small'\n                                            color={textPost.length > 3000 ? 'error' : 'default'}\n                                            align='center' \n                                        >\n                                            {textPost.length}/3000\n                                        </Typography>\n                                        <TextValidator \n                                            label='Text post'\n                                            placeholder='Share a text post!'\n                                            value={textPost}\n                                            onChange={e => setTextPost(e.target.value)}\n                                            helperText='Enter a text post of up to 3,000 characters long!'\n                                            validators={['requiredText', 'textLength']}\n                                            errorMessages={['Must enter some text!', 'Text post cannot be more than 3,000 characters long!']}\n                                            variant='outlined' \n                                            InputLabelProps={{\n                                                shrink: true,\n                                            }}\n                                            color='primary' \n                                            variant='outlined' \n                                            rows={3}\n                                            multiline \n                                            required \n                                            fullWidth \n                                        />\n                                        <Button \n                                            variant='contained' \n                                            color='primary' \n                                            onClick={sendTextPost}\n                                            disabled={posting}\n                                        >\n                                            {posting ? <CircularProgress color='primary' /> : 'Upload'}\n                                        </Button>\n                                    </ValidatorForm>\n                                </TabPanel>\n                                <TabPanel \n                                    index={1} \n                                    value={curTab} \n                                >\n                                    <Typography \n                                        variant='h6' \n                                        component='h6' \n                                    >\n                                        Post a photo\n                                    </Typography>\n                                    <label \n                                        html-for='photoPost' \n                                    >\n                                        <input \n                                            className={classes.input}\n                                            type='file'\n                                            accept='image/jpg, image/jpeg, image/png' \n                                            id='photoPost'\n                                            name='photoPost' \n                                            onChange={handlePhotoChange} \n                                            required \n                                        />\n                                        <Button \n                                            variant='contained' \n                                            color='primary' \n                                            component='span' \n                                            aria-label='Photo picker button'\n                                        >\n                                            <Icon \n                                                path={mdiCamera} \n                                                size={1} \n                                                title='Photo upload icon' \n                                                aria-label='Photo upload icon' \n                                            />\n                                        </Button>\n                                    </label>\n                                    <br/>\n                                    <TextField \n                                        label='Caption'\n                                        placeholder='Enter a caption for your photo' \n                                        variant='outlined' \n                                        color='primary' \n                                        value={photoCaption} \n                                        onChange={e => setPhotoCaption(e.target.value)} \n                                        InputLabelProps={{\n                                            shrink: true,\n                                        }}\n                                        rows={4}\n                                        multiline\n                                        required\n                                        style={{\n                                            marginTop: 40,\n                                        }}\n                                        fullWidth\n                                    />\n                                    <br/>\n                                    <Button \n                                        style={{\n                                            marginTop: 30,\n                                        }}\n                                        color='primary' \n                                        variant='outlined' \n                                        onClick={handlePhotoUpload}\n                                        disabled={photoUploading}\n                                    >\n                                        {photoUploading ? <CircularProgress color='primary' /> : 'Upload Photo'}\n                                    </Button>\n                                </TabPanel>\n                                <TabPanel \n                                    index={2} \n                                    value={curTab} \n                                >\n                                    <Typography \n                                        variant='h6' \n                                        component='h6' \n                                    >\n                                        Post a video\n                                    </Typography>\n                                    <label \n                                        html-for='videoPost' \n                                    >\n                                        <input \n                                            className={classes.input}\n                                            type='file'\n                                            accept='video/mp4, video/mov'\n                                            id='videoPost'\n                                            name='videoPost' \n                                            onChange={handleVideoChange} \n                                            required \n                                        />\n                                        <Button \n                                            variant='contained' \n                                            color='primary' \n                                            component='span' \n                                            aria-label='Video picker button'\n                                        >\n                                            <Icon \n                                                path={mdiVideo} \n                                                size={1} \n                                                title='Video upload icon' \n                                                aria-label='Video upload icon' \n                                            />\n                                        </Button>\n                                    </label>\n                                    <br/>\n                                    <TextField \n                                        label='Caption'\n                                        placeholder='Enter a caption for your video' \n                                        variant='outlined' \n                                        color='primary' \n                                        value={videoCaption} \n                                        onChange={e => setVideoCaption(e.target.value)} \n                                        InputLabelProps={{\n                                            shrink: true,\n                                        }}\n                                        rows={4}\n                                        multiline\n                                        required\n                                        style={{\n                                            marginTop: 40,\n                                        }}\n                                        fullWidth\n                                    />\n                                    <br/>\n                                    <Button \n                                        style={{\n                                            marginTop: 30,\n                                        }}\n                                        color='primary' \n                                        variant='outlined' \n                                        onClick={handleVideoUpload}\n                                        disabled={videoUploading}\n                                    >\n                                        {videoUploading ? <CircularProgress color='primary' /> : 'Upload Video'}\n                                    </Button>\n                                </TabPanel>\n                                <TabPanel \n                                    index={3}\n                                    value={curTab}\n                                >\n                                    <ValidatorForm\n                                        ref={linkFormRef} \n                                        onSubmit={e => e.preventDefault()}\n                                    >\n                                        <Typography \n                                            variant='body1' \n                                            component='small' \n                                            color={textPostTitle.length > 75 ? 'error' : 'default'}\n                                            align='center' \n                                        >\n                                            {textPostTitle.length}/75\n                                        </Typography>\n                                        <TextValidator \n                                            label='Post title'\n                                            placeholder='Enter a title for your post of 75 characters or less'\n                                            value={textPostTitle}\n                                            onChange={e => setTextPostTitle(e.target.value)}\n                                            helperText='Enter a title for this text post'\n                                            validators={['requiredText', 'titleLength']}\n                                            errorMessages={['Must enter a title for all link posts', 'Title can only be up to 75 characters']}\n                                            InputLabelProps={{\n                                                shrink: true,\n                                            }}\n                                            color='primary'\n                                            variant='outlined'\n                                            fullWidth\n                                        />\n                                        <br></br>\n                                        <TextValidator \n                                            label='Link'\n                                            placeholder='Share a valid link!'\n                                            value={postLink}\n                                            onChange={e => setPostLink(e.target.value)}\n                                            helperText='Enter a valid url link.'\n                                            validators={['requiredText', 'validLink']}\n                                            errorMessages={['Must enter a link!', 'The link that you enter must be formatted properly!']}\n                                            variant='outlined' \n                                            InputLabelProps={{\n                                                shrink: true,\n                                            }}\n                                            color='primary' \n                                            variant='outlined'\n                                            required \n                                            fullWidth \n                                        />\n                                        <Button \n                                            variant='contained' \n                                            color='primary' \n                                            onClick={sendLinkPost}\n                                            disabled={posting}\n                                        >\n                                            {posting ? <CircularProgress color='primary' /> : 'Upload'}\n                                        </Button>\n                                    </ValidatorForm>\n                                </TabPanel>\n                            </DialogContent>\n                        </Dialog>\n                    </Grid>\n                }\n                {/*End of the Grid for the dialog box for posts if the user is logged in and a member of the community */}\n                {/* Below add the tabpanel for posts, about, and settings (only render settings if moderator is visiting page) */}\n                {(community.communityPrivacy === 'public' || (props.mainUser !== null && _.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId))) &&\n                    <Grid \n                        item \n                        xs={12} \n                    >\n                        <Paper \n                            className={classes.paper}\n                            style={{\n                                marginTop: 10,\n                            }}\n                        >\n                            <Tabs \n                                value={curTab2} \n                                onChange={(e, newVal) => setTab2(newVal)}\n                                centered\n                                style={{\n                                    color: 'rgb(255, 255, 255)',\n                                }}\n                            >\n                                <Tab \n                                    label='Posts' \n                                    {...a11yProps(0)} \n                                />\n                                <Tab \n                                    label='About' \n                                    {...a11yProps(1)} \n                                />\n                                {(props.mainUser !== null && community.moderator.uniqueUserId === props.mainUser.uniqueUserId) &&\n                                    <Tab \n                                        label='Settings' \n                                        {...a11yProps(2)} \n                                    />\n                                }\n                            </Tabs>\n                        </Paper>\n                        {/* Now begin the tab for posts. Have the CommunityPostsCard ONLY for users who are logged in */}\n                        <TabPanel \n                            value={0} \n                            index={curTab2} \n                        >\n                            {props.posts.length < 1 && \n                                <Typography \n                                    variant='h6' \n                                    component='h6' \n                                    align='center' \n                                >\n                                    No posts \n                                </Typography>\n                            }\n                            {props.posts.length > 0 && \n                                <div>\n                                    {props.posts.map((post, index) => (\n                                        <div \n                                            style={{\n                                                textAlign: 'left',\n                                            }}\n                                            key={index}\n                                        >\n                                            {props.mainUser !== null &&       \n                                                <CommunityPostsCard\n                                                    post={post}\n                                                    id={post.uniquePostId}\n                                                    moderator={props.mainUser.uniqueUserId === community.moderator.uniqueUserId}\n                                                />\n                                            }\n                                            {props.mainUser === null &&\n                                                <NonUserCommunityPostsCard \n                                                    post={post}\n                                                    id={post.uniquePostId}\n                                                />\n                                            }\n                                            {index < props.posts.length - 1 &&\n                                                <div \n                                                    style={{\n                                                        marginBottom: 20,\n                                                    }}\n                                                />\n                                            }\n                                        </div>\n                                    ))}\n                                </div>\n                            }\n                        </TabPanel>\n                        {/* This is the end of the tab for posts. Now, we need a tab for the about section of the community*/}\n                        <TabPanel \n                            value={1}\n                            index={curTab2} \n                        >\n                            <div \n                                style={{\n                                    margin: 'auto',\n                                    maxWidth: 600,\n                                    textAlign: 'center',\n                                }}\n                            >\n                                <List>\n                                    {/* First list item that shows the community moderator */}\n                                    <ListItem\n                                        style={{\n                                            cursor: 'pointer',\n                                        }}\n                                        onClick={e => history.push(`/geouser/${community.moderator.uniqueUserId}`)}\n                                        alignItems='center'\n                                    >\n                                        <ListItemAvatar>\n                                            <Avatar \n                                                src={`http://10.162.4.11:3001/api/get/avatar/by/id/${community.moderator.uniqueUserId}`}\n                                                title={`${community.moderator.username}`}\n                                                alt={`${community.moderator.username}`} \n                                                style={{\n                                                    cursor: 'pointer',\n                                                }}\n                                            />\n                                        </ListItemAvatar>\n                                        <ListItemText \n                                            primary={\n                                                <div>\n                                                    <Typography \n                                                        variant='h6' \n                                                        component='h6' \n                                                        align='center'\n                                                    >\n                                                        Moderator \n                                                    </Typography>\n                                                    <Typography \n                                                        variant='subtitle1' \n                                                        component='span' \n                                                        color='textSecondary'\n                                                        align='center'\n                                                    >\n                                                        {community.moderator.username}\n                                                    </Typography>\n                                                </div>\n                                            }\n                                        />\n                                    </ListItem>\n                                    <Divider />\n                                    {/* End of the community moderator list item */}\n                                    {/* Begin the ListItem for the number of members in the community */}\n                                    <ListItem>\n                                        <ListItemText \n                                            primary={\n                                                <div>\n                                                    <Typography \n                                                        variant='body1' \n                                                        component='p'\n                                                        align='center' \n                                                    >\n                                                        {community.members.length} members \n                                                    </Typography>\n                                                </div>\n                                            }\n                                        />\n                                    </ListItem>\n                                    {/* End of ListItem showing the number of users in a community */}\n                                </List>\n                            </div>\n                        </TabPanel>\n                    </Grid>\n                }\n                {/* End of the Grid for the main sections of the community page */}\n            </Grid>\n        );\n    }\n    else {\n        //If the community is null, simply return a Backdrop with a CircularProgress inside \n        return (\n            <Backdrop \n                open={true} \n            >\n                <CircularProgress \n                    color='primary' \n                />\n            </Backdrop>\n        );\n    }  \n}\n\nfunction mapStateToProps(state) {\n    return {\n        mainUser: state.userReducer.user,\n        primary: state.userThemeReducer.primary,\n        posts: state.visitorPostsReducer.posts,\n    };\n}\n\nexport default connect(mapStateToProps)(Community);"]},"metadata":{},"sourceType":"module"}