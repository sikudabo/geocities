{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"c:\\\\Users\\\\bobma\\\\Downloads\\\\excite-app\\\\src\\\\components\\\\BuildCommunity.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport Button from '@material-ui/core/Button';\nimport CameraIcon from '@material-ui/icons/CameraAlt';\nimport swal from 'sweetalert';\nimport axios from 'axios';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Resizer from 'react-image-file-resizer';\nimport { SwatchesPicker } from 'react-color';\nimport { useHistory } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nconst useStyles = makeStyles(() => ({\n  root: {\n    marginTop: 100\n  },\n  card: {\n    margin: 'auto',\n    maxWidth: 450\n  },\n  topField: {\n    marginTop: 20\n  },\n  fieldMarg: {\n    marginTop: 30\n  },\n  topMarg: {\n    marginTop: 10\n  },\n  input: {\n    display: 'none'\n  }\n}));\nconst communityTopics = ['Accounting', 'Activism', 'Animals And Pets', 'Art', 'Astrology', 'Athletes', 'Aviation', 'Bars', 'Baseball', 'Beauty And Makeup', 'Biking', 'Black Lives Matter', 'Brands/Products', 'Business', 'Careers', 'Cars And Motor Vehicles', 'Celebrity', 'College Baseball', 'College Basketball', 'College Football', 'Computer Science', 'Crafts And DYI', 'Crossfit', 'Crypto', 'Culture Race And Ethnicity', 'Dancing', 'Day Trading', 'Documentaries', 'Economics', 'Education', 'Electronics', 'Entertainment', 'Ethics And Philosophy', 'Family And Relationships', 'Fashion', 'Filming', 'Fitness And Nutrition', 'Food And Drink', 'Funny/Humor', 'Gaming', 'Gender', 'GeoCities', 'Greek Life', 'Hair', 'Health', 'History', 'Hobbies', 'Hockey', 'Home And Garden', 'Investing', 'International Culture', 'Internet Culture', 'Intramural Sports', 'Latin Culture', 'Marijuna', 'Marketplace And Deals', 'Mature Themes And Adult Content', 'Medical And Mental Health', 'Meditation', \"Men's Health\", 'Military', 'Movies', 'Music', 'NBA', 'NFL', 'NHL', 'Nursing', 'Only Fans', 'Outdoors And Nature', 'Partying', 'People', 'Personal Connections', 'Photography', 'Podcasts And Streamers', 'Politics', 'Pop Culture', 'Programming', 'Public Policy', 'Reading Writing And Literature', 'Religion And Spirituality', 'Robinhood Trading', 'Rowing', 'Running', 'Science', 'Sexual Health And Orientation', 'Side Hustle', 'Sports', 'Soccer', 'Social Justice', 'Software Engineering', 'Streaming', 'Tabletop Games', 'Television', 'Television Personalities', 'Theatre', 'Track & Field', 'Volleyball', \"Women's Health\", 'World News', 'Working Out/Gym', 'Work/Labor'];\n\nfunction BuildCommunity(props) {\n  _s();\n\n  const classes = useStyles(); //Custom styles\n\n  const history = useHistory(); //History API access\n\n  const formRef = useRef(null); //Form reference\n\n  const [name, setName] = useState(''); //State for community name. \n\n  const [title, setTitle] = useState(''); //State for community title (100 character max).\n\n  const [topics, setTopics] = useState([]); //Community topics.\n\n  const [communityTheme, setCommunityTheme] = useState('#00143C'); //Community theme color. Default to dark blue.\n\n  const [avatar, setAvatar] = useState(null); //Community profile image. \n\n  const [description, setDescription] = useState(''); //Community description string. \n\n  const [open, setOpen] = useState(false);\n  const regularExpressions = {\n    nameExpression: /^\\w+$/,\n    alphaStartRe: /^[A-Za-z]+$/\n  }; //Regular expressions for a valid community name with letters, numbers, and underscores, along with another regex for the community name to start with a letter.\n\n  useEffect(() => {\n    //First, check to see if the user is logged into GeoCities. Redirect them to login page if not. \n    if (props.mainUser === null) {\n      swal('Uh Oh!', 'You must be logged in to build a community!', 'error');\n      history.push('/');\n    } else {\n      props.dispatch({\n        type: 'ThemeChange',\n        payload: props.mainUser.profileTheme\n      }); //Update profile theme.\n    } //Now add some form validation rules. \n    //Rule that the name (or title) not be empty. \n\n\n    ValidatorForm.addValidationRule('nameRequired', v => {\n      if (v.trim() === '') {\n        return false;\n      } else {\n        return true;\n      }\n    }); //Validation rule that the length of a name for a community be between 6 and 30 characters\n\n    ValidatorForm.addValidationRule('nameLength', v => {\n      if (v.length < 6) {\n        return false;\n      } else if (v.length > 50) {\n        return false;\n      } else {\n        return true;\n      }\n    }); //Validation rule that the title of a community be between 10 and 75 characters \n\n    ValidatorForm.addValidationRule('titleLength', v => {\n      if (v.length < 10) {\n        return false;\n      } else if (v.length > 75) {\n        return false;\n      } else {\n        return true;\n      }\n    }); //The rule below ensures that the name is valid and follows regex rules.\n\n    ValidatorForm.addValidationRule('nameRe', v => {\n      if (!regularExpressions.nameExpression.test(v)) {\n        return false;\n      } else {\n        return true;\n      }\n    }); //The rule below ensures the name starts with an alpha character \n\n    ValidatorForm.addValidationRule('alphaStart', v => {\n      if (!regularExpressions.alphaStartRe.test(v.slice(0, 1))) {\n        return false;\n      } else {\n        return true;\n      }\n    }); //The rule below ensures that the community description is at least 10 characters and at most 300. \n\n    ValidatorForm.addValidationRule('descriptionLength', v => {\n      if (v.length < 10) {\n        return false;\n      } else if (v.length > 300) {\n        return false;\n      } else {\n        return true;\n      }\n    });\n  }, []);\n\n  function preventSpaces(e) {\n    //This function prevents spaces in the community name \n    if (e.keyCode === 32) {\n      e.preventDefault();\n      return false;\n    }\n  }\n\n  function handleTopicsChange(e) {\n    //This function will add topics to the topics array. It will remove the topic if it is unchecked.\n    if (e.target.checked) {\n      if (topics.length <= 9) {\n        setTopics(topics => [...topics, e.target.value]);\n      } else {\n        swal('Uh Oh!', 'You can only select up to 10 topics!', 'error');\n      }\n    } else if (!e.target.checked) {\n      setTopics(topics.filter(topic => topic !== e.target.value));\n    }\n  }\n\n  function resizerFunction(file) {\n    //This is a wrapper for the file resizer \n    return new Promise(resolve => {\n      Resizer.imageFileResizer(file, 600, 600, 'JPEG', 100, 0, uri => {\n        resolve(uri);\n      }, 'blob');\n    });\n  }\n\n  async function handleAvatarChange(e) {\n    //This function will handle storing an avatar in the avatar state variable and resizing it. \n    let file = e.target.files[0];\n    let resizedAvatar = await resizerFunction(file);\n    setAvatar(resizedAvatar);\n  }\n\n  async function buildCommunity() {\n    setOpen(true);\n  }\n\n  if (props.mainUser !== null) {\n    //Return this layout if the user is signed in. \n    return /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(Backdrop, {\n        open: open,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n          color: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: classes.card,\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"h6\",\n            align: \"center\",\n            children: \"Build a GeoCities community!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            component: \"small\",\n            className: classes.topMarg,\n            align: \"center\",\n            children: \"GeoCities allows you to build interactive communities around topics of interest. As the community builder, you will also be the community moderator. You will have the ability to block or add users to the community, alter community settings, delete posts and comments, manage the chatroom, and set community rules. You can also decide if the community posts should be publicly available or only available to members of the community. We encourage you to make the community public to enhance engagement amongst community members. You can NEVER change the name of the community once you select a name.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ValidatorForm, {\n            ref: formRef,\n            onSubmit: e => e.preventDefault(),\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              component: \"p\",\n              color: name.length < 6 || name.length > 50 ? 'error' : 'default',\n              style: {\n                marginTop: 20\n              },\n              align: \"center\",\n              children: [name.length, \"/50\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextValidator, {\n              label: \"Community name\",\n              placeholder: \"Select a community name | e.g. (Colts_Fans_Community)\",\n              helperText: \"The community name must start with a letter and can only contain letters, numbers, and underscores. Community names must be between 6 and 50 characters long and cannot contain spaces. You can NEVER change the name of a community, so make sure you select the proper name!\",\n              value: name,\n              onChange: e => setName(e.target.value),\n              validators: ['nameRequired', 'nameLength', 'nameRe', 'alphaStart'],\n              errorMessages: ['Must enter a community name!', 'Community name must be between 6 and 50 characters long!', 'Name can only contain letters, numbers, and underscores, and it must start with a letter!', 'Community name must start with a letter!'],\n              onKeyDown: preventSpaces,\n              InputLabelProps: {\n                shrink: true\n              },\n              variant: \"outlined\",\n              fullWidth: true,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              component: \"p\",\n              className: classes.toMarg,\n              align: \"center\",\n              color: title.length < 10 || title.length > 75 ? 'error' : 'default',\n              children: [title.length, \"/75\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextValidator, {\n              label: \"Community title\",\n              placeholder: \"Select a title for this community (required)\",\n              value: title,\n              onChange: e => setTitle(e.target.value),\n              helperText: \"The community title will display at the top of your community page. This can be a short description of what the community is about and must be between 10 and 75 characters.\",\n              validators: ['nameRequired', 'titleLength'],\n              errorMessages: ['A title for the community is required!', 'The community title must be between 10 and 75 characters!'],\n              InputLabelProps: {\n                shrink: true\n              },\n              variant: \"outlined\",\n              fullWidth: true,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n              className: classes.topMarg,\n              component: \"fieldset\",\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                component: \"legend\",\n                children: \"Select at least 1 community topic. You can choose up to 10 (required)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n                column: true,\n                children: communityTopics.map((topic, index) => /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  value: topic,\n                  onChange: handleTopicsChange,\n                  label: topic,\n                  labelPlacement: \"end\",\n                  control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                    color: \"primary\",\n                    checked: topics.includes(topic)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 328,\n                    columnNumber: 49\n                  }, this)\n                }, index.toString(), false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.topMarg,\n              variant: \"body1\",\n              component: \"p\",\n              color: description.length < 10 || description.length > 300 ? 'error' : 'default',\n              align: \"center\",\n              children: [description.length, \"/300\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextValidator, {\n              className: classes.topMarg,\n              label: \"Community description\",\n              placeholder: \"Write a brief this community (required)\",\n              helperText: \"The community description states what the community is about. It must be between 10 and 300 characters!\",\n              InputLabelProps: {\n                shrink: true\n              },\n              validators: ['nameRequired', 'descriptionLength'],\n              errorMessages: ['Must enter a community description!', 'The community description must be between 10 and 300 characters long!'],\n              value: description,\n              onChange: e => setDescription(e.target.value),\n              variant: \"outlined\",\n              rows: 3,\n              multiline: true,\n              required: true,\n              fullWidth: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.topMarg,\n              variant: \"body1\",\n              component: \"p\",\n              children: \"Select a theme color for this community!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(SwatchesPicker, {\n              color: communityTheme,\n              onChange: color => setCommunityTheme(color.hex),\n              colors: [['#00143C', '#2471A3', '#3498DB'], ['#641E16', '#C0392B', '#E74C3C'], ['#0E6655', '#45B39D', '#58D68D'], ['#5B2C6F', '#8E44AD', '#C39BD3'], ['#BA4A00', '#DC7633', '#E67E22'], ['#000000', '#34495E', '#7F8C8D']]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.topMarg,\n              variant: \"body1\",\n              component: \"p\",\n              children: \"Select a community avatar picture!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: classes.topMarg,\n              \"html-for\": \"avatar\",\n              style: {\n                margin: 'auto'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: classes.input,\n                id: \"avatar\",\n                name: \"avatar\",\n                type: \"file\",\n                accept: \"image/jpeg, image/jpg, image/png\",\n                onChange: handleAvatarChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                component: \"span\",\n                color: \"primary\",\n                variant: \"contained\",\n                children: /*#__PURE__*/_jsxDEV(CameraIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                margin: 'auto',\n                textAlign: 'center'\n              },\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                color: \"primary\",\n                onClick: buildCommunity,\n                children: \"Build community\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }, this);\n  } else {\n    //If the mainUser is null, simply return a circular progress until we load the user, or redirect to the log in page. \n\n    /*#__PURE__*/\n    _jsxDEV(Backdrop, {\n      open: true,\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n        color: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 9\n    }, this);\n  }\n}\n\n_s(BuildCommunity, \"4Fx7an9IXqOJFCGwCyJIGB0vlEs=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = BuildCommunity;\n\nfunction mapStateToProps(state) {\n  return {\n    mainUser: state.userReducer.user,\n    primary: state.userThemeReducer.primary\n  };\n}\n\nexport default connect(mapStateToProps)(BuildCommunity);\n\nvar _c;\n\n$RefreshReg$(_c, \"BuildCommunity\");","map":{"version":3,"sources":["c:/Users/bobma/Downloads/excite-app/src/components/BuildCommunity.js"],"names":["React","useState","useEffect","useRef","Grid","Card","CardContent","Typography","ValidatorForm","TextValidator","Checkbox","FormControl","FormLabel","FormControlLabel","FormGroup","Button","CameraIcon","swal","axios","Backdrop","CircularProgress","Resizer","SwatchesPicker","useHistory","connect","makeStyles","useStyles","root","marginTop","card","margin","maxWidth","topField","fieldMarg","topMarg","input","display","communityTopics","BuildCommunity","props","classes","history","formRef","name","setName","title","setTitle","topics","setTopics","communityTheme","setCommunityTheme","avatar","setAvatar","description","setDescription","open","setOpen","regularExpressions","nameExpression","alphaStartRe","mainUser","push","dispatch","type","payload","profileTheme","addValidationRule","v","trim","length","test","slice","preventSpaces","e","keyCode","preventDefault","handleTopicsChange","target","checked","value","filter","topic","resizerFunction","file","Promise","resolve","imageFileResizer","uri","handleAvatarChange","files","resizedAvatar","buildCommunity","shrink","toMarg","map","index","includes","toString","color","hex","textAlign","mapStateToProps","state","userReducer","user","primary","userThemeReducer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport Button from '@material-ui/core/Button';\r\nimport CameraIcon from '@material-ui/icons/CameraAlt';\r\nimport swal from 'sweetalert';\r\nimport axios from 'axios'; \r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress'; \r\nimport Resizer from 'react-image-file-resizer';\r\nimport { SwatchesPicker } from 'react-color';\r\nimport { useHistory }  from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    root: {\r\n        marginTop: 100,\r\n    },\r\n    card: {\r\n        margin: 'auto',\r\n        maxWidth: 450,\r\n    },\r\n    topField: {\r\n        marginTop: 20,\r\n    },\r\n    fieldMarg: {\r\n        marginTop: 30,\r\n    },\r\n    topMarg: {\r\n        marginTop: 10,\r\n    },\r\n    input: {\r\n        display: 'none',\r\n    },\r\n}));\r\n\r\nconst communityTopics = [\r\n    'Accounting', 'Activism', 'Animals And Pets', 'Art', 'Astrology', 'Athletes', 'Aviation', 'Bars', 'Baseball', 'Beauty And Makeup', 'Biking', 'Black Lives Matter', 'Brands/Products', 'Business', 'Careers', 'Cars And Motor Vehicles', \r\n    'Celebrity', 'College Baseball', 'College Basketball', 'College Football', 'Computer Science', 'Crafts And DYI', 'Crossfit', 'Crypto', 'Culture Race And Ethnicity', 'Dancing', 'Day Trading', 'Documentaries','Economics',\r\n    'Education', 'Electronics', 'Entertainment', 'Ethics And Philosophy', 'Family And Relationships', 'Fashion', 'Filming', 'Fitness And Nutrition', 'Food And Drink', 'Funny/Humor',\r\n    'Gaming', 'Gender', 'GeoCities', 'Greek Life', 'Hair', 'Health', 'History', 'Hobbies', 'Hockey', 'Home And Garden', 'Investing', 'International Culture', 'Internet Culture', 'Intramural Sports', 'Latin Culture', 'Marijuna', 'Marketplace And Deals',\r\n    'Mature Themes And Adult Content', 'Medical And Mental Health', 'Meditation', \"Men's Health\", 'Military', 'Movies', 'Music', 'NBA', 'NFL', 'NHL', 'Nursing', 'Only Fans',\r\n    'Outdoors And Nature', 'Partying', 'People', 'Personal Connections', 'Photography', 'Podcasts And Streamers', 'Politics', 'Pop Culture', 'Programming', 'Public Policy', 'Reading Writing And Literature', \r\n    'Religion And Spirituality', 'Robinhood Trading', 'Rowing', 'Running', 'Science', 'Sexual Health And Orientation', 'Side Hustle', 'Sports', 'Soccer', 'Social Justice', 'Software Engineering', 'Streaming', 'Tabletop Games', 'Television', 'Television Personalities', 'Theatre', 'Track & Field', 'Volleyball',\r\n    \"Women's Health\", 'World News', 'Working Out/Gym', 'Work/Labor',\r\n];\r\n\r\nfunction BuildCommunity(props) {\r\n    const classes = useStyles(); //Custom styles\r\n    const history = useHistory(); //History API access\r\n    const formRef = useRef(null); //Form reference\r\n    const [name, setName] = useState(''); //State for community name. \r\n    const [title, setTitle] = useState(''); //State for community title (100 character max).\r\n    const [topics, setTopics] = useState([]); //Community topics.\r\n    const [communityTheme, setCommunityTheme] = useState('#00143C'); //Community theme color. Default to dark blue.\r\n    const [avatar, setAvatar] = useState(null); //Community profile image. \r\n    const [description, setDescription] = useState(''); //Community description string. \r\n    const [open, setOpen] = useState(false);\r\n    const regularExpressions = {\r\n        nameExpression: /^\\w+$/,\r\n        alphaStartRe: /^[A-Za-z]+$/,\r\n    }; //Regular expressions for a valid community name with letters, numbers, and underscores, along with another regex for the community name to start with a letter.\r\n\r\n    useEffect(() => {\r\n        //First, check to see if the user is logged into GeoCities. Redirect them to login page if not. \r\n        if(props.mainUser === null) {\r\n            swal(\r\n                'Uh Oh!',\r\n                'You must be logged in to build a community!',\r\n                'error',\r\n            );\r\n            history.push('/');\r\n        }\r\n        else {\r\n            props.dispatch({type: 'ThemeChange', payload: props.mainUser.profileTheme}); //Update profile theme.\r\n        }\r\n\r\n        //Now add some form validation rules. \r\n        //Rule that the name (or title) not be empty. \r\n        ValidatorForm.addValidationRule('nameRequired', v => {\r\n            if(v.trim() === '') {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        //Validation rule that the length of a name for a community be between 6 and 30 characters\r\n        ValidatorForm.addValidationRule('nameLength', v => {\r\n            if(v.length < 6) {\r\n                return false;\r\n            }\r\n            else if(v.length > 50) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        //Validation rule that the title of a community be between 10 and 75 characters \r\n        ValidatorForm.addValidationRule('titleLength', v => {\r\n            if(v.length < 10) {\r\n                return false;\r\n            }\r\n            else if(v.length > 75) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        //The rule below ensures that the name is valid and follows regex rules.\r\n        ValidatorForm.addValidationRule('nameRe', v => {\r\n            if(!regularExpressions.nameExpression.test(v)) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        //The rule below ensures the name starts with an alpha character \r\n        ValidatorForm.addValidationRule('alphaStart', v => {\r\n            if(!regularExpressions.alphaStartRe.test(v.slice(0, 1))) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        //The rule below ensures that the community description is at least 10 characters and at most 300. \r\n        ValidatorForm.addValidationRule('descriptionLength', v => {\r\n            if(v.length < 10) {\r\n                return false;\r\n            }\r\n            else if(v.length > 300) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    function preventSpaces(e) {\r\n        //This function prevents spaces in the community name \r\n        if(e.keyCode === 32) {\r\n            e.preventDefault();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function handleTopicsChange(e) {\r\n        //This function will add topics to the topics array. It will remove the topic if it is unchecked.\r\n        if(e.target.checked) {\r\n            if(topics.length <= 9) {\r\n                setTopics(topics => [...topics, e.target.value]);\r\n            }\r\n            else {\r\n                swal(\r\n                    'Uh Oh!',\r\n                    'You can only select up to 10 topics!',\r\n                    'error',\r\n                );\r\n            }\r\n        }\r\n        else if(!e.target.checked) {\r\n            setTopics(topics.filter(topic => topic !== e.target.value));\r\n        }\r\n    }\r\n\r\n    function resizerFunction(file) {\r\n        //This is a wrapper for the file resizer \r\n        return new Promise(resolve => {\r\n            Resizer.imageFileResizer(\r\n                file,\r\n                600,\r\n                600,\r\n                'JPEG',\r\n                100,\r\n                0,\r\n                uri => {\r\n                    resolve(uri);\r\n                },\r\n                'blob',\r\n            );\r\n        });\r\n    }\r\n\r\n    async function handleAvatarChange(e) {\r\n        //This function will handle storing an avatar in the avatar state variable and resizing it. \r\n        let file = e.target.files[0];\r\n        let resizedAvatar = await resizerFunction(file);\r\n        setAvatar(resizedAvatar);\r\n    }\r\n\r\n    async function buildCommunity() {\r\n        setOpen(true);\r\n    }\r\n\r\n\r\n    if(props.mainUser !== null) {\r\n        //Return this layout if the user is signed in. \r\n        return (\r\n            <Grid \r\n                container \r\n                className={classes.root}\r\n            >\r\n                <Backdrop \r\n                    open={open}\r\n                >\r\n                    <CircularProgress \r\n                        color='primary' \r\n                    />\r\n                </Backdrop>\r\n                <Card \r\n                    className={classes.card} \r\n                >\r\n                    <CardContent>\r\n                        <Typography \r\n                            variant='h6' \r\n                            component='h6' \r\n                            align='center' \r\n                        >\r\n                            Build a GeoCities community!\r\n                        </Typography>\r\n                        <Typography \r\n                            component='small'\r\n                            className={classes.topMarg} \r\n                            align='center' \r\n                        >\r\n                            GeoCities allows you to build interactive communities around topics of interest. As the community builder,\r\n                            you will also be the community moderator. You will have the ability to block or \r\n                            add users to the community, alter community settings, delete posts and comments, \r\n                            manage the chatroom, and set community rules. You can also decide if the community \r\n                            posts should be publicly available or only available to members of the community. \r\n                            We encourage you to make the community public to enhance engagement amongst community \r\n                            members. You can NEVER change the name of the community once you select a name.\r\n                        </Typography>\r\n                        <ValidatorForm \r\n                            ref={formRef}\r\n                            onSubmit={e => e.preventDefault()}\r\n                        >\r\n                            <Typography \r\n                                variant='body1' \r\n                                component='p' \r\n                                color={(name.length < 6 || name.length > 50) ? 'error' : 'default'}\r\n                                style={{\r\n                                    marginTop: 20,\r\n                                }}\r\n                                align='center'\r\n                            >\r\n                                {name.length}/50\r\n                            </Typography>\r\n                            <TextValidator\r\n                                label='Community name'\r\n                                placeholder='Select a community name | e.g. (Colts_Fans_Community)'\r\n                                helperText='The community name must start with a letter and can only contain letters, numbers, and underscores. Community names must be between 6 and 50 characters long and cannot contain spaces. You can NEVER change the name of a community, so make sure you select the proper name!'\r\n                                value={name}\r\n                                onChange={e => setName(e.target.value)}\r\n                                validators={['nameRequired', 'nameLength', 'nameRe', 'alphaStart']}\r\n                                errorMessages={['Must enter a community name!', 'Community name must be between 6 and 50 characters long!', 'Name can only contain letters, numbers, and underscores, and it must start with a letter!', 'Community name must start with a letter!']}\r\n                                onKeyDown={preventSpaces}\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                                variant='outlined' \r\n                                fullWidth\r\n                                required \r\n                            />\r\n                            <Typography \r\n                                variant='body1' \r\n                                component='p'\r\n                                className={classes.toMarg}\r\n                                align='center'\r\n                                color={(title.length < 10 || title.length > 75) ? 'error' : 'default'}\r\n                            >\r\n                                {title.length}/75\r\n                            </Typography>\r\n                            <TextValidator\r\n                                label='Community title'\r\n                                placeholder='Select a title for this community (required)'\r\n                                value={title}\r\n                                onChange={e => setTitle(e.target.value)}\r\n                                helperText='The community title will display at the top of your community page. This can be a short description of what the community is about and must be between 10 and 75 characters.'\r\n                                validators={['nameRequired', 'titleLength']}\r\n                                errorMessages={['A title for the community is required!', 'The community title must be between 10 and 75 characters!']}\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                                variant='outlined'\r\n                                fullWidth\r\n                                required\r\n                            />\r\n                            <FormControl \r\n                                className={classes.topMarg} \r\n                                component='fieldset' \r\n                            >\r\n                                <FormLabel \r\n                                    component='legend' \r\n                                >\r\n                                    Select at least 1 community topic. You can choose up to 10 (required)\r\n                                </FormLabel>\r\n                                <FormGroup \r\n                                    column \r\n                                >\r\n                                    {communityTopics.map((topic, index) => (\r\n                                        <FormControlLabel \r\n                                            key={index.toString()}\r\n                                            value={topic}\r\n                                            onChange={handleTopicsChange}\r\n                                            label={topic}\r\n                                            labelPlacement='end' \r\n                                            control={\r\n                                                <Checkbox \r\n                                                    color='primary' \r\n                                                    checked={topics.includes(topic)}\r\n                                                />\r\n                                            }\r\n                                        />\r\n                                    ))}\r\n                                </FormGroup>\r\n                            </FormControl>\r\n                            <Typography \r\n                                className={classes.topMarg}\r\n                                variant='body1'\r\n                                component='p'\r\n                                color={(description.length < 10 || description.length > 300) ? 'error' : 'default'}\r\n                                align='center'\r\n                            >\r\n                                {description.length}/300\r\n                            </Typography>\r\n                            <TextValidator \r\n                                className={classes.topMarg}\r\n                                label='Community description'\r\n                                placeholder='Write a brief this community (required)'\r\n                                helperText='The community description states what the community is about. It must be between 10 and 300 characters!'\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                                validators={['nameRequired', 'descriptionLength']}\r\n                                errorMessages={['Must enter a community description!', 'The community description must be between 10 and 300 characters long!']}\r\n                                value={description}\r\n                                onChange={e => setDescription(e.target.value)}\r\n                                variant='outlined'\r\n                                rows={3}\r\n                                multiline={true}\r\n                                required \r\n                                fullWidth\r\n                            />\r\n                            <Typography \r\n                                className={classes.topMarg} \r\n                                variant='body1'\r\n                                component='p' \r\n                            >\r\n                                Select a theme color for this community!\r\n                            </Typography>\r\n                            <SwatchesPicker \r\n                                color={communityTheme} \r\n                                onChange={color => setCommunityTheme(color.hex)} \r\n                                colors={[\r\n                                    ['#00143C', '#2471A3', '#3498DB'],\r\n                                    ['#641E16', '#C0392B', '#E74C3C'],\r\n                                    ['#0E6655', '#45B39D', '#58D68D'],\r\n                                    ['#5B2C6F', '#8E44AD', '#C39BD3'],\r\n                                    ['#BA4A00', '#DC7633', '#E67E22'],\r\n                                    ['#000000', '#34495E', '#7F8C8D'],\r\n                                ]}\r\n                            />\r\n                            <Typography \r\n                                className={classes.topMarg} \r\n                                variant='body1' \r\n                                component='p'\r\n                            >\r\n                                Select a community avatar picture!\r\n                            </Typography>\r\n                            <label \r\n                                className={classes.topMarg}\r\n                                html-for='avatar' \r\n                                style={{\r\n                                    margin: 'auto',\r\n                                }}\r\n                            >\r\n                                <input \r\n                                    className={classes.input}\r\n                                    id='avatar'\r\n                                    name='avatar' \r\n                                    type='file'\r\n                                    accept='image/jpeg, image/jpg, image/png'\r\n                                    onChange={handleAvatarChange}\r\n                                    required \r\n                                />\r\n                                <Button \r\n                                    component='span'\r\n                                    color='primary' \r\n                                    variant='contained' \r\n                                >\r\n                                    <CameraIcon />\r\n                                </Button>\r\n                            </label>\r\n                            <div \r\n                                style={{\r\n                                    margin: 'auto',\r\n                                    textAlign: 'center'\r\n                                }}\r\n                            >\r\n                                <Button \r\n                                    variant='contained' \r\n                                    color='primary' \r\n                                    onClick={buildCommunity} \r\n                                >\r\n                                    Build community\r\n                                </Button>\r\n                            </div>\r\n                        </ValidatorForm>\r\n                    </CardContent>\r\n                </Card>\r\n            </Grid>\r\n        )\r\n    }\r\n    else {\r\n        //If the mainUser is null, simply return a circular progress until we load the user, or redirect to the log in page. \r\n        <Backdrop \r\n            open={true} \r\n        >\r\n            <CircularProgress \r\n                color='primary' \r\n            />\r\n        </Backdrop>\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        mainUser: state.userReducer.user,\r\n        primary: state.userThemeReducer.primary,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(BuildCommunity);"]},"metadata":{},"sourceType":"module"}