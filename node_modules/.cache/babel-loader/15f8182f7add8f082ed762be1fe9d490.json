{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"c:\\\\Users\\\\bobma\\\\Downloads\\\\excite-app\\\\src\\\\components\\\\GeoUser.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useLayoutEffect, useRef } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport Grid from '@material-ui/core/Grid';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport * as _ from 'underscore';\nimport swal from 'sweetalert';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Hidden from '@material-ui/core/Hidden';\nimport Icon from '@mdi/react';\nimport { mdiCheckBold, mdiPencil, mdiClose, mdiCamera, mdiVideo, mdiTwitter, mdiInstagram, mdiYoutube } from '@mdi/js';\nimport Paper from '@material-ui/core/Paper';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Divider from '@material-ui/core/Divider';\nimport Link from '@material-ui/core/Link';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nfunction TabPanel(props) {\n  //This component will serve as the panel for each individual tab.\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    role: \"tabpanel\",\n    hidden: index !== value,\n    id: `tabpanel-${index}`,\n    \"aria-label\": `tab-${index}`,\n    \"aria-labelledby\": `tab-${index}`,\n    ...other,\n    style: {\n      marginTop: 100\n    },\n    children: value === index && /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: true,\n      style: {\n        textAlign: 'center'\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n}\n\n_c = TabPanel;\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  value: PropTypes.any.isRequired,\n  index: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `tab-${index}`,\n    'aria-controls': `tabpanel-${index}`\n  };\n}\n\nfunction GeoUser(props) {\n  _s();\n\n  const [geoUser, setGeoUser] = useState(null);\n  const useStyles = makeStyles(theme => ({\n    root: {\n      marginTop: 20\n    },\n    profileAvatar: {\n      height: 128,\n      width: 128,\n      margin: 'auto'\n    },\n    profileAvatarLg: {\n      height: 168,\n      width: 168,\n      margin: 'auto'\n    },\n    usernameDisplay: {\n      marginTop: 40,\n      margin: 'auto'\n    },\n    statsInfo: {\n      marginTop: 40,\n      textAlign: 'center'\n    },\n    paper: {\n      backgroundColor: props.mainUser ? props.mainUser.profileTheme : 'rgb(0, 20, 60)',\n      color: 'rgb(255, 255, 255)',\n      marginTop: 40\n    },\n    input: {\n      display: 'none'\n    }\n  }));\n  const classes = useStyles(); //Custom styling. \n\n  const params = useParams();\n  const history = useHistory();\n  useEffect(() => {\n    if (props.mainUser === null) {\n      //Call the API to get a public profile view for a user who is not logged in.\n      return axios({\n        method: 'GET',\n        url: `http://192.168.0.9:3001/api/get/public/geo/user/${params.uniqueUserId}`\n      }).then(response => {\n        if (response.data.geoUser) {\n          //If we were able to get a user, set post and theme globally, and the local geoUser state.\n          props.dispatch({\n            type: 'visitorPosts/updatePosts',\n            payload: response.data.posts\n          });\n          props.dispatch({\n            type: 'ThemeChange',\n            payload: response.data.geoUser.profileTheme\n          });\n          setGeoUser(response.data.geoUser); //Set the local geoUser state variable\n        } else {\n          swal('Uh Oh!', 'We could not find that user! Their profile might not exist.', 'error');\n        }\n      }).catch(err => {\n        console.log(err.message);\n        swal('Uh Oh!', 'There was an error finding that user! Please try again.', 'error');\n      });\n    } else if (props.mainUser !== null) {\n      return axios({\n        method: 'GET',\n        url: `http://192.168.0.9:3001/api/get/geo/user/${params.uniqueUserId}/${props.mainUser.uniqueUserId}`\n      }).then(response => {\n        if (response.data.geoUser && response.data.mainUser) {\n          if (response.data.geoUser.uniqueUserId === props.mainUser.uniqueUserId) {\n            history.push('/profile');\n          } else {\n            if (response.data.geoUser.blockList.includes(response.data.mainUser.uniqueUserId)) {\n              swal('Uh Oh!', 'This user has blocked you!', 'error');\n              history.goBack(1);\n            } else {\n              props.dispatch({\n                type: 'user/updateUser',\n                payload: response.data.mainUser\n              });\n              props.dispatch({\n                type: 'ThemeChange',\n                payload: response.data.geoUser.profileTheme\n              });\n              props.dispatch({\n                type: 'visitorPosts/updatePosts',\n                payload: response.data.posts\n              });\n              setGeoUser(response.data.geoUser);\n            }\n          }\n        } else {\n          swal('Uh Oh!', 'Could not find that GeoCities user!', 'error');\n          history.goBack(1);\n        }\n      }).catch(err => {\n        console.log(err.message);\n        swal('Uh Oh!', 'There was an error getting that users profile! Please try again.', 'error');\n        history.goBack(1);\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [geoUser !== null && /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        container: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: [/*#__PURE__*/_jsxDEV(Hidden, {\n            mdUp: true,\n            children: /*#__PURE__*/_jsxDEV(Avatar, {\n              src: `http://192.168.0.9:3001/api/get-photo/${geoUser.avatar}`,\n              className: classes.profileAvatar,\n              title: `${geoUser.username}`,\n              alt: `${geoUser.username}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n            smDown: true,\n            children: /*#__PURE__*/_jsxDEV(Avatar, {\n              src: `http://192.168.0.9:3001/api/get-photo/${geoUser.avatar}`,\n              title: `${geoUser.username}`,\n              alt: `${geoUser.username}`,\n              className: classes.profileAvatarLg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          component: \"h4\",\n          align: \"center\",\n          className: classes.usernameDisplay,\n          children: geoUser.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 25\n        }, this), geoUser.isVerified && /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          component: \"p\",\n          style: {\n            margin: 'auto',\n            textAlign: 'center',\n            marginTop: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(Icon, {\n            path: mdiCheckBold,\n            size: 1,\n            title: \"Verified\",\n            style: {\n              color: 'rgb(0, 128, 0)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 29\n          }, this), \" Verified\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }, this), geoUser === null && /*#__PURE__*/_jsxDEV(Backdrop, {\n      open: true,\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n        color: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 190,\n    columnNumber: 9\n  }, this);\n}\n\n_s(GeoUser, \"X6Ce58KrKUyGPGqozTXxAOfOxXI=\", false, function () {\n  return [useStyles, useParams, useHistory];\n});\n\n_c2 = GeoUser;\n\nfunction mapStateToProps(state) {\n  return {\n    mainUser: state.userReducer.user,\n    primary: state.userThemeReducer.primary,\n    posts: state.visitorPostsReducer.posts\n  };\n}\n\nexport default connect(mapStateToProps)(GeoUser);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TabPanel\");\n$RefreshReg$(_c2, \"GeoUser\");","map":{"version":3,"sources":["c:/Users/bobma/Downloads/excite-app/src/components/GeoUser.js"],"names":["React","useState","useEffect","useLayoutEffect","useRef","useHistory","useParams","Grid","Avatar","Typography","Button","Tabs","Tab","Dialog","DialogContent","AppBar","Toolbar","connect","axios","_","swal","makeStyles","Hidden","Icon","mdiCheckBold","mdiPencil","mdiClose","mdiCamera","mdiVideo","mdiTwitter","mdiInstagram","mdiYoutube","Paper","PropTypes","ListItem","ListItemText","ListItemIcon","Divider","Link","Backdrop","CircularProgress","TabPanel","props","children","value","index","other","marginTop","textAlign","propTypes","node","any","isRequired","a11yProps","id","GeoUser","geoUser","setGeoUser","useStyles","theme","root","profileAvatar","height","width","margin","profileAvatarLg","usernameDisplay","statsInfo","paper","backgroundColor","mainUser","profileTheme","color","input","display","classes","params","history","method","url","uniqueUserId","then","response","data","dispatch","type","payload","posts","catch","err","console","log","message","push","blockList","includes","goBack","avatar","username","isVerified","mapStateToProps","state","userReducer","user","primary","userThemeReducer","visitorPostsReducer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useLayoutEffect, useRef}  from 'react';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { connect } from 'react-redux';\r\nimport axios from 'axios';\r\nimport * as _ from 'underscore';\r\nimport swal from 'sweetalert';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Icon from '@mdi/react';\r\nimport { mdiCheckBold, mdiPencil, mdiClose, mdiCamera, mdiVideo, mdiTwitter, mdiInstagram, mdiYoutube } from '@mdi/js';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport PropTypes from 'prop-types';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Link from '@material-ui/core/Link';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nfunction TabPanel(props) {\r\n    //This component will serve as the panel for each individual tab.\r\n    const { children, value, index, ...other } = props;\r\n\r\n    return (\r\n        <div \r\n            role='tabpanel'\r\n            hidden={index !== value} \r\n            id={`tabpanel-${index}`}\r\n            aria-label={`tab-${index}`}\r\n            aria-labelledby={`tab-${index}`}\r\n            {...other}\r\n            style={{\r\n                marginTop: 100,\r\n            }}\r\n        >\r\n            {value === index &&\r\n                <Grid \r\n                    item \r\n                    xs\r\n                    style={{\r\n                        textAlign: 'center',\r\n                    }}\r\n                >\r\n                    {children}\r\n                </Grid>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    value: PropTypes.any.isRequired,\r\n    index: PropTypes.any.isRequired,\r\n}\r\n\r\nfunction a11yProps(index) {\r\n    return {\r\n        id: `tab-${index}`,\r\n        'aria-controls': `tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nfunction GeoUser(props) {\r\n    const [geoUser, setGeoUser] = useState(null);\r\n    const useStyles = makeStyles((theme) => ({\r\n        root: {\r\n            marginTop: 20,\r\n        },\r\n        profileAvatar: {\r\n            height: 128,\r\n            width: 128,\r\n            margin: 'auto',\r\n        },\r\n        profileAvatarLg: {\r\n            height: 168,\r\n            width: 168,\r\n            margin: 'auto',\r\n        },\r\n        usernameDisplay: {\r\n            marginTop: 40,\r\n            margin: 'auto',\r\n        },\r\n        statsInfo: {\r\n            marginTop: 40,\r\n            textAlign: 'center',\r\n        },\r\n        paper: {\r\n            backgroundColor: props.mainUser ? props.mainUser.profileTheme : 'rgb(0, 20, 60)',\r\n            color: 'rgb(255, 255, 255)',\r\n            marginTop: 40,\r\n        },\r\n        input: {\r\n            display: 'none',\r\n        },\r\n    }));\r\n    const classes = useStyles(); //Custom styling. \r\n    const params = useParams();\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        if(props.mainUser === null) {\r\n            //Call the API to get a public profile view for a user who is not logged in.\r\n            return axios({\r\n                method: 'GET',\r\n                url: `http://192.168.0.9:3001/api/get/public/geo/user/${params.uniqueUserId}`,\r\n            }).then(response => {\r\n                if(response.data.geoUser) {\r\n                    //If we were able to get a user, set post and theme globally, and the local geoUser state.\r\n                    props.dispatch({type: 'visitorPosts/updatePosts', payload: response.data.posts});\r\n                    props.dispatch({type: 'ThemeChange', payload: response.data.geoUser.profileTheme});\r\n                    setGeoUser(response.data.geoUser); //Set the local geoUser state variable\r\n                }\r\n                else {\r\n                    swal(\r\n                        'Uh Oh!',\r\n                        'We could not find that user! Their profile might not exist.',\r\n                        'error',\r\n                    );\r\n\r\n                    \r\n                }\r\n            }).catch(err => {\r\n                console.log(err.message);\r\n                swal(\r\n                    'Uh Oh!',\r\n                    'There was an error finding that user! Please try again.',\r\n                    'error',\r\n                );\r\n            });\r\n        }\r\n        else if(props.mainUser !== null) {\r\n            return axios({\r\n                method: 'GET',\r\n                url: `http://192.168.0.9:3001/api/get/geo/user/${params.uniqueUserId}/${props.mainUser.uniqueUserId}`,\r\n            }).then(response => {\r\n                if(response.data.geoUser && response.data.mainUser) {\r\n                    if(response.data.geoUser.uniqueUserId === props.mainUser.uniqueUserId) {\r\n                        history.push('/profile');\r\n                    }\r\n                    else {\r\n                        if(response.data.geoUser.blockList.includes(response.data.mainUser.uniqueUserId)) {\r\n                            swal(\r\n                                'Uh Oh!',\r\n                                'This user has blocked you!',\r\n                                'error',\r\n                            );\r\n                            history.goBack(1);\r\n                        }\r\n                        else {\r\n                            props.dispatch({type: 'user/updateUser', payload: response.data.mainUser});\r\n                            props.dispatch({type: 'ThemeChange', payload: response.data.geoUser.profileTheme});\r\n                            props.dispatch({type: 'visitorPosts/updatePosts', payload: response.data.posts});\r\n                            setGeoUser(response.data.geoUser);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    swal(\r\n                        'Uh Oh!',\r\n                        'Could not find that GeoCities user!',\r\n                        'error',\r\n                    );\r\n                    history.goBack(1);\r\n                }\r\n            }).catch(err => {\r\n                console.log(err.message);\r\n                swal(\r\n                    'Uh Oh!',\r\n                    'There was an error getting that users profile! Please try again.',\r\n                    'error',\r\n                );\r\n                history.goBack(1);\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            {/* Below is the conditional rendering if the geoUser object is not null */}\r\n            {geoUser !== null &&\r\n                <Grid \r\n                    container \r\n                    className={classes.root} \r\n                >\r\n                    <Grid \r\n                        item \r\n                        container \r\n                        xs={12} \r\n                    >\r\n                        <Grid \r\n                            item \r\n                            xs={12} \r\n                        >\r\n                            {/* Below is the avatar that will display 128x128 pixels on small screen devices */}\r\n                            <Hidden \r\n                                mdUp  \r\n                            >\r\n                                <Avatar \r\n                                    src={`http://192.168.0.9:3001/api/get-photo/${geoUser.avatar}`} \r\n                                    className={classes.profileAvatar} \r\n                                    title={`${geoUser.username}`} \r\n                                    alt={`${geoUser.username}`} \r\n                                />\r\n                            </Hidden>\r\n                            {/* Below is the avatar that will display on medium and large screen devices at 168x168 pixels*/}\r\n                            <Hidden \r\n                                smDown \r\n                            >\r\n                                <Avatar \r\n                                    src={`http://192.168.0.9:3001/api/get-photo/${geoUser.avatar}`}\r\n                                    title={`${geoUser.username}`}\r\n                                    alt={`${geoUser.username}`}\r\n                                    className={classes.profileAvatarLg} \r\n                                />\r\n                            </Hidden>\r\n                        </Grid>\r\n                    </Grid>\r\n                    {/* End of the top Grid that displays the avatar. Below is the Grid to display the username in a Typography component */}\r\n                    <Grid \r\n                        item \r\n                        xs={12} \r\n                    >\r\n                        <Typography \r\n                            variant='h4' \r\n                            component='h4' \r\n                            align='center' \r\n                            className={classes.usernameDisplay}\r\n                        >\r\n                            {geoUser.username}\r\n                        </Typography>\r\n                        {geoUser.isVerified &&\r\n                        <Typography \r\n                            variant='body1'\r\n                            component='p' \r\n                            style={{\r\n                                margin: 'auto',\r\n                                textAlign: 'center',\r\n                                marginTop: 10,\r\n                            }}\r\n                        >\r\n                            <Icon \r\n                                path={mdiCheckBold} \r\n                                size={1} \r\n                                title='Verified' \r\n                                style={{\r\n                                    color: 'rgb(0, 128, 0)'\r\n                                }}\r\n                            /> Verified \r\n                        </Typography>\r\n                    }\r\n                    </Grid>\r\n                    {/* End of the username and verified check display */}\r\n                </Grid>\r\n            }\r\n            {/* End of conditional rendering if the geoUser object is not null */}\r\n            {geoUser === null &&\r\n                <Backdrop \r\n                    open={true} \r\n                >\r\n                    <CircularProgress \r\n                        color='primary' \r\n                    />\r\n                </Backdrop>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        mainUser: state.userReducer.user,\r\n        primary: state.userThemeReducer.primary,\r\n        posts: state.visitorPostsReducer.posts,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(GeoUser);"]},"metadata":{},"sourceType":"module"}