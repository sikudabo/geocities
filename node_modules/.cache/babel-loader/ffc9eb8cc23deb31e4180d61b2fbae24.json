{"ast":null,"code":"import _regeneratorRuntime from\"/Users/simeonikudabo/Downloads/geocities/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/simeonikudabo/Downloads/geocities/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Users/simeonikudabo/Downloads/geocities/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/simeonikudabo/Downloads/geocities/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/simeonikudabo/Downloads/geocities/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/simeonikudabo/Downloads/geocities/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect,useRef}from'react';import Grid from'@material-ui/core/Grid';import Typography from'@material-ui/core/Typography';import Paper from'@material-ui/core/Paper';import Tabs from'@material-ui/core/Tabs';import Tab from'@material-ui/core/Tab';import Avatar from'@material-ui/core/Avatar';import Backdrop from'@material-ui/core/Backdrop';import CircularProgress from'@material-ui/core/CircularProgress';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import Divider from'@material-ui/core/Divider';import Button from'@material-ui/core/Button';import axios from'axios';import swal from'sweetalert';import Dialog from'@material-ui/core/Dialog';import DialogContent from'@material-ui/core/DialogContent';import AppBar from'@material-ui/core/AppBar';import Toolbar from'@material-ui/core/Toolbar';import Hidden from'@material-ui/core/Hidden';import*as _ from'underscore';import{connect}from'react-redux';import{useHistory,useParams}from'react-router-dom';import{makeStyles}from'@material-ui/core/styles';import IconButton from'@material-ui/core/IconButton';import Icon from'@mdi/react';import{mdiClose,mdiCamera,mdiVideo}from'@mdi/js';import{ValidatorForm,TextValidator}from'react-material-ui-form-validator';import CommunityPostsCard from'./CommunityPostsCard';import NonUserCommunityPostsCard from'./NonUserCommunityPostsCard';import Resizer from'react-image-file-resizer';import TextField from'@material-ui/core/TextField';function TabPanel(props){//This component will serve as the panel for each individual tab.\nvar children=props.children,value=props.value,index=props.index,other=_objectWithoutProperties(props,[\"children\",\"value\",\"index\"]);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:index!==value,id:\"tabpanel-\".concat(index),\"aria-label\":\"tab-\".concat(index),\"aria-labelledby\":\"tab-\".concat(index)},other),{},{style:{marginTop:100},children:value===index&&/*#__PURE__*/_jsx(Grid,{item:true,xs:true,style:{textAlign:'center'},children:children})}));}function a11yProps(index){return{id:\"tab-\".concat(index),'aria-controls':\"tabpanel-\".concat(index)};}function Community(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),community=_useState2[0],setCommunity=_useState2[1];//This variable and setter will manipulate community.\nvar useStyles=makeStyles(function(){return{root:{marginTop:100},centerContent:{margin:'auto',textAlign:'center'},nameGrid:{margin:'auto',textAlign:'center',marginTop:20},avatarLg:{height:168,width:168,margin:'auto'},avatarSm:{height:128,width:128,margin:'auto'},paper:{backgroundColor:community!==null?community.communityTheme:'rgb(0, 20, 60)'},closeIcon:{color:'rgb(255, 255, 255)'},input:{display:'none'}};});var classes=useStyles();//Custom styles for the component. \nvar history=useHistory();//Window history API.\nvar params=useParams();//Access url parameters. \nvar textFormRef=useRef(null);//Ref for validator form when we upload posts.\nvar linkFormRef=useRef(null);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),joinSending=_useState4[0],setJoinSending=_useState4[1];//Will disable the button while we send a join or request join to the server.\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),postDialog=_useState6[0],setPostDialog=_useState6[1];//Will open and close the dialog to make a post.\nvar _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),curTab=_useState8[0],setTab=_useState8[1];//Sets the current tab in post upload dialog. \nvar _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),curTab2=_useState10[0],setTab2=_useState10[1];//For the second tab that displays posts, about (and settings if the user is not null and the uniqueUserId matches the mainUser, for moderation)\nvar _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),textPost=_useState12[0],setTextPost=_useState12[1];//Value for text post. \nvar _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),textPostTitle=_useState14[0],setTextPostTitle=_useState14[1];//Value for title.\nvar _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),photoPost=_useState16[0],setPhotoPost=_useState16[1];//Value for photo upload. \nvar _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),photoPostTitle=_useState18[0],setPhotoPostTitle=_useState18[1];//Value for photo post title. \nvar _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),videoPost=_useState20[0],setVideoPost=_useState20[1];//Value for video post. \nvar _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),videoPostTitle=_useState22[0],setVideoPostTitle=_useState22[1];//Video post title. \nvar _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),linkPost=_useState24[0],setLinkPost=_useState24[1];//Value for the link in a link post. \nvar _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),linkPostTitle=_useState26[0],setLinkPostTitle=_useState26[1];//Value for link post title. \nvar _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),posting=_useState28[0],setPosting=_useState28[1];//Will handle disabling buttons and bars when a post is being sent to the server.\nvar _useState29=useState(null),_useState30=_slicedToArray(_useState29,2),uploadPhoto=_useState30[0],setUploadPhoto=_useState30[1];//Will control any photo post photo that we upload to the server. \nvar _useState31=useState(''),_useState32=_slicedToArray(_useState31,2),photoCaption=_useState32[0],setPhotoCaption=_useState32[1];//Variable and setter for a caption for a photo upload. \nvar _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),photoUploading=_useState34[0],setPhotoUploading=_useState34[1];//Used to alter functionality when the photo post is being uploaded to the server. \nvar _useState35=useState(null),_useState36=_slicedToArray(_useState35,2),uploadVideo=_useState36[0],setUploadVideo=_useState36[1];//Variable and setter for a video to be uploaded \nvar _useState37=useState(null),_useState38=_slicedToArray(_useState37,2),videoUploading=_useState38[0],setVideoUploading=_useState38[1];//Variable and setter to disable button while video is uploading. \nvar _useState39=useState(null),_useState40=_slicedToArray(_useState39,2),videoCaption=_useState40[0],setVideoCaption=_useState40[1];//Variable and setter for the caption for a video post. \nvar _useState41=useState(''),_useState42=_slicedToArray(_useState41,2),postLink=_useState42[0],setPostLink=_useState42[1];//This variable will store the link post link. \nvar regularExpressions={urlRegex:/^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i};//This will store the regular expressions to make sure link posts have valid url's. \nuseEffect(function(){//Add validation rules \nValidatorForm.addValidationRule('titleLength',function(v){if(v.length>75){return false;}else{return true;}});//Rule for text or caption to be 3,000 characters or less. \nValidatorForm.addValidationRule('textLength',function(v){if(v.length>3000){return false;}else{return true;}});//Validation rule to ensure textPost and linkPost are not empty. \nValidatorForm.addValidationRule('requiredText',function(v){if(v.trim()===''){return false;}else{return true;}});//Validation rule will ensure links are valid \nValidatorForm.addValidationRule('validLink',function(v){if(!regularExpressions.urlRegex.test(v)){return false;}else{return true;}});//First we need to fetch the community with axios. \nif(true){return axios({method:'GET',url:\"http://10.162.4.11:3001/api/fetch/community/\".concat(params.communityName)}).then(function(response){if(response.data.community){setCommunity(response.data.community);props.dispatch({type:'ThemeChange',payload:response.data.community.communityTheme});//Update the theme to match the community theme.\nprops.dispatch({type:'visitorPosts/updatePosts',payload:response.data.posts});//Update the posts to match what a visitor viewing these posts will see.\n//Now determine if the mainUser is in the blockList, and re-route to the previous page if they are. \nif(props.mainUser!==null){if(_.find(response.data.community.blockList,function(person){return person.uniqueUserId===props.mainUser.uniqueUserId;})){swal('Uh Oh!','You are blocked from this community!','error');history.goBack(1);}}}else{swal('Uh Oh!','We could not find that community!','error');history.goBack(1);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error finding that community! Please try again.','error');history.goBack(1);});}},[]);function publicJoin(){//Function that will enable a member to join a public community. \nvar data=JSON.stringify({username:props.mainUser.username,uniqueUserId:props.mainUser.uniqueUserId,name:community.name});return axios({method:'POST',url:'http://10.162.4.11:3001/api/public/join/community',data:data,headers:{'Content-Type':'application/json'}}).then(function(response){if(response.data.result==='success'){swal('Great!','Successfully joined community!','success');setJoinSending(false);setCommunity(response.data.community);}else{swal('Uh Oh!','There was an error with joining this community! Please try again','error');setJoinSending(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error joining this community! Please try again','error');setJoinSending(false);});}function privateJoinRequest(){//This function will handle sending a join notification to the moderator. \nsetJoinSending(true);var data=JSON.stringify({uniqueUserId:props.mainUser.uniqueUserId,username:props.mainUser.username,moderatorUniqueUserId:community.moderator.uniqueUserId,name:community.name});return axios({method:'POST',url:'http://10.162.4.11:3001/api/community/join/request',data:data,headers:{'Content-Type':'application/json'}}).then(function(response){if(response.data==='duplicate'){swal('Uh Oh!','You have already sent a request to join this community!','error');setJoinSending(false);}else{swal('Great!','Community join request sent!','success');setJoinSending(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error sending a request to join this community! Please try again.','error');setJoinSending(false);});}function sendTextPost(){return _sendTextPost.apply(this,arguments);}function _sendTextPost(){_sendTextPost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var isValid,date,months,month,day,year,dateString,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://Function that will handle uploading a text post to the server. \nsetPosting(true);isValid=textFormRef.current.isFormValid();if(isValid){_context.next=8;break;}swal('Uh Oh!','Make sure the form is filled out properly','error');setPosting(false);return _context.abrupt(\"return\",false);case 8:date=new Date();months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sept','Oct','Nov','Dec'];month=months[date.getMonth()];day=date.getDate();year=date.getFullYear();dateString=\"\".concat(month,\" \").concat(day,\", \").concat(year);data=JSON.stringify({text:textPost,title:textPostTitle,uniqueUserId:props.mainUser.uniqueUserId,username:props.mainUser.username,community:community.name,type:'text',dateString:dateString,uniquePostId:Date.now()+props.mainUser.username+'textpost'+'info'+community.name,context:'community',privacy:community.communityPrivacy,link:postLink?postLink:'',textType:'link'});return _context.abrupt(\"return\",axios({method:'post',url:'http://10.162.4.11:3001/api/add/community/text/post',data:data,headers:{'Content-Type':'application/json'}}).then(function(response){if(response.data.result==='success'){props.dispatch({type:'visitorPosts/updatePosts',payload:response.data.posts});swal('Great!','Successfully uploaded text post!','success');setTextPost('');setTextPostTitle('');setPosting(false);setPostDialog(false);}else{swal('Uh Oh!','There was an error sending that text post!','error');setPosting(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error sending that text post! Please try again.','error');setPosting(false);}));case 16:case\"end\":return _context.stop();}}},_callee);}));return _sendTextPost.apply(this,arguments);}function sendLinkPost(){//This function will handle sending a post with a link URL to the server.\nsetPosting(true);var isValid=linkFormRef.current.isFormValid();if(!regularExpressions.urlRegex.test(postLink)){swal('Uh Oh!','You must enter a valid URL to create a link post','error');setPosting(false);return false;}else if(textPostTitle===''){swal('Uh Oh!','You must enter a title for all link posts.','error');setPosting(false);return false;}else if(!isValid){swal('Uh Oh!','Make sure the form is filled out properly','error');setPosting(false);return false;}else{var date=new Date();var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sept','Oct','Nov','Dec'];var month=months[date.getMonth()];var day=date.getDate();var year=date.getFullYear();var dateString=\"\".concat(month,\" \").concat(day,\", \").concat(year);var data=JSON.stringify({text:'',title:textPostTitle,link:postLink,uniqueUserId:props.mainUser.uniqueUserId,username:props.mainUser.username,community:community.name,type:'link',dateString:dateString,uniquePostId:Date.now()+props.mainUser.username+'textpost'+'info'+community.name,context:'community',privacy:community.communityPrivacy});return axios({method:'post',url:'http://10.162.4.11:3001/api/add/community/text/post',data:data,headers:{'Content-Type':'application/json'}}).then(function(response){if(response.data.result==='success'){props.dispatch({type:'visitorPosts/updatePosts',payload:response.data.posts});swal('Great!','Successfully uploaded link post!','success');setTextPost('');setTextPostTitle('');setPosting(false);setPostDialog(false);}else{swal('Uh Oh!','There was an error sending that link post!','error');setPosting(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error sending that link post! Please try again.','error');setPosting(false);});}}function resizerFunction(file){//This is a wrapper for the file resizer \nreturn new Promise(function(resolve){Resizer.imageFileResizer(file,600,600,'JPEG',100,0,function(uri){resolve(uri);},'blob');});}function handlePhotoChange(_x){return _handlePhotoChange.apply(this,arguments);}function _handlePhotoChange(){_handlePhotoChange=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var file,resizedPhoto;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://This function will handle passing a photo that is uploaded to the resizer function to rersize the photo\nfile=e.target.files[0];_context2.next=3;return resizerFunction(file);case 3:resizedPhoto=_context2.sent;setUploadPhoto(resizedPhoto);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _handlePhotoChange.apply(this,arguments);}function handlePhotoUpload(){//Function that will handle sending an uploaded photo to the server after resizing it.\n//Might need to make some edits here since the photo will be community-based\nsetPhotoUploading(true);if(!uploadPhoto){swal('Uh Oh!','You must select a photo to upload!','error');setPhotoUploading(false);}else{var data=new Date();var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sept','Oct','Nov','Dec'];var month=months[data.getMonth()];var day=data.getDate();var year=data.getFullYear();var dateString=\"\".concat(month,\" \").concat(day,\", \").concat(year);var fd=new FormData();fd.append('photo',uploadPhoto,'photo.jpg');fd.append('caption',photoCaption);fd.append('uniqueUserId',props.mainUser.uniqueUserId);fd.append('uniquePostId',Date.now()+props.mainUser.username+'photoupload'+props.mainUser.uniqueUserId);fd.append('username',props.mainUser.username);fd.append('dateString',dateString);fd.append('type','photo');fd.append('context','community');fd.append('link',\"http://192.168.0.9:3000/profile#\".concat(Date.now()).concat(props.mainUser.username,\"photoupload\").concat(props.mainUser.uniqueUserId));fd.append('community',community.name);//Name of the community that this post belongs to. \nfd.append('title','');fd.append('privacy',community.communityPrivacy);fd.append('text','');return axios({method:'POST',url:'http://10.162.4.11:3001/api/upload/photo',data:fd,headers:{'Content-Type':'multipart/form-data'}}).then(function(response){if(response.data.posts){props.dispatch({type:'visitorPosts/updatePosts',payload:response.data.posts});swal('Great!','Successfully uploaded photo!','success');setPhotoCaption('');setUploadPhoto(null);setPostDialog(false);setPhotoUploading(false);}else{swal('Uh Oh!','There was an error uploading that photo!','error');setPhotoUploading(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error uploading that photo!','error');setPhotoUploading(false);});}}function handleVideoChange(e){//This function will handle setting the uploadVideo variable to the valua of the file. \nsetUploadVideo(e.target.files[0]);}function handleVideoUpload(){//Function that will handle sending an uploaded video to the server.\nsetVideoUploading(true);if(!uploadVideo){swal('Uh Oh!','You must select a video to upload!','error');setVideoUploading(false);}else{var data=new Date();var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sept','Oct','Nov','Dec'];var month=months[data.getMonth()];var day=data.getDate();var year=data.getFullYear();var dateString=\"\".concat(month,\" \").concat(day,\", \").concat(year);var ext=uploadVideo.name.split('.').pop().toString();//This will get the extension name of the video \next='video.'+ext;var fd=new FormData();fd.append('photo',uploadVideo,ext);//Keep the name \"photo\" for the server upload although it is technically a video!\nfd.append('caption',videoCaption);fd.append('uniqueUserId',props.mainUser.uniqueUserId);fd.append('uniquePostId',Date.now()+props.mainUser.username+'videoupload'+props.mainUser.uniqueUserId);fd.append('username',props.mainUser.username);fd.append('dateString',dateString);fd.append('type','video');fd.append('context','community');fd.append('link',\"http://192.168.0.9:3000/profile#\".concat(Date.now()).concat(props.mainUser.username,\"videoupload\").concat(props.mainUser.uniqueUserId));fd.append('community',community.name);fd.append('communityPost',true);fd.append('title','');fd.append('privacy',community.communityPrivacy);fd.append('text','');return axios({method:'POST',url:'http://10.162.4.11:3001/api/upload/photo',data:fd,headers:{'Content-Type':'multipart/form-data'}}).then(function(response){if(response.data.posts){props.dispatch({type:'visitorPosts/updatePosts',payload:response.data.posts});swal('Great!','Successfully uploaded video!','success');setVideoCaption('');setUploadVideo(null);setPostDialog(false);setVideoUploading(false);}else{swal('Uh Oh!','There was an error uploading that video!','error');setVideoUploading(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error uploading that video!','error');setVideoUploading(false);});}}function leaveCommunity(){//This function will remove a member from a community if they are within it. \nsetJoinSending(true);var data=JSON.stringify({username:props.mainUser.username,uniqueUserId:props.mainUser.uniqueUserId,name:community.name});return axios({method:'POST',url:'http://10.162.4.11:3001/api/leave/community',data:data,headers:{'Content-Type':'application/json'}}).then(function(response){if(response.data.result==='success'){swal('Great!','You have successfully left this community','success');setCommunity(response.data.community);setJoinSending(false);}else{swal('Uh Oh!','There was an error leaving this community! Please try again.','error');setJoinSending(false);}}).catch(function(err){console.log(err.message);swal('Uh Oh!','There was an error leaving this community! Please try again.','error');setJoinSending(false);});}if(community!==null){var _jsx2,_jsx3;return/*#__PURE__*/_jsxs(Grid,{className:classes.root,container:true,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,className:classes.centerContent,children:[/*#__PURE__*/_jsx(Hidden,{smDown:true,children:/*#__PURE__*/_jsx(Avatar,{className:classes.avatarLg,src:\"http://10.162.4.11:3001/api/get-photo/\".concat(community.avatar),alt:\"\".concat(community.name,\" avatar\"),title:\"\".concat(community.name,\" avatar\"),variant:\"square\"})}),/*#__PURE__*/_jsx(Hidden,{mdUp:true,children:/*#__PURE__*/_jsx(Avatar,{src:\"http://10.162.4.11:3001/api/get-photo/\".concat(community.avatar),className:classes.avatarSm,title:\"\".concat(community.name,\" avatar\"),alt:\"\".concat(community.name,\" avatar\"),variant:\"square\"})})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,className:classes.nameGrid,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",align:\"center\",children:community.name})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,className:classes.nameGrid,children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"p\",justify:\"left\",children:community.title})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,style:{margin:'auto',textAlign:'center',marginTop:20},children:[props.mainUser!==null&&!_.find(community.members,function(member){return member.uniqueUserId===props.mainUser.uniqueUserId;})&&community.communityPrivacy==='public'&&community.moderator.uniqueUserId!==props.mainUser.uniqueUserId&&/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"contained\",onClick:publicJoin,disabled:joinSending,children:joinSending?/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"}):'join'}),props.mainUser!==null&&!_.find(community.members,function(member){return member.uniqueUserId===props.mainUser.uniqueUserId;})&&community.communityPrivacy==='private'&&community.moderator.uniqueUserId!==props.mainUser.uniqueUserid&&/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"contained\",onClick:privateJoinRequest,disabled:joinSending,children:joinSending?/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"}):'join'}),props.mainUser!==null&&_.find(community.members,function(member){return member.uniqueUserId===props.mainUser.uniqueUserId;})&&community.moderator.uniqueUserId!==props.mainUser.uniqueUserId&&/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"outlined\",onClick:leaveCommunity,disabled:joinSending,children:joinSending?/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"}):'leave'}),props.mainUser===null&&/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:function onClick(e){return history.push('/');},children:\"Sign up or log in!\"}),props.mainUser===null&&community.communityPrivacy==='private'&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",align:\"center\",children:\"This community is private\"})}),props.mainUser!==null&&!_.find(community.members,function(member){return member.uniqueUserId===props.mainUser.uniqueUserId;})&&community.communityPrivacy==='private'&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",align:\"center\",children:\"This community is private\"})}),props.mainUser!==null&&_.find(community.members,function(member){return member.uniqueUserId===props.mainUser.uniqueUserId;})&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{marginTop:20,marginBottom:20},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",style:{margin:'auto'},onClick:function onClick(e){return history.push(\"/community/chat/\".concat(community.name));},children:\"Chat\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"outlined\",onClick:function onClick(e){return setPostDialog(true);},children:\"Post\"})})]})]}),props.mainUser!==null&&_.find(community.members,function(member){return member.uniqueUserId===props.mainUser.uniqueUserId;})&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Dialog,{open:postDialog,fullScreen:true,children:/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsxs(AppBar,{color:\"primary\",hidden:posting,children:[/*#__PURE__*/_jsx(Icon,{path:mdiClose,size:1,title:\"Dialog close\",style:{cursor:'pointer'},onClick:function onClick(){return setPostDialog(false);}}),/*#__PURE__*/_jsxs(Tabs,{value:curTab,onChange:function onChange(e,newVal){return setTab(newVal);},centered:true,children:[/*#__PURE__*/_jsx(Tab,_objectSpread(_objectSpread({},a11yProps(0)),{},{label:\"Text\",disabled:posting})),/*#__PURE__*/_jsx(Tab,_objectSpread(_objectSpread({},a11yProps(1)),{},{label:\"Photo\",disabled:posting})),/*#__PURE__*/_jsx(Tab,_objectSpread(_objectSpread({},a11yProps(2)),{},{label:\"Video\",disabled:posting})),/*#__PURE__*/_jsx(Tab,_objectSpread(_objectSpread({},a11yProps(3)),{},{label:\"Link\",disabled:posting}))]})]}),/*#__PURE__*/_jsx(TabPanel,{index:0,value:curTab,children:/*#__PURE__*/_jsxs(ValidatorForm,{ref:textFormRef,onSubmit:function onSubmit(e){return e.preventDefault();},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",component:\"small\",color:textPostTitle.length>75?'error':'default',align:\"center\",children:[textPostTitle.length,\"/75\"]}),/*#__PURE__*/_jsx(TextValidator,{label:\"Post title\",placeholder:\"Enter a title for your post of 75 characters or less\",value:textPostTitle,onChange:function onChange(e){return setTextPostTitle(e.target.value);},helperText:\"Enter a title for this text post\",validators:['titleLength'],errorMessages:['Title can only be up to 75 characters'],InputLabelProps:{shrink:true},color:\"primary\",variant:\"outlined\",fullWidth:true}),/*#__PURE__*/_jsxs(Typography,{style:{marginTop:30},variant:\"body1\",component:\"small\",color:textPost.length>3000?'error':'default',align:\"center\",children:[textPost.length,\"/3000\"]}),/*#__PURE__*/_jsx(TextValidator,(_jsx2={label:\"Text post\",placeholder:\"Share a text post!\",value:textPost,onChange:function onChange(e){return setTextPost(e.target.value);},helperText:\"Enter a text post of up to 3,000 characters long!\",validators:['requiredText','textLength'],errorMessages:['Must enter some text!','Text post cannot be more than 3,000 characters long!'],variant:\"outlined\",InputLabelProps:{shrink:true},color:\"primary\"},_defineProperty(_jsx2,\"variant\",\"outlined\"),_defineProperty(_jsx2,\"rows\",3),_defineProperty(_jsx2,\"multiline\",true),_defineProperty(_jsx2,\"required\",true),_defineProperty(_jsx2,\"fullWidth\",true),_jsx2)),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:sendTextPost,disabled:posting,children:posting?/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"}):'Upload'})]})}),/*#__PURE__*/_jsxs(TabPanel,{index:1,value:curTab,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",children:\"Post a photo\"}),/*#__PURE__*/_jsxs(\"label\",{\"html-for\":\"photoPost\",children:[/*#__PURE__*/_jsx(\"input\",{className:classes.input,type:\"file\",accept:\"image/jpg, image/jpeg, image/png\",id:\"photoPost\",name:\"photoPost\",onChange:handlePhotoChange,required:true}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",component:\"span\",\"aria-label\":\"Photo picker button\",children:/*#__PURE__*/_jsx(Icon,{path:mdiCamera,size:1,title:\"Photo upload icon\",\"aria-label\":\"Photo upload icon\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextField,{label:\"Caption\",placeholder:\"Enter a caption for your photo\",variant:\"outlined\",color:\"primary\",value:photoCaption,onChange:function onChange(e){return setPhotoCaption(e.target.value);},InputLabelProps:{shrink:true},rows:4,multiline:true,required:true,style:{marginTop:40},fullWidth:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{style:{marginTop:30},color:\"primary\",variant:\"outlined\",onClick:handlePhotoUpload,disabled:photoUploading,children:photoUploading?/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"}):'Upload Photo'})]}),/*#__PURE__*/_jsxs(TabPanel,{index:2,value:curTab,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",children:\"Post a video\"}),/*#__PURE__*/_jsxs(\"label\",{\"html-for\":\"videoPost\",children:[/*#__PURE__*/_jsx(\"input\",{className:classes.input,type:\"file\",accept:\"video/mp4, video/mov\",id:\"videoPost\",name:\"videoPost\",onChange:handleVideoChange,required:true}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",component:\"span\",\"aria-label\":\"Video picker button\",children:/*#__PURE__*/_jsx(Icon,{path:mdiVideo,size:1,title:\"Video upload icon\",\"aria-label\":\"Video upload icon\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextField,{label:\"Caption\",placeholder:\"Enter a caption for your video\",variant:\"outlined\",color:\"primary\",value:videoCaption,onChange:function onChange(e){return setVideoCaption(e.target.value);},InputLabelProps:{shrink:true},rows:4,multiline:true,required:true,style:{marginTop:40},fullWidth:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{style:{marginTop:30},color:\"primary\",variant:\"outlined\",onClick:handleVideoUpload,disabled:videoUploading,children:videoUploading?/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"}):'Upload Video'})]}),/*#__PURE__*/_jsx(TabPanel,{index:3,value:curTab,children:/*#__PURE__*/_jsxs(ValidatorForm,{ref:linkFormRef,onSubmit:function onSubmit(e){return e.preventDefault();},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",component:\"small\",color:textPostTitle.length>75?'error':'default',align:\"center\",children:[textPostTitle.length,\"/75\"]}),/*#__PURE__*/_jsx(TextValidator,{label:\"Post title\",placeholder:\"Enter a title for your post of 75 characters or less\",value:textPostTitle,onChange:function onChange(e){return setTextPostTitle(e.target.value);},helperText:\"Enter a title for this text post\",validators:['requiredText','titleLength'],errorMessages:['Must enter a title for all link posts','Title can only be up to 75 characters'],InputLabelProps:{shrink:true},color:\"primary\",variant:\"outlined\",fullWidth:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextValidator,(_jsx3={label:\"Link\",placeholder:\"Share a valid link!\",value:postLink,onChange:function onChange(e){return setPostLink(e.target.value);},helperText:\"Enter a valid url link.\",validators:['requiredText','validLink'],errorMessages:['Must enter a link!','The link that you enter must be formatted properly!'],variant:\"outlined\",InputLabelProps:{shrink:true},color:\"primary\"},_defineProperty(_jsx3,\"variant\",\"outlined\"),_defineProperty(_jsx3,\"required\",true),_defineProperty(_jsx3,\"fullWidth\",true),_jsx3)),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:sendLinkPost,disabled:posting,children:posting?/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"}):'Upload'})]})})]})})}),(community.communityPrivacy==='public'||props.mainUser!==null&&_.find(community.members,function(member){return member.uniqueUserId===props.mainUser.uniqueUserId;}))&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Paper,{className:classes.paper,style:{marginTop:10},children:/*#__PURE__*/_jsxs(Tabs,{value:curTab2,onChange:function onChange(e,newVal){return setTab2(newVal);},centered:true,style:{color:'rgb(255, 255, 255)'},children:[/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"Posts\"},a11yProps(0))),/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"About\"},a11yProps(1))),props.mainUser!==null&&community.moderator.uniqueUserId===props.mainUser.uniqueUserId&&/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"Settings\"},a11yProps(2)))]})}),/*#__PURE__*/_jsxs(TabPanel,{value:0,index:curTab2,children:[props.posts.length<1&&/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",align:\"center\",children:\"No posts\"}),props.posts.length>0&&/*#__PURE__*/_jsx(\"div\",{children:props.posts.map(function(post,index){return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'left'},children:[props.mainUser!==null&&/*#__PURE__*/_jsx(CommunityPostsCard,{post:post,id:post.uniquePostId,moderator:props.mainUser.uniqueUserId===community.moderator.uniqueUserId}),props.mainUser===null&&/*#__PURE__*/_jsx(NonUserCommunityPostsCard,{post:post,id:post.uniquePostId}),index<props.posts.length-1&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:20}})]},index);})})]})]})]});}else{//If the community is null, simply return a Backdrop with a CircularProgress inside \nreturn/*#__PURE__*/_jsx(Backdrop,{open:true,children:/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"})});}}function mapStateToProps(state){return{mainUser:state.userReducer.user,primary:state.userThemeReducer.primary,posts:state.visitorPostsReducer.posts};}export default connect(mapStateToProps)(Community);","map":{"version":3,"sources":["/Users/simeonikudabo/Downloads/geocities/src/components/Community.js"],"names":["React","useState","useEffect","useRef","Grid","Typography","Paper","Tabs","Tab","Avatar","Backdrop","CircularProgress","List","ListItem","Divider","Button","axios","swal","Dialog","DialogContent","AppBar","Toolbar","Hidden","_","connect","useHistory","useParams","makeStyles","IconButton","Icon","mdiClose","mdiCamera","mdiVideo","ValidatorForm","TextValidator","CommunityPostsCard","NonUserCommunityPostsCard","Resizer","TextField","TabPanel","props","children","value","index","other","marginTop","textAlign","a11yProps","id","Community","community","setCommunity","useStyles","root","centerContent","margin","nameGrid","avatarLg","height","width","avatarSm","paper","backgroundColor","communityTheme","closeIcon","color","input","display","classes","history","params","textFormRef","linkFormRef","joinSending","setJoinSending","postDialog","setPostDialog","curTab","setTab","curTab2","setTab2","textPost","setTextPost","textPostTitle","setTextPostTitle","photoPost","setPhotoPost","photoPostTitle","setPhotoPostTitle","videoPost","setVideoPost","videoPostTitle","setVideoPostTitle","linkPost","setLinkPost","linkPostTitle","setLinkPostTitle","posting","setPosting","uploadPhoto","setUploadPhoto","photoCaption","setPhotoCaption","photoUploading","setPhotoUploading","uploadVideo","setUploadVideo","videoUploading","setVideoUploading","videoCaption","setVideoCaption","postLink","setPostLink","regularExpressions","urlRegex","addValidationRule","v","length","trim","test","method","url","communityName","then","response","data","dispatch","type","payload","posts","mainUser","find","blockList","person","uniqueUserId","goBack","catch","err","console","log","message","publicJoin","JSON","stringify","username","name","headers","result","privateJoinRequest","moderatorUniqueUserId","moderator","sendTextPost","isValid","current","isFormValid","date","Date","months","month","getMonth","day","getDate","year","getFullYear","dateString","text","title","uniquePostId","now","context","privacy","communityPrivacy","link","textType","sendLinkPost","resizerFunction","file","Promise","resolve","imageFileResizer","uri","handlePhotoChange","e","target","files","resizedPhoto","handlePhotoUpload","fd","FormData","append","handleVideoChange","handleVideoUpload","ext","split","pop","toString","leaveCommunity","avatar","members","member","uniqueUserid","push","marginBottom","cursor","newVal","preventDefault","shrink","map","post","mapStateToProps","state","userReducer","user","primary","userThemeReducer","visitorPostsReducer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Avatar from '@material-ui/core/Avatar';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Hidden from '@material-ui/core/Hidden';\nimport * as _ from 'underscore';\nimport { connect } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom'; \nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport Icon from '@mdi/react';\nimport { mdiClose, mdiCamera, mdiVideo } from '@mdi/js';\nimport PropTypes from 'prop-types';\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\nimport CommunityPostsCard from './CommunityPostsCard';\nimport NonUserCommunityPostsCard from './NonUserCommunityPostsCard';\nimport Resizer from 'react-image-file-resizer';\nimport TextField from '@material-ui/core/TextField';\n\nfunction TabPanel(props) {\n    //This component will serve as the panel for each individual tab.\n    const { children, value, index, ...other } = props;\n\n    return (\n        <div \n            role='tabpanel'\n            hidden={index !== value} \n            id={`tabpanel-${index}`}\n            aria-label={`tab-${index}`}\n            aria-labelledby={`tab-${index}`}\n            {...other}\n            style={{\n                marginTop: 100,\n            }}\n        >\n            {value === index &&\n                <Grid \n                    item \n                    xs\n                    style={{\n                        textAlign: 'center',\n                    }}\n                >\n                    {children}\n                </Grid>\n            }\n        </div>\n    );\n}\n\nTabPanel.propTypes = {\n    children: PropTypes.node,\n    value: PropTypes.any.isRequired,\n    index: PropTypes.any.isRequired,\n}\n\nfunction a11yProps(index) {\n    return {\n        id: `tab-${index}`,\n        'aria-controls': `tabpanel-${index}`,\n    };\n}\n\n\nfunction Community(props) {\n    const [community, setCommunity] = useState(null); //This variable and setter will manipulate community.\n    const useStyles = makeStyles(() => ({\n        root: {\n            marginTop: 100,\n        },\n        centerContent: {\n            margin: 'auto',\n            textAlign: 'center',\n        },\n        nameGrid: {\n            margin: 'auto',\n            textAlign: 'center',\n            marginTop: 20,\n        },\n        avatarLg: {\n            height: 168,\n            width: 168,\n            margin: 'auto',\n        },\n        avatarSm: {\n            height: 128,\n            width: 128,\n            margin: 'auto',\n        },\n        paper: {\n            backgroundColor: community !== null ? community.communityTheme : 'rgb(0, 20, 60)',\n        },\n        closeIcon: {\n            color: 'rgb(255, 255, 255)',\n        },\n        input: {\n            display: 'none',\n        },\n    }));\n    const classes = useStyles(); //Custom styles for the component. \n    const history = useHistory(); //Window history API.\n    const params = useParams(); //Access url parameters. \n    const textFormRef = useRef(null); //Ref for validator form when we upload posts.\n    const linkFormRef = useRef(null);\n    const [joinSending, setJoinSending] = useState(false); //Will disable the button while we send a join or request join to the server.\n    const [postDialog, setPostDialog] = useState(false); //Will open and close the dialog to make a post.\n    const [curTab, setTab] = useState(0); //Sets the current tab in post upload dialog. \n    const [curTab2, setTab2] = useState(0); //For the second tab that displays posts, about (and settings if the user is not null and the uniqueUserId matches the mainUser, for moderation)\n    const [textPost, setTextPost] = useState(''); //Value for text post. \n    const [textPostTitle, setTextPostTitle] = useState(''); //Value for title.\n    const [photoPost, setPhotoPost] = useState(null); //Value for photo upload. \n    const [photoPostTitle, setPhotoPostTitle] = useState(''); //Value for photo post title. \n    const [videoPost, setVideoPost] = useState(null); //Value for video post. \n    const [videoPostTitle, setVideoPostTitle] = useState(''); //Video post title. \n    const [linkPost, setLinkPost] = useState(''); //Value for the link in a link post. \n    const [linkPostTitle, setLinkPostTitle] = useState(''); //Value for link post title. \n    const [posting, setPosting] = useState(false); //Will handle disabling buttons and bars when a post is being sent to the server.\n    const [uploadPhoto, setUploadPhoto] = useState(null); //Will control any photo post photo that we upload to the server. \n    const [photoCaption, setPhotoCaption] = useState('');//Variable and setter for a caption for a photo upload. \n    const [photoUploading, setPhotoUploading] = useState(false); //Used to alter functionality when the photo post is being uploaded to the server. \n    const [uploadVideo, setUploadVideo] = useState(null); //Variable and setter for a video to be uploaded \n    const [videoUploading, setVideoUploading] = useState(null); //Variable and setter to disable button while video is uploading. \n    const [videoCaption, setVideoCaption] = useState(null); //Variable and setter for the caption for a video post. \n    const [postLink, setPostLink] = useState(''); //This variable will store the link post link. \n    const regularExpressions = {\n        urlRegex: /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i,\n    }; //This will store the regular expressions to make sure link posts have valid url's. \n\n\n    useEffect(() => {\n        //Add validation rules \n        ValidatorForm.addValidationRule('titleLength', v => {\n            if(v.length > 75) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n\n        //Rule for text or caption to be 3,000 characters or less. \n        ValidatorForm.addValidationRule('textLength', v => {\n            if(v.length > 3000) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n\n        //Validation rule to ensure textPost and linkPost are not empty. \n        ValidatorForm.addValidationRule('requiredText', v => {\n            if(v.trim() === '') {\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n\n        //Validation rule will ensure links are valid \n        ValidatorForm.addValidationRule('validLink', v => {\n            if(!regularExpressions.urlRegex.test(v)) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n\n        //First we need to fetch the community with axios. \n        if(true) {\n            return axios({\n                method: 'GET',\n                url: `http://10.162.4.11:3001/api/fetch/community/${params.communityName}`,\n            }).then(response => {\n                if(response.data.community) {\n                    setCommunity(response.data.community);\n                    props.dispatch({type: 'ThemeChange', payload: response.data.community.communityTheme}); //Update the theme to match the community theme.\n                    props.dispatch({type: 'visitorPosts/updatePosts', payload: response.data.posts}); //Update the posts to match what a visitor viewing these posts will see.\n                    //Now determine if the mainUser is in the blockList, and re-route to the previous page if they are. \n                    if(props.mainUser !== null) {\n                        if(_.find(response.data.community.blockList, person => person.uniqueUserId === props.mainUser.uniqueUserId)) {\n                            swal(\n                                'Uh Oh!',\n                                'You are blocked from this community!',\n                                'error',\n                            );\n                            history.goBack(1);\n                        }\n                    }\n                }\n                else {\n                    swal(\n                        'Uh Oh!',\n                        'We could not find that community!',\n                        'error',\n                    );\n                    history.goBack(1);\n                }\n            }).catch(err => {\n                console.log(err.message);\n                swal(\n                    'Uh Oh!',\n                    'There was an error finding that community! Please try again.',\n                    'error',\n                );\n                history.goBack(1);\n            });\n        }\n    }, []);\n\n    function publicJoin() {\n        //Function that will enable a member to join a public community. \n        let data = JSON.stringify({\n            username: props.mainUser.username,\n            uniqueUserId: props.mainUser.uniqueUserId,\n            name: community.name,\n        });\n\n        return axios({\n            method: 'POST',\n            url: 'http://10.162.4.11:3001/api/public/join/community',\n            data: data,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        }).then(response => {\n            if(response.data.result === 'success') {\n                swal(\n                    'Great!',\n                    'Successfully joined community!',\n                    'success',\n                );\n                setJoinSending(false);\n                setCommunity(response.data.community);\n            }\n            else {\n                swal(\n                    'Uh Oh!',\n                    'There was an error with joining this community! Please try again',\n                    'error',\n                );\n                setJoinSending(false);\n            }\n        }).catch(err => {\n            console.log(err.message);\n            swal(\n                'Uh Oh!',\n                'There was an error joining this community! Please try again',\n                'error',\n            );\n            setJoinSending(false);\n        });\n    }\n\n    function privateJoinRequest() {\n        //This function will handle sending a join notification to the moderator. \n        setJoinSending(true);\n        let data = JSON.stringify({\n            uniqueUserId: props.mainUser.uniqueUserId,\n            username: props.mainUser.username,\n            moderatorUniqueUserId: community.moderator.uniqueUserId,\n            name: community.name,\n        });\n\n        return axios({\n            method: 'POST',\n            url: 'http://10.162.4.11:3001/api/community/join/request',\n            data: data,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        }).then(response => {\n            if(response.data === 'duplicate') {\n                swal(\n                    'Uh Oh!',\n                    'You have already sent a request to join this community!',\n                    'error',\n                );\n                setJoinSending(false);\n            }\n            else {\n                swal(\n                    'Great!',\n                    'Community join request sent!',\n                    'success',\n                );\n                setJoinSending(false);\n            }\n        }).catch(err => {\n            console.log(err.message);\n            swal(\n                'Uh Oh!',\n                'There was an error sending a request to join this community! Please try again.',\n                'error',\n            );\n            setJoinSending(false);\n        });\n    }\n\n    async function sendTextPost() {\n        //Function that will handle uploading a text post to the server. \n        setPosting(true); \n        let isValid = textFormRef.current.isFormValid();\n        if(!isValid) {\n            swal(\n                'Uh Oh!',\n                'Make sure the form is filled out properly',\n                'error',\n            );\n            setPosting(false);\n            return false;\n        }\n        else {\n            let date = new Date();\n            let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n            let month = months[date.getMonth()];\n            let day = date.getDate();\n            let year = date.getFullYear();\n            let dateString = `${month} ${day}, ${year}`;\n            let data = JSON.stringify({\n                text: textPost,\n                title: textPostTitle,\n                uniqueUserId: props.mainUser.uniqueUserId,\n                username: props.mainUser.username,\n                community: community.name,\n                type: 'text',\n                dateString: dateString,\n                uniquePostId: Date.now() + props.mainUser.username + 'textpost' + 'info' + community.name,\n                context: 'community',\n                privacy: community.communityPrivacy,\n                link: postLink ? postLink : '',\n                textType: 'link',\n            });\n\n            return axios({\n                method: 'post',\n                url: 'http://10.162.4.11:3001/api/add/community/text/post',\n                data: data,\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            }).then(response => {\n                if(response.data.result === 'success') {\n                    props.dispatch({type: 'visitorPosts/updatePosts', payload: response.data.posts});\n                    swal(\n                        'Great!',\n                        'Successfully uploaded text post!',\n                        'success',\n                    );\n                    setTextPost('');\n                    setTextPostTitle('');\n                    setPosting(false);\n                    setPostDialog(false);\n                }\n                else {\n                    swal(\n                        'Uh Oh!',\n                        'There was an error sending that text post!',\n                        'error',\n                    );\n                    setPosting(false);\n                }\n            }).catch(err => {\n                console.log(err.message);\n                swal(\n                    'Uh Oh!',\n                    'There was an error sending that text post! Please try again.',\n                    'error',\n                );\n                setPosting(false);\n            });\n        }\n    }\n\n    function sendLinkPost() {\n        //This function will handle sending a post with a link URL to the server.\n        setPosting(true); \n        let isValid = linkFormRef.current.isFormValid();\n\n        if(!regularExpressions.urlRegex.test(postLink)) {\n            swal(\n                'Uh Oh!',\n                'You must enter a valid URL to create a link post',\n                'error',\n            ); \n            setPosting(false);\n            return false;\n        }\n\n        else if(textPostTitle === '') {\n            swal(\n                'Uh Oh!',\n                'You must enter a title for all link posts.',\n                'error',\n            );\n            setPosting(false);\n            return false;\n        }\n\n        else if(!isValid) {\n            swal(\n                'Uh Oh!',\n                'Make sure the form is filled out properly',\n                'error',\n            );\n            setPosting(false);\n            return false;\n        }\n        else {\n            let date = new Date();\n            let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n            let month = months[date.getMonth()];\n            let day = date.getDate();\n            let year = date.getFullYear();\n            let dateString = `${month} ${day}, ${year}`;\n            let data = JSON.stringify({\n                text: '',\n                title: textPostTitle,\n                link: postLink,\n                uniqueUserId: props.mainUser.uniqueUserId,\n                username: props.mainUser.username,\n                community: community.name,\n                type: 'link',\n                dateString: dateString,\n                uniquePostId: Date.now() + props.mainUser.username + 'textpost' + 'info' + community.name,\n                context: 'community',\n                privacy: community.communityPrivacy,\n            });\n\n            return axios({\n                method: 'post',\n                url: 'http://10.162.4.11:3001/api/add/community/text/post',\n                data: data,\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            }).then(response => {\n                if(response.data.result === 'success') {\n                    props.dispatch({type: 'visitorPosts/updatePosts', payload: response.data.posts});\n                    swal(\n                        'Great!',\n                        'Successfully uploaded link post!',\n                        'success',\n                    );\n                    setTextPost('');\n                    setTextPostTitle('');\n                    setPosting(false);\n                    setPostDialog(false);\n                }\n                else {\n                    swal(\n                        'Uh Oh!',\n                        'There was an error sending that link post!',\n                        'error',\n                    );\n                    setPosting(false);\n                }\n            }).catch(err => {\n                console.log(err.message);\n                swal(\n                    'Uh Oh!',\n                    'There was an error sending that link post! Please try again.',\n                    'error',\n                );\n                setPosting(false);\n            });\n        }\n    }\n\n    function resizerFunction(file) {\n        //This is a wrapper for the file resizer \n        return new Promise(resolve => {\n            Resizer.imageFileResizer(\n                file,\n                600,\n                600,\n                'JPEG',\n                100,\n                0,\n                uri => {\n                    resolve(uri);\n                },\n                'blob',\n            );\n        });\n    }\n\n    async function handlePhotoChange(e) {\n        //This function will handle passing a photo that is uploaded to the resizer function to rersize the photo\n        let file = e.target.files[0];\n        let resizedPhoto = await resizerFunction(file);\n        setUploadPhoto(resizedPhoto);\n    }\n\n    function handlePhotoUpload() {\n        //Function that will handle sending an uploaded photo to the server after resizing it.\n        //Might need to make some edits here since the photo will be community-based\n        setPhotoUploading(true);\n\n        if(!uploadPhoto) {\n            swal(\n                'Uh Oh!',\n                'You must select a photo to upload!',\n                'error',\n            );\n            setPhotoUploading(false);\n        }\n        else {\n            let data = new Date();\n            let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n            let month = months[data.getMonth()];\n            let day = data.getDate();\n            let year = data.getFullYear();\n            let dateString = `${month} ${day}, ${year}`;\n            let fd = new FormData();\n            fd.append('photo', uploadPhoto, 'photo.jpg');\n            fd.append('caption', photoCaption);\n            fd.append('uniqueUserId', props.mainUser.uniqueUserId);\n            fd.append('uniquePostId', Date.now() + props.mainUser.username + 'photoupload' + props.mainUser.uniqueUserId);\n            fd.append('username', props.mainUser.username);\n            fd.append('dateString', dateString);\n            fd.append('type', 'photo');\n            fd.append('context', 'community');\n            fd.append('link', `http://192.168.0.9:3000/profile#${Date.now()}${props.mainUser.username}photoupload${props.mainUser.uniqueUserId}`);\n            fd.append('community', community.name); //Name of the community that this post belongs to. \n            fd.append('title', '');\n            fd.append('privacy', community.communityPrivacy);\n            fd.append('text', '');\n\n            return axios({\n                method: 'POST',\n                url: 'http://10.162.4.11:3001/api/upload/photo',\n                data: fd,\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                },\n            }).then(response => {\n                if(response.data.posts) {\n                    props.dispatch({type: 'visitorPosts/updatePosts', payload: response.data.posts});\n                    swal(\n                        'Great!',\n                        'Successfully uploaded photo!',\n                        'success',\n                    );\n                    setPhotoCaption('');\n                    setUploadPhoto(null);\n                    setPostDialog(false);\n                    setPhotoUploading(false);\n                }\n                else {\n                    swal(\n                        'Uh Oh!',\n                        'There was an error uploading that photo!',\n                        'error',\n                    );\n                    setPhotoUploading(false);\n                }\n            }).catch(err => {\n                console.log(err.message);\n                swal(\n                    'Uh Oh!',\n                    'There was an error uploading that photo!',\n                    'error',\n                );\n                setPhotoUploading(false);\n            });\n        }\n    }\n\n    function handleVideoChange(e) {\n        //This function will handle setting the uploadVideo variable to the valua of the file. \n        setUploadVideo(e.target.files[0]);\n    }\n\n    function handleVideoUpload() {\n        //Function that will handle sending an uploaded video to the server.\n        setVideoUploading(true);\n\n        if(!uploadVideo) {\n            swal(\n                'Uh Oh!',\n                'You must select a video to upload!',\n                'error',\n            );\n            setVideoUploading(false);\n        }\n        else {\n            let data = new Date();\n            let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n            let month = months[data.getMonth()];\n            let day = data.getDate();\n            let year = data.getFullYear();\n            let dateString = `${month} ${day}, ${year}`;\n            let ext = uploadVideo.name.split('.').pop().toString(); //This will get the extension name of the video \n            ext = 'video.' + ext;\n            let fd = new FormData();\n            fd.append('photo', uploadVideo, ext); //Keep the name \"photo\" for the server upload although it is technically a video!\n            fd.append('caption', videoCaption);\n            fd.append('uniqueUserId', props.mainUser.uniqueUserId);\n            fd.append('uniquePostId', Date.now() + props.mainUser.username + 'videoupload' + props.mainUser.uniqueUserId);\n            fd.append('username', props.mainUser.username);\n            fd.append('dateString', dateString);\n            fd.append('type', 'video');\n            fd.append('context', 'community');\n            fd.append('link', `http://192.168.0.9:3000/profile#${Date.now()}${props.mainUser.username}videoupload${props.mainUser.uniqueUserId}`);\n            fd.append('community', community.name);\n            fd.append('communityPost', true);\n            fd.append('title', '');\n            fd.append('privacy', community.communityPrivacy);\n            fd.append('text', '');\n\n            return axios({\n                method: 'POST',\n                url: 'http://10.162.4.11:3001/api/upload/photo',\n                data: fd,\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                },\n            }).then(response => {\n                if(response.data.posts) {\n                    props.dispatch({type: 'visitorPosts/updatePosts', payload: response.data.posts});\n                    swal(\n                        'Great!',\n                        'Successfully uploaded video!',\n                        'success',\n                    );\n                    setVideoCaption('');\n                    setUploadVideo(null);\n                    setPostDialog(false);\n                    setVideoUploading(false);\n                }\n                else {\n                    swal(\n                        'Uh Oh!',\n                        'There was an error uploading that video!',\n                        'error',\n                    );\n                    setVideoUploading(false);\n                }\n            }).catch(err => {\n                console.log(err.message);\n                swal(\n                    'Uh Oh!',\n                    'There was an error uploading that video!',\n                    'error',\n                );\n                setVideoUploading(false);\n            });\n        }\n    }\n\n    function leaveCommunity() {\n        //This function will remove a member from a community if they are within it. \n        setJoinSending(true);\n        let data = JSON.stringify({\n            username: props.mainUser.username,\n            uniqueUserId: props.mainUser.uniqueUserId,\n            name: community.name,\n        });\n\n        return axios({\n            method: 'POST',\n            url: 'http://10.162.4.11:3001/api/leave/community',\n            data: data,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        }).then(response => {\n            if(response.data.result === 'success') {\n                swal(\n                    'Great!',\n                    'You have successfully left this community',\n                    'success',\n                );\n                setCommunity(response.data.community);\n                setJoinSending(false);\n            }\n            else {\n                swal(\n                    'Uh Oh!',\n                    'There was an error leaving this community! Please try again.',\n                    'error',\n                );\n                setJoinSending(false);\n            }\n        }).catch(err => {\n            console.log(err.message);\n            swal(\n                'Uh Oh!',\n                'There was an error leaving this community! Please try again.',\n                'error',\n            );\n            setJoinSending(false);\n        });\n    }\n\n    if(community !== null) {\n        return (\n            <Grid \n                className={classes.root} \n                container \n            >\n                <Grid \n                    item \n                    xs={12} \n                    className={classes.centerContent} \n                >\n                    <Hidden \n                        smDown \n                    >\n                        <Avatar \n                            className={classes.avatarLg} \n                            src={`http://10.162.4.11:3001/api/get-photo/${community.avatar}`}\n                            alt={`${community.name} avatar`}\n                            title={`${community.name} avatar`}\n                            variant='square'\n                        />\n                    </Hidden>\n                    <Hidden \n                        mdUp \n                    >\n                        <Avatar \n                            src={`http://10.162.4.11:3001/api/get-photo/${community.avatar}`}\n                            className={classes.avatarSm} \n                            title={`${community.name} avatar`}\n                            alt={`${community.name} avatar`}\n                            variant='square'\n                        />\n                    </Hidden>\n                </Grid>\n                {/* The grid below will store the name of the community */}\n                <Grid \n                    item \n                    xs={12} \n                    className={classes.nameGrid} \n                >\n                    <Typography \n                        variant='h6' \n                        component='h6' \n                        align='center' \n                    >\n                        {community.name}\n                    </Typography>\n                </Grid>\n                {/* End of the grid to display the community name */}\n                {/* Below is the Grid to display the title of the community */}\n                <Grid \n                    item \n                    xs={12}\n                    className={classes.nameGrid} \n                >\n                    <Typography \n                        variant='body1' \n                        component='p'\n                        justify='left' \n                    >\n                        {community.title}\n                    </Typography>\n                </Grid>\n                {/* End of the Grid to display the title of the community */}\n                {/* Now create a button for the user if they are logged in, not a member, and the community is public */}\n                <Grid \n                    item \n                    xs={12}\n                    style={{\n                        margin: 'auto',\n                        textAlign: 'center',\n                        marginTop: 20,\n                    }}\n                >\n                    {/* Button if the user is logged in, not a member, and the community is public */}\n                    {(props.mainUser !== null && !_.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && community.communityPrivacy === 'public' && community.moderator.uniqueUserId !== props.mainUser.uniqueUserId) &&\n                        <Button \n                            color='primary' \n                            variant='contained' \n                            onClick={publicJoin}\n                            disabled={joinSending}\n                        >\n                            {joinSending ? <CircularProgress color='primary' /> : 'join'}\n                        </Button>\n                    }\n                    {/* Below is the Button if the user is logged in, not a member, and the community is private */}\n                    {(props.mainUser !== null && !_.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && community.communityPrivacy === 'private' && community.moderator.uniqueUserId !== props.mainUser.uniqueUserid) &&\n                        <Button \n                            color='primary' \n                            variant='contained' \n                            onClick={privateJoinRequest}\n                            disabled={joinSending}\n                        >\n                            {joinSending ? <CircularProgress color='primary' /> : 'join'}\n                        </Button>\n                    }\n                    {(props.mainUser !== null && _.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && community.moderator.uniqueUserId !==  props.mainUser.uniqueUserId) &&\n                        <Button \n                            color='primary'\n                            variant='outlined' \n                            onClick={leaveCommunity}\n                            disabled={joinSending}\n                        >\n                            {joinSending ? <CircularProgress color='primary' /> : 'leave'}\n                        </Button>\n                    }\n                    {/* Below, we will add a button to route someone who is not signed up or logged in to the sign up page */}\n                    {props.mainUser === null &&\n                        <Button \n                            color='primary' \n                            onClick={e => history.push('/')}\n                        >\n                            Sign up or log in!\n                        </Button>\n                    }\n                    {(props.mainUser === null && community.communityPrivacy === 'private') &&\n                        <Grid \n                            item \n                            xs={12} \n                        >\n                            <Typography \n                                variant='h6' \n                                component='h6' \n                                align='center' \n                            >\n                                This community is private\n                            </Typography>\n                        </Grid>\n                    }\n                    {(props.mainUser !== null && !_.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId) && community.communityPrivacy === 'private') && \n                        <Grid \n                            item \n                            xs={12} \n                        >\n                            <Typography \n                                variant='h6' \n                                component='h6' \n                                align='center' \n                            >\n                                This community is private\n                            </Typography>\n                        </Grid>\n                    }\n                    {/*Now I will have two buttons in two grids for members of the community to either chat or post content to the community */}\n                    {(props.mainUser !== null && _.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId)) &&\n                        <div>\n                            <Grid \n                                item \n                                xs={12} \n                                style={{\n                                    marginTop: 20,\n                                    marginBottom: 20,\n                                }}\n                            >\n                                <Button \n                                    variant='contained' \n                                    color='primary' \n                                    style={{\n                                        margin: 'auto',\n                                    }}\n                                    onClick={e => history.push(`/community/chat/${community.name}`)}\n                                >\n                                    Chat \n                                </Button>\n                            </Grid>\n                            <Grid \n                                item \n                                xs={12} \n                            >\n                                <Button \n                                    color='primary' \n                                    variant='outlined' \n                                    onClick={e => setPostDialog(true)}\n                                >\n                                    Post \n                                </Button>\n                            </Grid>\n                        </div>\n                    }\n                    {/* This is the end of the two Grids for a the chat Button and the Post button */}\n                    {/*Below create the Dialog that will open when the user tries to make a post. Only show when a user is part of the community */}\n                </Grid>\n                {(props.mainUser !== null && _.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId)) &&\n                    <Grid \n                        item \n                        xs={12} \n                    >\n                        <Dialog \n                            open={postDialog} \n                            fullScreen\n                        >\n                            <DialogContent>\n                                <AppBar \n                                    color='primary'\n                                    hidden={posting}\n                                >\n                                    <Icon \n                                        path={mdiClose} \n                                        size={1} \n                                        title='Dialog close' \n                                        style={{\n                                            cursor: 'pointer'\n                                        }}\n                                        onClick={() => setPostDialog(false)}\n                                    />\n                                    <Tabs \n                                        value={curTab}\n                                        onChange={(e, newVal) => setTab(newVal)} \n                                        centered\n                                    >\n                                        <Tab \n                                            {...a11yProps(0)} \n                                            label='Text' \n                                            disabled={posting}\n                                        />\n                                        <Tab \n                                            {...a11yProps(1)} \n                                            label='Photo' \n                                            disabled={posting}\n                                        />\n                                        <Tab \n                                            {...a11yProps(2)}\n                                            label='Video' \n                                            disabled={posting}\n                                        />\n                                        <Tab \n                                            {...a11yProps(3)}\n                                            label='Link'\n                                            disabled={posting} \n                                        />\n                                    </Tabs>\n                                </AppBar>\n                                <TabPanel \n                                    index={0}\n                                    value={curTab}\n                                >\n                                    <ValidatorForm\n                                        ref={textFormRef} \n                                        onSubmit={e => e.preventDefault()}\n                                    >\n                                        <Typography \n                                            variant='body1' \n                                            component='small' \n                                            color={textPostTitle.length > 75 ? 'error' : 'default'}\n                                            align='center' \n                                        >\n                                            {textPostTitle.length}/75\n                                        </Typography>\n                                        <TextValidator \n                                            label='Post title'\n                                            placeholder='Enter a title for your post of 75 characters or less'\n                                            value={textPostTitle}\n                                            onChange={e => setTextPostTitle(e.target.value)}\n                                            helperText='Enter a title for this text post'\n                                            validators={['titleLength']}\n                                            errorMessages={['Title can only be up to 75 characters']}\n                                            InputLabelProps={{\n                                                shrink: true,\n                                            }}\n                                            color='primary'\n                                            variant='outlined'\n                                            fullWidth\n                                        />\n                                        <Typography \n                                            style={{\n                                                marginTop: 30,\n                                            }}\n                                            variant='body1' \n                                            component='small'\n                                            color={textPost.length > 3000 ? 'error' : 'default'}\n                                            align='center' \n                                        >\n                                            {textPost.length}/3000\n                                        </Typography>\n                                        <TextValidator \n                                            label='Text post'\n                                            placeholder='Share a text post!'\n                                            value={textPost}\n                                            onChange={e => setTextPost(e.target.value)}\n                                            helperText='Enter a text post of up to 3,000 characters long!'\n                                            validators={['requiredText', 'textLength']}\n                                            errorMessages={['Must enter some text!', 'Text post cannot be more than 3,000 characters long!']}\n                                            variant='outlined' \n                                            InputLabelProps={{\n                                                shrink: true,\n                                            }}\n                                            color='primary' \n                                            variant='outlined' \n                                            rows={3}\n                                            multiline \n                                            required \n                                            fullWidth \n                                        />\n                                        <Button \n                                            variant='contained' \n                                            color='primary' \n                                            onClick={sendTextPost}\n                                            disabled={posting}\n                                        >\n                                            {posting ? <CircularProgress color='primary' /> : 'Upload'}\n                                        </Button>\n                                    </ValidatorForm>\n                                </TabPanel>\n                                <TabPanel \n                                    index={1} \n                                    value={curTab} \n                                >\n                                    <Typography \n                                        variant='h6' \n                                        component='h6' \n                                    >\n                                        Post a photo\n                                    </Typography>\n                                    <label \n                                        html-for='photoPost' \n                                    >\n                                        <input \n                                            className={classes.input}\n                                            type='file'\n                                            accept='image/jpg, image/jpeg, image/png' \n                                            id='photoPost'\n                                            name='photoPost' \n                                            onChange={handlePhotoChange} \n                                            required \n                                        />\n                                        <Button \n                                            variant='contained' \n                                            color='primary' \n                                            component='span' \n                                            aria-label='Photo picker button'\n                                        >\n                                            <Icon \n                                                path={mdiCamera} \n                                                size={1} \n                                                title='Photo upload icon' \n                                                aria-label='Photo upload icon' \n                                            />\n                                        </Button>\n                                    </label>\n                                    <br/>\n                                    <TextField \n                                        label='Caption'\n                                        placeholder='Enter a caption for your photo' \n                                        variant='outlined' \n                                        color='primary' \n                                        value={photoCaption} \n                                        onChange={e => setPhotoCaption(e.target.value)} \n                                        InputLabelProps={{\n                                            shrink: true,\n                                        }}\n                                        rows={4}\n                                        multiline\n                                        required\n                                        style={{\n                                            marginTop: 40,\n                                        }}\n                                        fullWidth\n                                    />\n                                    <br/>\n                                    <Button \n                                        style={{\n                                            marginTop: 30,\n                                        }}\n                                        color='primary' \n                                        variant='outlined' \n                                        onClick={handlePhotoUpload}\n                                        disabled={photoUploading}\n                                    >\n                                        {photoUploading ? <CircularProgress color='primary' /> : 'Upload Photo'}\n                                    </Button>\n                                </TabPanel>\n                                <TabPanel \n                                    index={2} \n                                    value={curTab} \n                                >\n                                    <Typography \n                                        variant='h6' \n                                        component='h6' \n                                    >\n                                        Post a video\n                                    </Typography>\n                                    <label \n                                        html-for='videoPost' \n                                    >\n                                        <input \n                                            className={classes.input}\n                                            type='file'\n                                            accept='video/mp4, video/mov'\n                                            id='videoPost'\n                                            name='videoPost' \n                                            onChange={handleVideoChange} \n                                            required \n                                        />\n                                        <Button \n                                            variant='contained' \n                                            color='primary' \n                                            component='span' \n                                            aria-label='Video picker button'\n                                        >\n                                            <Icon \n                                                path={mdiVideo} \n                                                size={1} \n                                                title='Video upload icon' \n                                                aria-label='Video upload icon' \n                                            />\n                                        </Button>\n                                    </label>\n                                    <br/>\n                                    <TextField \n                                        label='Caption'\n                                        placeholder='Enter a caption for your video' \n                                        variant='outlined' \n                                        color='primary' \n                                        value={videoCaption} \n                                        onChange={e => setVideoCaption(e.target.value)} \n                                        InputLabelProps={{\n                                            shrink: true,\n                                        }}\n                                        rows={4}\n                                        multiline\n                                        required\n                                        style={{\n                                            marginTop: 40,\n                                        }}\n                                        fullWidth\n                                    />\n                                    <br/>\n                                    <Button \n                                        style={{\n                                            marginTop: 30,\n                                        }}\n                                        color='primary' \n                                        variant='outlined' \n                                        onClick={handleVideoUpload}\n                                        disabled={videoUploading}\n                                    >\n                                        {videoUploading ? <CircularProgress color='primary' /> : 'Upload Video'}\n                                    </Button>\n                                </TabPanel>\n                                <TabPanel \n                                    index={3}\n                                    value={curTab}\n                                >\n                                    <ValidatorForm\n                                        ref={linkFormRef} \n                                        onSubmit={e => e.preventDefault()}\n                                    >\n                                        <Typography \n                                            variant='body1' \n                                            component='small' \n                                            color={textPostTitle.length > 75 ? 'error' : 'default'}\n                                            align='center' \n                                        >\n                                            {textPostTitle.length}/75\n                                        </Typography>\n                                        <TextValidator \n                                            label='Post title'\n                                            placeholder='Enter a title for your post of 75 characters or less'\n                                            value={textPostTitle}\n                                            onChange={e => setTextPostTitle(e.target.value)}\n                                            helperText='Enter a title for this text post'\n                                            validators={['requiredText', 'titleLength']}\n                                            errorMessages={['Must enter a title for all link posts', 'Title can only be up to 75 characters']}\n                                            InputLabelProps={{\n                                                shrink: true,\n                                            }}\n                                            color='primary'\n                                            variant='outlined'\n                                            fullWidth\n                                        />\n                                        <br></br>\n                                        <TextValidator \n                                            label='Link'\n                                            placeholder='Share a valid link!'\n                                            value={postLink}\n                                            onChange={e => setPostLink(e.target.value)}\n                                            helperText='Enter a valid url link.'\n                                            validators={['requiredText', 'validLink']}\n                                            errorMessages={['Must enter a link!', 'The link that you enter must be formatted properly!']}\n                                            variant='outlined' \n                                            InputLabelProps={{\n                                                shrink: true,\n                                            }}\n                                            color='primary' \n                                            variant='outlined'\n                                            required \n                                            fullWidth \n                                        />\n                                        <Button \n                                            variant='contained' \n                                            color='primary' \n                                            onClick={sendLinkPost}\n                                            disabled={posting}\n                                        >\n                                            {posting ? <CircularProgress color='primary' /> : 'Upload'}\n                                        </Button>\n                                    </ValidatorForm>\n                                </TabPanel>\n                            </DialogContent>\n                        </Dialog>\n                    </Grid>\n                }\n                {/*End of the Grid for the dialog box for posts if the user is logged in and a member of the community */}\n                {/* Below add the tabpanel for posts, about, and settings (only render settings if moderator is visiting page) */}\n                {(community.communityPrivacy === 'public' || (props.mainUser !== null && _.find(community.members, member => member.uniqueUserId === props.mainUser.uniqueUserId))) &&\n                    <Grid \n                        item \n                        xs={12} \n                    >\n                        <Paper \n                            className={classes.paper}\n                            style={{\n                                marginTop: 10,\n                            }}\n                        >\n                            <Tabs \n                                value={curTab2} \n                                onChange={(e, newVal) => setTab2(newVal)}\n                                centered\n                                style={{\n                                    color: 'rgb(255, 255, 255)',\n                                }}\n                            >\n                                <Tab \n                                    label='Posts' \n                                    {...a11yProps(0)} \n                                />\n                                <Tab \n                                    label='About' \n                                    {...a11yProps(1)} \n                                />\n                                {(props.mainUser !== null && community.moderator.uniqueUserId === props.mainUser.uniqueUserId) &&\n                                    <Tab \n                                        label='Settings' \n                                        {...a11yProps(2)} \n                                    />\n                                }\n                            </Tabs>\n                        </Paper>\n                        {/* Now begin the tab for posts. Have the CommunityPostsCard ONLY for users who are logged in */}\n                        <TabPanel \n                            value={0} \n                            index={curTab2} \n                        >\n                            {props.posts.length < 1 && \n                                <Typography \n                                    variant='h6' \n                                    component='h6' \n                                    align='center' \n                                >\n                                    No posts \n                                </Typography>\n                            }\n                            {props.posts.length > 0 && \n                                <div>\n                                    {props.posts.map((post, index) => (\n                                        <div \n                                            style={{\n                                                textAlign: 'left',\n                                            }}\n                                            key={index}\n                                        >\n                                            {props.mainUser !== null &&       \n                                                <CommunityPostsCard\n                                                    post={post}\n                                                    id={post.uniquePostId}\n                                                    moderator={props.mainUser.uniqueUserId === community.moderator.uniqueUserId}\n                                                />\n                                            }\n                                            {props.mainUser === null &&\n                                                <NonUserCommunityPostsCard \n                                                    post={post}\n                                                    id={post.uniquePostId}\n                                                />\n                                            }\n                                            {index < props.posts.length - 1 &&\n                                                <div \n                                                    style={{\n                                                        marginBottom: 20,\n                                                    }}\n                                                />\n                                            }\n                                        </div>\n                                    ))}\n                                </div>\n                            }\n                        </TabPanel>\n                        {/* This is the end of the tab for posts. Now, we need a tab for the about section of the community*/}\n                        \n                    </Grid>\n                }\n                {/* End of the Grid for the main sections of the community page */}\n            </Grid>\n        );\n    }\n    else {\n        //If the community is null, simply return a Backdrop with a CircularProgress inside \n        return (\n            <Backdrop \n                open={true} \n            >\n                <CircularProgress \n                    color='primary' \n                />\n            </Backdrop>\n        );\n    }  \n}\n\nfunction mapStateToProps(state) {\n    return {\n        mainUser: state.userReducer.user,\n        primary: state.userThemeReducer.primary,\n        posts: state.visitorPostsReducer.posts,\n    };\n}\n\nexport default connect(mapStateToProps)(Community);"]},"metadata":{},"sourceType":"module"}