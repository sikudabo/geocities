{"ast":null,"code":"import _slicedToArray from\"c:/Users/bobma/Downloads/excite-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useRef,useEffect}from'react';import Card from'@material-ui/core/Card';import CardHeader from'@material-ui/core/CardHeader';import CardMedia from'@material-ui/core/CardMedia';import CardContent from'@material-ui/core/CardContent';import CardActions from'@material-ui/core/CardActions';import Avatar from'@material-ui/core/Avatar';import Typography from'@material-ui/core/Typography';import Collapse from'@material-ui/core/Collapse';import{ValidatorForm,TextValidator}from'react-material-ui-form-validator';import Button from'@material-ui/core/Button';import Divider from'@material-ui/core/Divider';import IconButton from'@material-ui/core/IconButton';import CircularProgress from'@material-ui/core/CircularProgress';import Icon from'@mdi/react';import{mdiThumbUp,mdiThumbUpOutline,mdiComment,mdiCommentOutline,mdiChevronDown,mdiChevronUp,mdiDelete,mdiSend,mdiDotsVertical}from'@mdi/js';import{makeStyles}from'@material-ui/core/styles';import axios from'axios';import*as _ from'underscore';import{connect}from'react-redux';import swal from'sweetalert';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import ListItemAvatar from'@material-ui/core/ListItemAvatar';import ListItemText from'@material-ui/core/ListItemText';import Plyr from'react-plyr';import Menu from'@material-ui/core/Menu';import MenuItem from'@material-ui/core/MenuItem';import TextField from'@material-ui/core/TextField';import{useHistory}from'react-router-dom';var useStyles=makeStyles(function(theme){return{card:{maxWidth:600,margin:'auto',padding:theme.spacing(2),backgroundColor:theme.palette.background.paper},media:{height:0,padding:'56.25%'},image:{maxWidth:'100%',maxHeight:'100%'}};});export default function NonUserPostsCard(props){var classes=useStyles();var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),expanded=_useState2[0],setExpanded=_useState2[1];//Variable and setter for comments section to display.\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),anchorEl=_useState4[0],setAnchorEl=_useState4[1];//Anchor element for menu with the link to the Card post.\nfunction timeDifference(date2,dateString){//This function will return whether or not we display something like \"2 hrs ago\" \"20 min ago\" or the date string for a post\nvar date1=Date.now();var difference=date1-date2;var daysDifference=Math.floor(difference/1000/60/60/24);var hoursDifference=Math.floor(difference/1000/60/60);var minutesDifference=Math.floor(difference/1000/60);var secondsDifference=Math.floor(difference/1000);if(daysDifference>0){return dateString;}else if(hoursDifference>0&&hoursDifference<23){return\"\".concat(hoursDifference,\" hr ago\");}else if(minutesDifference>0&&minutesDifference<60){return\"\".concat(minutesDifference,\" min ago\");}else if(minutesDifference===0){return\"\".concat(secondsDifference,\" secs ago\");}else{return dateString;}}function changeAnchorEl(e){//Function that will handle altering the anchorEl on menu open \nsetAnchorEl(e.currentTarget);}function handleMenuClose(){//This will handle closing the share button menu.\nsetAnchorEl(null);}function handleUserPush(uniqueUserId){//Route that handles pushing to a new user when the avatar is clicked within comments. \nhistory.push(\"/geouser/\".concat(uniqueUserId));history.go(0);}return/*#__PURE__*/_jsxs(Card,{className:classes.card,id:\"\".concat(props.post.uniquePostId),children:[/*#__PURE__*/_jsx(CardHeader,{title:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",children:props.post.username}),subheader:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",component:\"span\",color:\"textSecondary\",children:timeDifference(props.post.utcTime,props.post.dateString)}),avatar:/*#__PURE__*/_jsx(Avatar,{src:\"http://192.168.0.9:3001/api/get/avatar/by/id/\".concat(props.post.uniqueUserId),title:\"\".concat(props.post.username),alt:\"\".concat(props.post.username)}),action:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(Icon,{path:mdiDotsVertical,size:1,title:\"Share button\",\"aria-label\":\"Share button\",onClick:changeAnchorEl})}),/*#__PURE__*/_jsx(Menu,{open:Boolean(anchorEl),anchorEl:anchorEl,keepMounted:true,onClose:handleMenuClose,children:/*#__PURE__*/_jsx(MenuItem,{children:/*#__PURE__*/_jsx(TextField,{label:\"Post link\",color:\"primary\",value:\"http://192.168.0.9:3000/geouser/\".concat(props.post.uniqueUserId,\"#\").concat(props.post.uniquePostId),readonly:true})})})]})}),/*#__PURE__*/_jsx(\"div\",{children:props.post.type==='photo'&&/*#__PURE__*/_jsx(CardMedia,{component:\"img\",src:\"http://192.168.0.9:3001/api/get-photo/\".concat(props.post.src),title:\"Post by \".concat(props.post.username),alt:\"GeoCities photo post\"})}),/*#__PURE__*/_jsx(\"div\",{children:props.post.type==='video'&&/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(Plyr,{playsinline:true,playsInline:true,type:\"video\",sources:[{src:\"http://192.168.0.9:3001/api/get-video/\".concat(props.post.src)}],fullscreen:{enable:true,fallback:true,iosNative:false}})})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(\"div\",{children:props.post.type==='text'&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",component:\"p\",children:props.post.text})}),/*#__PURE__*/_jsx(\"div\",{children:(props.post.type==='photo'||props.post.type==='video')&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",component:\"p\",children:props.post.caption})})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsxs(IconButton,{color:\"primary\",children:[/*#__PURE__*/_jsx(Icon,{path:mdiThumbUpOutline,size:1,title:\"Post like button\",\"aria-label\":\"Post like button\"}),/*#__PURE__*/_jsx(\"div\",{children:props.post.likes.length>0&&/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"p\",children:props.post.likes.length})})]}),/*#__PURE__*/_jsxs(IconButton,{color:\"primary\",onClick:function onClick(){return setExpanded(!expanded);},children:[/*#__PURE__*/_jsx(Icon,{path:mdiCommentOutline,size:1,title:\"Comment button\",\"aria-label\":\"Comment button\"}),/*#__PURE__*/_jsx(\"div\",{children:props.post.comments.length>0&&/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"p\",children:props.post.comments.length})})]}),/*#__PURE__*/_jsx(IconButton,{style:{marginLeft:'auto'},onClick:function onClick(){return setExpanded(!expanded);},children:/*#__PURE__*/_jsx(Icon,{path:expanded?mdiChevronUp:mdiChevronDown,size:1,title:expanded?'Expand less':'Expand more',\"aria-label\":expanded?'Expand less':'Expand more'})})]}),/*#__PURE__*/_jsxs(Collapse,{in:expanded,children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(\"div\",{style:{marginTop:10},children:props.post.comments.length>0&&/*#__PURE__*/_jsx(\"div\",{children:props.post.comments.map(function(comment,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(ListItem,{id:\"\".concat(comment.uniqueCommentId),alignItems:\"flex-start\",children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{src:\"http://192.168.0.9:3001/api/get/avatar/by/id/\".concat(comment.uniqueUserId),title:\"\".concat(comment.username),alt:\"\".concat(comment.username),onClick:function onClick(e){return handleUserPush(comment.uniqueUserId);},style:{cursor:'pointer'}})}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",children:comment.username}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",component:\"span\",color:\"textSecondary\",children:timeDifference(comment.utcTime,comment.dateString)})]}),secondary:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",component:\"p\",children:comment.text})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(IconButton,{color:\"primary\",children:[/*#__PURE__*/_jsx(Icon,{path:mdiThumbUpOutline,size:1,title:\"Comment like button\",\"aria-label\":\"Comment like button\"}),comment.likes.length>0&&/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"p\",children:comment.likes.length})]})})]}),index<props.post.comments.length-1&&/*#__PURE__*/_jsx(Divider,{})]},index);})})})})]})]});}","map":{"version":3,"sources":["c:/Users/bobma/Downloads/excite-app/src/components/NonUserPostsCard.js"],"names":["React","useState","useRef","useEffect","Card","CardHeader","CardMedia","CardContent","CardActions","Avatar","Typography","Collapse","ValidatorForm","TextValidator","Button","Divider","IconButton","CircularProgress","Icon","mdiThumbUp","mdiThumbUpOutline","mdiComment","mdiCommentOutline","mdiChevronDown","mdiChevronUp","mdiDelete","mdiSend","mdiDotsVertical","makeStyles","axios","_","connect","swal","List","ListItem","ListItemAvatar","ListItemText","Plyr","Menu","MenuItem","TextField","useHistory","useStyles","theme","card","maxWidth","margin","padding","spacing","backgroundColor","palette","background","paper","media","height","image","maxHeight","NonUserPostsCard","props","classes","history","expanded","setExpanded","anchorEl","setAnchorEl","timeDifference","date2","dateString","date1","Date","now","difference","daysDifference","Math","floor","hoursDifference","minutesDifference","secondsDifference","changeAnchorEl","e","currentTarget","handleMenuClose","handleUserPush","uniqueUserId","push","go","post","uniquePostId","username","utcTime","Boolean","type","src","enable","fallback","iosNative","text","caption","likes","length","comments","marginLeft","marginTop","map","comment","index","uniqueCommentId","cursor"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\r\nimport Button from '@material-ui/core/Button';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Icon from '@mdi/react';\r\nimport { mdiThumbUp, mdiThumbUpOutline, mdiComment, mdiCommentOutline, mdiChevronDown, mdiChevronUp, mdiDelete, mdiSend, mdiDotsVertical } from '@mdi/js';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport axios from 'axios';\r\nimport * as _ from 'underscore';\r\nimport { connect } from 'react-redux';\r\nimport swal from 'sweetalert';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Plyr from 'react-plyr';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    card: {\r\n        maxWidth: 600,\r\n        margin: 'auto',\r\n        padding: theme.spacing(2),\r\n        backgroundColor: theme.palette.background.paper,\r\n    },\r\n    media: {\r\n        height: 0,\r\n        padding: '56.25%',\r\n    },\r\n    image: {\r\n        maxWidth: '100%',\r\n        maxHeight: '100%',\r\n    },\r\n}));\r\n\r\nexport default function NonUserPostsCard(props) {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const [expanded, setExpanded] = useState(false); //Variable and setter for comments section to display.\r\n    const [anchorEl, setAnchorEl] = useState(null); //Anchor element for menu with the link to the Card post.\r\n\r\n    function timeDifference(date2, dateString) {\r\n        //This function will return whether or not we display something like \"2 hrs ago\" \"20 min ago\" or the date string for a post\r\n        let date1 = Date.now();\r\n        let difference = date1 - date2;\r\n        let daysDifference = Math.floor(difference/1000/60/60/24);\r\n        let hoursDifference = Math.floor(difference/1000/60/60);\r\n        let minutesDifference = Math.floor(difference/1000/60);\r\n        let secondsDifference = Math.floor(difference/1000);\r\n        if(daysDifference > 0) {\r\n            return dateString;\r\n        }\r\n        else if(hoursDifference > 0 && hoursDifference < 23) {\r\n            return `${hoursDifference} hr ago`;\r\n        }\r\n        else if(minutesDifference > 0 && minutesDifference < 60) {\r\n            return `${minutesDifference} min ago`;\r\n        }\r\n        else if(minutesDifference === 0) {\r\n            return `${secondsDifference} secs ago`\r\n        }\r\n        else {\r\n            return dateString;\r\n        }\r\n    }\r\n\r\n    function changeAnchorEl(e) {\r\n        //Function that will handle altering the anchorEl on menu open \r\n        setAnchorEl(e.currentTarget);\r\n    }\r\n\r\n    function handleMenuClose() {\r\n        //This will handle closing the share button menu.\r\n        setAnchorEl(null);\r\n    }\r\n\r\n    function handleUserPush(uniqueUserId) {\r\n        //Route that handles pushing to a new user when the avatar is clicked within comments. \r\n        history.push(`/geouser/${uniqueUserId}`);\r\n        history.go(0);\r\n    }\r\n\r\n    return (\r\n        <Card \r\n            className={classes.card}\r\n            id={`${props.post.uniquePostId}`}\r\n        >\r\n            <CardHeader \r\n                title={\r\n                    <Typography \r\n                        variant='h6' \r\n                        component='h6'\r\n                    >\r\n                        {props.post.username}\r\n                    </Typography>\r\n                }\r\n                subheader={\r\n                    <Typography \r\n                        variant='subtitle1'\r\n                        component='span'\r\n                        color='textSecondary' \r\n                    >\r\n                        {timeDifference(props.post.utcTime, props.post.dateString)}\r\n                    </Typography>\r\n                }\r\n                avatar={\r\n                    <Avatar \r\n                        src={`http://192.168.0.9:3001/api/get/avatar/by/id/${props.post.uniqueUserId}`}\r\n                        title={`${props.post.username}`}\r\n                        alt={`${props.post.username}`}\r\n                    />\r\n                }\r\n                action={\r\n                    <div>\r\n                        <IconButton>\r\n                            <Icon \r\n                                path={mdiDotsVertical} \r\n                                size={1} \r\n                                title='Share button' \r\n                                aria-label='Share button' \r\n                                onClick={changeAnchorEl}\r\n                            />\r\n                        </IconButton>\r\n                        <Menu \r\n                            open={Boolean(anchorEl)}\r\n                            anchorEl={anchorEl}\r\n                            keepMounted \r\n                            onClose={handleMenuClose}\r\n                        >\r\n                            <MenuItem>\r\n                                <TextField \r\n                                    label='Post link' \r\n                                    color='primary' \r\n                                    value={`http://192.168.0.9:3000/geouser/${props.post.uniqueUserId}#${props.post.uniquePostId}`}\r\n                                    readonly \r\n                                />\r\n                            </MenuItem>\r\n                        </Menu>\r\n                    </div>\r\n                }\r\n            />\r\n            <div>\r\n                {props.post.type === 'photo' &&\r\n                    <CardMedia \r\n                        component='img'\r\n                        src={`http://192.168.0.9:3001/api/get-photo/${props.post.src}`}\r\n                        title={`Post by ${props.post.username}`}\r\n                        alt='GeoCities photo post'\r\n                    />\r\n                }\r\n            </div>\r\n            <div>\r\n                {props.post.type === 'video' &&\r\n                    <CardContent>\r\n                        <Plyr \r\n                            playsinline={true}\r\n                            playsInline\r\n                            type='video'\r\n                            sources={[\r\n                                {\r\n                                    src: `http://192.168.0.9:3001/api/get-video/${props.post.src}`,\r\n                                }\r\n                            ]}\r\n                            fullscreen={{\r\n                                enable: true,\r\n                                fallback: true,\r\n                                iosNative: false,\r\n                            }}\r\n                        />\r\n                    </CardContent>\r\n                }\r\n            </div>\r\n            <CardContent>\r\n                <div>\r\n                    {props.post.type === 'text' &&\r\n                        <Typography \r\n                            variant='body2' \r\n                            component='p' \r\n                        >\r\n                            {props.post.text}\r\n                        </Typography>\r\n                    }\r\n                </div>\r\n                <div>\r\n                    {(props.post.type === 'photo' || props.post.type === 'video') && \r\n                        <Typography \r\n                            variant='body2' \r\n                            component='p' \r\n                        >\r\n                            {props.post.caption}\r\n                        </Typography>\r\n                    }\r\n                </div>\r\n            </CardContent>\r\n            <CardActions>\r\n                <IconButton \r\n                    color='primary'\r\n                >\r\n                    <Icon  \r\n                        path={mdiThumbUpOutline}\r\n                        size={1} \r\n                        title='Post like button'\r\n                        aria-label='Post like button'\r\n                    />\r\n                    <div>\r\n                        {props.post.likes.length > 0 &&\r\n                            <Typography \r\n                                variant='body1' \r\n                                component='p' \r\n                            >\r\n                                {props.post.likes.length}\r\n                            </Typography>\r\n                        }\r\n                    </div>\r\n                </IconButton>\r\n                <IconButton \r\n                    color='primary'\r\n                    onClick={() => setExpanded(!expanded)}\r\n                >\r\n                    <Icon \r\n                        path={mdiCommentOutline} \r\n                        size={1}\r\n                        title='Comment button' \r\n                        aria-label='Comment button' \r\n                    />\r\n                    <div>\r\n                        {props.post.comments.length > 0 &&\r\n                            <Typography \r\n                                variant='body1' \r\n                                component='p' \r\n                            >\r\n                                {props.post.comments.length}\r\n                            </Typography>\r\n                        }\r\n                    </div>\r\n                </IconButton>\r\n                <IconButton \r\n                    style={{\r\n                        marginLeft: 'auto' \r\n                    }}\r\n                    onClick={() => setExpanded(!expanded)}\r\n                >\r\n                    <Icon \r\n                        path={expanded ? mdiChevronUp : mdiChevronDown} \r\n                        size={1}\r\n                        title={expanded ? 'Expand less' : 'Expand more'} \r\n                        aria-label={expanded ? 'Expand less' : 'Expand more'} \r\n                    />\r\n                </IconButton>\r\n            </CardActions>\r\n            <Collapse \r\n                in={expanded} \r\n            >\r\n                <Divider />\r\n                <CardContent>\r\n                    <div \r\n                        style={{\r\n                            marginTop: 10,\r\n                        }}\r\n                    >\r\n                        {props.post.comments.length > 0 &&\r\n                            <div>\r\n                                {props.post.comments.map((comment, index) => (\r\n                                    <div\r\n                                        key={index} \r\n                                    >\r\n                                        <ListItem \r\n                                            id={`${comment.uniqueCommentId}`}\r\n                                            alignItems='flex-start'\r\n                                        >\r\n                                            <ListItemAvatar>\r\n                                                <Avatar \r\n                                                    src={`http://192.168.0.9:3001/api/get/avatar/by/id/${comment.uniqueUserId}`}\r\n                                                    title={`${comment.username}`}\r\n                                                    alt={`${comment.username}`} \r\n                                                    onClick={e => handleUserPush(comment.uniqueUserId)}\r\n                                                    style={{\r\n                                                        cursor: 'pointer',\r\n                                                    }}\r\n                                                />\r\n                                            </ListItemAvatar>\r\n                                            <ListItemText \r\n                                                primary={\r\n                                                    <div>\r\n                                                        <Typography \r\n                                                            variant='h6' \r\n                                                            component='h6' \r\n                                                        >\r\n                                                            {comment.username}\r\n                                                        </Typography>\r\n                                                        <Typography \r\n                                                            variant='subtitle1' \r\n                                                            component='span' \r\n                                                            color='textSecondary'\r\n                                                        >\r\n                                                            {timeDifference(comment.utcTime, comment.dateString)}\r\n                                                        </Typography>\r\n                                                    </div>\r\n                                                }\r\n                                                secondary={\r\n                                                    <Typography \r\n                                                        variant='body2' \r\n                                                        component='p' \r\n                                                    >\r\n                                                        {comment.text}\r\n                                                    </Typography>\r\n                                                }\r\n                                            />\r\n                                            <div>\r\n                                                <IconButton \r\n                                                    color='primary'\r\n                                                >\r\n                                                    <Icon \r\n                                                        path={mdiThumbUpOutline} \r\n                                                        size={1}  \r\n                                                        title='Comment like button' \r\n                                                        aria-label='Comment like button' \r\n                                                    /> \r\n                                                    {comment.likes.length > 0 &&\r\n                                                        <Typography \r\n                                                            variant='body1' \r\n                                                            component='p' \r\n                                                        >\r\n                                                            {comment.likes.length}\r\n                                                        </Typography>\r\n                                                    }\r\n                                                </IconButton>\r\n                                            </div>\r\n                                        </ListItem>\r\n                                        {index < props.post.comments.length - 1 &&\r\n                                            <Divider />\r\n                                        }\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                </CardContent>\r\n            </Collapse>\r\n        </Card>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}